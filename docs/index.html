<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="PestWP - Modern WordPress Testing with Pest PHP. Elegant syntax, powerful assertions, and seamless WordPress integration.">
    <meta name="keywords" content="WordPress, Pest PHP, Testing, Unit Tests, Integration Tests, PHP Testing">
    <title>PestWP - Modern WordPress Testing</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ§ª</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-light">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-dark" disabled>
    
    <!-- Marked.js for markdown parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/yaml.min.js"></script>
    
    <style>
        /* ========================================
           CSS Variables - GitHub-inspired palette
           ======================================== */
        :root {
            /* Light theme */
            --color-bg-primary: #ffffff;
            --color-bg-secondary: #f6f8fa;
            --color-bg-tertiary: #f0f3f6;
            --color-bg-overlay: rgba(255, 255, 255, 0.97);
            --color-border: #d1d9e0;
            --color-border-muted: #d8dee4;
            --color-text-primary: #1f2328;
            --color-text-secondary: #656d76;
            --color-text-muted: #8b949e;
            --color-text-link: #0969da;
            --color-accent: #0969da;
            --color-accent-hover: #0550ae;
            --color-accent-subtle: #ddf4ff;
            --color-success: #1a7f37;
            --color-success-subtle: #dafbe1;
            --color-warning: #9a6700;
            --color-warning-subtle: #fff8c5;
            --color-danger: #d1242f;
            --color-code-bg: #f6f8fa;
            --color-code-text: #1f2328;
            --color-sidebar-bg: #f6f8fa;
            --color-sidebar-hover: #eaeef2;
            --color-sidebar-active: #ddf4ff;
            --color-header-bg: #f6f8fa;
            --shadow-sm: 0 1px 0 rgba(31, 35, 40, 0.04);
            --shadow-md: 0 3px 6px rgba(140, 149, 159, 0.15);
            --shadow-lg: 0 8px 24px rgba(140, 149, 159, 0.2);
        }

        [data-theme="dark"] {
            /* Dark theme */
            --color-bg-primary: #0d1117;
            --color-bg-secondary: #161b22;
            --color-bg-tertiary: #21262d;
            --color-bg-overlay: rgba(13, 17, 23, 0.97);
            --color-border: #30363d;
            --color-border-muted: #21262d;
            --color-text-primary: #e6edf3;
            --color-text-secondary: #8b949e;
            --color-text-muted: #6e7681;
            --color-text-link: #58a6ff;
            --color-accent: #58a6ff;
            --color-accent-hover: #79c0ff;
            --color-accent-subtle: #388bfd26;
            --color-success: #3fb950;
            --color-success-subtle: #23863626;
            --color-warning: #d29922;
            --color-warning-subtle: #bb800926;
            --color-danger: #f85149;
            --color-code-bg: #161b22;
            --color-code-text: #e6edf3;
            --color-sidebar-bg: #010409;
            --color-sidebar-hover: #161b22;
            --color-sidebar-active: #388bfd26;
            --color-header-bg: #161b22;
            --shadow-sm: 0 1px 0 rgba(0, 0, 0, 0.1);
            --shadow-md: 0 3px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.4);
        }

        /* ========================================
           Reset & Base Styles
           ======================================== */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ========================================
           Layout
           ======================================== */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* ========================================
           Header
           ======================================== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: var(--color-header-bg);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            align-items: center;
            padding: 0 24px;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--color-text-primary);
            font-weight: 700;
            font-size: 1.25rem;
        }

        .logo-icon {
            font-size: 1.75rem;
        }

        .logo-text span {
            color: var(--color-accent);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-container {
            position: relative;
        }

        .search-input {
            width: 280px;
            padding: 8px 12px 8px 36px;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text-primary);
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px var(--color-accent-subtle);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-text-muted);
            pointer-events: none;
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            padding: 8px;
            cursor: pointer;
            color: var(--color-text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
        }

        .github-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text-primary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .github-link:hover {
            background: var(--color-bg-secondary);
            border-color: var(--color-text-muted);
        }

        /* ========================================
           Sidebar
           ======================================== */
        .sidebar {
            position: fixed;
            top: 64px;
            left: 0;
            bottom: 0;
            width: 280px;
            background: var(--color-sidebar-bg);
            border-right: 1px solid var(--color-border);
            overflow-y: auto;
            padding: 24px 0;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .sidebar-section {
            margin-bottom: 24px;
        }

        .sidebar-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-muted);
            padding: 0 24px;
            margin-bottom: 8px;
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-link {
            display: block;
            padding: 8px 24px;
            color: var(--color-text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.15s;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover {
            background: var(--color-sidebar-hover);
            color: var(--color-text-primary);
        }

        .sidebar-link.active {
            background: var(--color-sidebar-active);
            color: var(--color-accent);
            border-left-color: var(--color-accent);
            font-weight: 500;
        }

        /* Mobile menu toggle */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: var(--color-text-primary);
        }

        /* ========================================
           Main Content
           ======================================== */
        .main-content {
            flex: 1;
            margin-left: 280px;
            margin-top: 64px;
            min-height: calc(100vh - 64px);
        }

        .content-wrapper {
            max-width: 900px;
            margin: 0 auto;
            padding: 48px 48px 96px;
        }

        /* ========================================
           Article Styles
           ======================================== */
        .article {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .article h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--color-border);
            line-height: 1.25;
        }

        .article h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 48px;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--color-border);
        }

        .article h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 32px;
            margin-bottom: 12px;
        }

        .article h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-top: 24px;
            margin-bottom: 8px;
        }

        .article p {
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }

        .article a {
            color: var(--color-text-link);
            text-decoration: none;
        }

        .article a:hover {
            text-decoration: underline;
        }

        .article ul, .article ol {
            margin-bottom: 16px;
            padding-left: 24px;
        }

        .article li {
            margin-bottom: 8px;
        }

        .article li::marker {
            color: var(--color-text-muted);
        }

        .article hr {
            border: none;
            border-top: 1px solid var(--color-border);
            margin: 32px 0;
        }

        .article blockquote {
            border-left: 4px solid var(--color-accent);
            padding: 12px 20px;
            margin: 16px 0;
            background: var(--color-bg-secondary);
            border-radius: 0 6px 6px 0;
            color: var(--color-text-secondary);
        }

        .article blockquote p:last-child {
            margin-bottom: 0;
        }

        /* Code blocks */
        .article pre {
            background: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            margin: 16px 0 24px;
            position: relative;
        }

        .article pre code {
            font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            background: none;
            padding: 0;
            color: var(--color-code-text);
        }

        .article code {
            font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 0.875em;
            background: var(--color-code-bg);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--color-danger);
        }

        /* Copy button for code blocks */
        .code-block-wrapper {
            position: relative;
        }

        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 6px 10px;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            color: var(--color-text-secondary);
            font-size: 0.75rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.2s;
        }

        .code-block-wrapper:hover .copy-button {
            opacity: 1;
        }

        .copy-button:hover {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
        }

        .copy-button.copied {
            background: var(--color-success-subtle);
            color: var(--color-success);
            border-color: var(--color-success);
        }

        /* Tables */
        .article table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0 24px;
            font-size: 0.875rem;
        }

        .article th, .article td {
            padding: 12px 16px;
            text-align: left;
            border: 1px solid var(--color-border);
        }

        .article th {
            background: var(--color-bg-secondary);
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .article tr:hover {
            background: var(--color-bg-secondary);
        }

        /* Alerts/Notes */
        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin: 16px 0;
            display: flex;
            gap: 12px;
        }

        .alert-info {
            background: var(--color-accent-subtle);
            border: 1px solid var(--color-accent);
        }

        .alert-warning {
            background: var(--color-warning-subtle);
            border: 1px solid var(--color-warning);
        }

        .alert-success {
            background: var(--color-success-subtle);
            border: 1px solid var(--color-success);
        }

        /* ========================================
           Hero Section (Home page)
           ======================================== */
        .hero {
            text-align: center;
            padding: 64px 0;
            margin-bottom: 48px;
        }

        .hero-badge {
            display: inline-block;
            padding: 6px 12px;
            background: var(--color-accent-subtle);
            color: var(--color-accent);
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 24px;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 24px;
            border: none;
            padding: 0;
            background: linear-gradient(135deg, var(--color-text-primary) 0%, var(--color-accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-description {
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            max-width: 600px;
            margin: 0 auto 32px;
            line-height: 1.7;
        }

        .hero-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--color-accent);
            color: #fff;
            border: none;
        }

        .btn-primary:hover {
            background: var(--color-accent-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background: var(--color-bg-tertiary);
            border-color: var(--color-text-muted);
        }

        /* Feature cards */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin: 48px 0;
        }

        .feature-card {
            padding: 24px;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            transition: all 0.2s;
        }

        .feature-card:hover {
            border-color: var(--color-accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 16px;
        }

        .feature-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
            margin-top: 0;
        }

        .feature-card p {
            color: var(--color-text-secondary);
            font-size: 0.9375rem;
            margin: 0;
        }

        /* ========================================
           Footer
           ======================================== */
        .footer {
            background: var(--color-bg-secondary);
            border-top: 1px solid var(--color-border);
            padding: 32px 48px;
            text-align: center;
            color: var(--color-text-muted);
            font-size: 0.875rem;
        }

        .footer a {
            color: var(--color-text-link);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* ========================================
           Loading State
           ======================================== */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--color-border);
            border-top-color: var(--color-accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ========================================
           Search Results
           ======================================== */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            margin-top: 8px;
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-result-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--color-border);
            cursor: pointer;
            transition: background 0.15s;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover {
            background: var(--color-bg-secondary);
        }

        .search-result-title {
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 4px;
        }

        .search-result-excerpt {
            font-size: 0.8125rem;
            color: var(--color-text-muted);
        }

        /* ========================================
           Responsive Design
           ======================================== */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: flex;
            }

            .search-input {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 0 16px;
            }

            .content-wrapper {
                padding: 32px 20px 64px;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-description {
                font-size: 1.125rem;
            }

            .github-link span {
                display: none;
            }

            .search-container {
                display: none;
            }

            .article h1 {
                font-size: 2rem;
            }

            .article h2 {
                font-size: 1.375rem;
            }

            .article pre {
                border-radius: 0;
                margin-left: -20px;
                margin-right: -20px;
                padding: 16px 20px;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-text-muted);
        }

        /* Table of Contents */
        .toc {
            position: fixed;
            right: 24px;
            top: 100px;
            width: 220px;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
            padding: 16px;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-size: 0.8125rem;
        }

        .toc-title {
            font-weight: 600;
            color: var(--color-text-muted);
            text-transform: uppercase;
            font-size: 0.6875rem;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
        }

        .toc-list {
            list-style: none;
        }

        .toc-link {
            display: block;
            padding: 4px 0;
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: color 0.15s;
        }

        .toc-link:hover {
            color: var(--color-accent);
        }

        .toc-link.active {
            color: var(--color-accent);
            font-weight: 500;
        }

        @media (max-width: 1280px) {
            .toc {
                display: none;
            }
        }

        /* Version badge */
        .version-badge {
            display: inline-block;
            padding: 2px 8px;
            background: var(--color-success-subtle);
            color: var(--color-success);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div style="display: flex; align-items: center; gap: 16px;">
                <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12h18M3 6h18M3 18h18"/>
                    </svg>
                </button>
                <a href="#home" class="logo">
                    <span class="logo-icon">ðŸ§ª</span>
                    <span class="logo-text">Pest<span>WP</span></span>
                    <span class="version-badge">v1.0</span>
                </a>
            </div>

            <div class="header-actions">
                <div class="search-container">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                    </svg>
                    <input type="text" class="search-input" id="searchInput" placeholder="Search docs...">
                    <div class="search-results" id="searchResults"></div>
                </div>

                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="sun-icon">
                        <circle cx="12" cy="12" r="5"/>
                        <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                    </svg>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="moon-icon" style="display: none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>

                <a href="https://github.com/alvarodelera/pest-wp-plugin" class="github-link" target="_blank" rel="noopener">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    <span>GitHub</span>
                </a>
            </div>
        </div>
    </header>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">Getting Started</div>
                <ul class="sidebar-nav">
                    <li><a href="#home" class="sidebar-link active" data-page="home">Home</a></li>
                    <li><a href="#installation" class="sidebar-link" data-page="installation">Installation</a></li>
                    <li><a href="#getting-started" class="sidebar-link" data-page="getting-started">Quick Start</a></li>
                    <li><a href="#configuration" class="sidebar-link" data-page="configuration">Configuration</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Core Features</div>
                <ul class="sidebar-nav">
                    <li><a href="#factories" class="sidebar-link" data-page="factories">Factories</a></li>
                    <li><a href="#expectations" class="sidebar-link" data-page="expectations">Expectations</a></li>
                    <li><a href="#authentication" class="sidebar-link" data-page="authentication">Authentication</a></li>
                    <li><a href="#database-isolation" class="sidebar-link" data-page="database-isolation">Database Isolation</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Testing Types</div>
                <ul class="sidebar-nav">
                    <li><a href="#browser-testing" class="sidebar-link" data-page="browser-testing">Browser Testing</a></li>
                    <li><a href="#rest-api-testing" class="sidebar-link" data-page="rest-api-testing">REST API Testing</a></li>
                    <li><a href="#ajax-testing" class="sidebar-link" data-page="ajax-testing">AJAX Testing</a></li>
                    <li><a href="#architecture-testing" class="sidebar-link" data-page="architecture-testing">Architecture Testing</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Advanced Features</div>
                <ul class="sidebar-nav">
                    <li><a href="#mocking" class="sidebar-link" data-page="mocking">Mocking</a></li>
                    <li><a href="#fixtures" class="sidebar-link" data-page="fixtures">Fixtures</a></li>
                    <li><a href="#snapshots" class="sidebar-link" data-page="snapshots">Snapshots</a></li>
                    <li><a href="#visual-regression" class="sidebar-link" data-page="visual-regression">Visual Regression</a></li>
                    <li><a href="#accessibility-testing" class="sidebar-link" data-page="accessibility-testing">Accessibility Testing</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Integrations</div>
                <ul class="sidebar-nav">
                    <li><a href="#woocommerce" class="sidebar-link" data-page="woocommerce">WooCommerce</a></li>
                    <li><a href="#gutenberg" class="sidebar-link" data-page="gutenberg">Gutenberg</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Deployment</div>
                <ul class="sidebar-nav">
                    <li><a href="#ci-cd" class="sidebar-link" data-page="ci-cd">CI/CD</a></li>
                    <li><a href="#migration" class="sidebar-link" data-page="migration">Migration</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <article class="article" id="articleContent">
                    <!-- Content loaded here -->
                </article>
            </div>

            <footer class="footer">
                <p>
                    Released under the MIT License. 
                    <a href="https://github.com/alvarodelera/pest-wp-plugin" target="_blank">View on GitHub</a>
                </p>
                <p style="margin-top: 8px;">
                    Built with Pest PHP for WordPress developers.
                </p>
            </footer>
        </main>
    </div>

    <script>
        // ========================================
        // Configuration
        // ========================================
        const embeddedPages = {
    "home": "# PestWP\n\n> A modern WordPress testing framework powered by Pest PHP\n\nPestWP brings the elegant syntax of [Pest PHP](https://pestphp.com) to WordPress development, making it delightful to write tests for your plugins and themes.\n\n## Features\n\n- **Zero-Config Setup** - Works out of the box with SQLite, no MySQL required\n- **Elegant Syntax** - Write expressive tests with Pest's beautiful API\n- **WordPress Factories** - Create posts, users, terms, and more with simple helpers\n- **Custom Expectations** - WordPress-specific assertions for posts, users, hooks, and more\n- **Database Isolation** - Each test runs in a clean database state\n- **Browser Testing** - Full Playwright integration for end-to-end testing\n- **REST API Testing** - Fluent API for testing REST endpoints\n- **AJAX Testing** - Easy testing of admin-ajax handlers\n- **Mocking System** - Mock functions, hooks, HTTP requests, and time\n- **Architecture Testing** - Enforce coding standards with Pest's arch() API\n- **Visual Regression** - Screenshot comparison for UI testing\n- **Accessibility Testing** - Built-in WCAG compliance checks\n- **WooCommerce Support** - Dedicated helpers and selectors\n- **Gutenberg Support** - Block editor testing utilities\n\n## Quick Example\n\n```php\n<?php\n\nuse function PestWP\\createPost;\nuse function PestWP\\createUser;\nuse function PestWP\\loginAs;\n\nit('allows editors to publish posts', function () {\n    $editor = createUser('editor');\n    $post = createPost(['post_status' => 'draft']);\n    \n    loginAs($editor);\n    \n    wp_update_post([\n        'ID' => $post->ID,\n        'post_status' => 'publish',\n    ]);\n    \n    $post = get_post($post->ID);\n    \n    expect($post)->toBePublished();\n});\n\nit('registers custom post types correctly', function () {\n    expect('product')->toBeRegisteredPostType();\n    expect('product')->toSupportFeature('title');\n    expect('product')->toSupportFeature('thumbnail');\n});\n\nit('filters content correctly', function () {\n    expect('the_content')\n        ->toHaveFilter('wpautop', 10);\n});\n```\n\n## Requirements\n\n- PHP 8.3+\n- Pest PHP 4.0+\n- WordPress 6.0+ (for testing)\n\n## Getting Started\n\n1. [Installation](installation.md) - Install PestWP via Composer\n2. [Quick Start](getting-started.md) - Write your first test\n3. [Configuration](configuration.md) - Customize your setup\n\n## Documentation\n\n### Core Features\n- [Factories](factories.md) - Create test data easily\n- [Expectations](expectations.md) - WordPress-specific assertions\n- [Authentication](authentication.md) - Test with different users\n- [Database Isolation](database-isolation.md) - Clean state for each test\n\n### Testing Types\n- [Browser Testing](browser-testing.md) - End-to-end testing with Playwright\n- [REST API Testing](rest-api-testing.md) - Test REST endpoints\n- [AJAX Testing](ajax-testing.md) - Test admin-ajax handlers\n- [Architecture Testing](architecture-testing.md) - Enforce code standards\n\n### Advanced Features\n- [Mocking](mocking.md) - Mock functions, hooks, HTTP, and time\n- [Fixtures](fixtures.md) - Reusable test data\n- [Snapshots](snapshots.md) - Snapshot testing\n- [Visual Regression](visual-regression.md) - Screenshot comparison\n- [Accessibility](accessibility-testing.md) - WCAG compliance testing\n\n### Integrations\n- [WooCommerce](woocommerce.md) - E-commerce testing\n- [Gutenberg](gutenberg.md) - Block editor testing\n\n### Deployment\n- [CI/CD](ci-cd.md) - GitHub Actions, GitLab CI\n- [Migration](migration.md) - Migrate from other frameworks\n\n## License\n\nPestWP is open-source software licensed under the [MIT license](https://opensource.org/licenses/MIT).\n",
    "installation": "# Installation\n\nThis guide will walk you through installing PestWP in your WordPress plugin or theme.\n\n## Requirements\n\n- **PHP 8.3** or higher\n- **Composer** for dependency management\n- **Pest PHP 4.0** or higher\n\n## Install via Composer\n\n```bash\ncomposer require --dev alvarodelera/pest-wp-plugin\n```\n\nThis will install PestWP along with its dependencies, including Pest PHP.\n\n## Initialize Pest\n\nIf you haven't already initialized Pest in your project:\n\n```bash\n./vendor/bin/pest --init\n```\n\nThis creates the `tests/` directory structure and a `Pest.php` configuration file.\n\n## Project Structure\n\nAfter installation, your project should look like this:\n\n```\nyour-plugin/\n\u251c\u2500\u2500 src/\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 Pest.php           # Pest configuration\n\u2502   \u251c\u2500\u2500 TestCase.php       # Base test case (optional)\n\u2502   \u251c\u2500\u2500 Unit/              # Unit tests\n\u2502   \u2514\u2500\u2500 Integration/       # Integration tests\n\u251c\u2500\u2500 composer.json\n\u2514\u2500\u2500 phpunit.xml\n```\n\n## Configure Pest.php\n\nEdit your `tests/Pest.php` file to include PestWP:\n\n```php\n<?php\n\nuse PestWP\\Concerns\\InteractsWithDatabase;\n\n// Apply database isolation to integration tests\nuses(InteractsWithDatabase::class)->in('Integration');\n\n// Or use the helper function\nuses(PestWP\\databaseIsolation())->in('Integration');\n```\n\n## WordPress Path Configuration\n\nPestWP needs to know where WordPress is located. You can configure this in several ways:\n\n### Option 1: Environment Variable\n\nSet the `WP_PATH` environment variable:\n\n```bash\nexport WP_PATH=/path/to/wordpress\n```\n\nOr in your `phpunit.xml`:\n\n```xml\n<php>\n    <env name=\"WP_PATH\" value=\"/path/to/wordpress\"/>\n</php>\n```\n\n### Option 2: Composer Extra\n\nAdd to your `composer.json`:\n\n```json\n{\n    \"extra\": {\n        \"pest-wp\": {\n            \"wordpress-path\": \"/path/to/wordpress\"\n        }\n    }\n}\n```\n\n### Option 3: Auto-Detection\n\nIf WordPress is in a parent directory or standard location, PestWP will attempt to auto-detect it.\n\n## Database Configuration\n\nPestWP supports SQLite for testing (no MySQL required) or a dedicated MySQL test database.\n\n### SQLite (Default)\n\nSQLite is used by default for fast, isolated testing:\n\n```php\n// tests/Pest.php\nuses(PestWP\\databaseIsolation())->in('Integration');\n```\n\n### MySQL\n\nTo use MySQL, set the database credentials:\n\n```xml\n<!-- phpunit.xml -->\n<php>\n    <env name=\"WP_TESTS_DB_NAME\" value=\"wordpress_test\"/>\n    <env name=\"WP_TESTS_DB_USER\" value=\"root\"/>\n    <env name=\"WP_TESTS_DB_PASSWORD\" value=\"\"/>\n    <env name=\"WP_TESTS_DB_HOST\" value=\"localhost\"/>\n</php>\n```\n\n## Browser Testing Setup\n\nFor browser testing with Playwright:\n\n```bash\n# Install browser binaries\n./vendor/bin/pest-setup-browser\n\n# Or manually install Playwright\nnpx playwright install chromium\n```\n\n## Verify Installation\n\nCreate a simple test to verify everything works:\n\n```php\n<?php\n\n// tests/Unit/ExampleTest.php\n\nit('can use PestWP', function () {\n    expect(true)->toBeTrue();\n});\n```\n\nRun the tests:\n\n```bash\n./vendor/bin/pest\n```\n\n## Next Steps\n\n- [Quick Start Guide](getting-started.md) - Write your first WordPress test\n- [Configuration](configuration.md) - Customize PestWP settings\n- [Factories](factories.md) - Learn to create test data\n",
    "getting-started": "# Quick Start Guide\n\nThis guide will help you write your first WordPress tests with PestWP.\n\n## Your First Test\n\nCreate a new test file in `tests/Unit/`:\n\n```php\n<?php\n\n// tests/Unit/ExampleTest.php\n\nit('has a working WordPress environment', function () {\n    expect(function_exists('wp_insert_post'))->toBeTrue();\n});\n```\n\nRun the test:\n\n```bash\n./vendor/bin/pest\n```\n\n## Testing Posts\n\nUse the `createPost()` factory to create test posts:\n\n```php\n<?php\n\nuse function PestWP\\createPost;\n\nit('creates a published post', function () {\n    $post = createPost([\n        'post_title' => 'Hello World',\n        'post_content' => 'This is my first post.',\n    ]);\n    \n    expect($post)->toBeInstanceOf(WP_Post::class);\n    expect($post)->toBePublished();\n    expect($post->post_title)->toBe('Hello World');\n});\n\nit('creates a draft post', function () {\n    $post = createPost([\n        'post_status' => 'draft',\n    ]);\n    \n    expect($post)->toBeDraft();\n});\n```\n\n## Testing Users\n\nCreate and authenticate as different users:\n\n```php\n<?php\n\nuse function PestWP\\createUser;\nuse function PestWP\\loginAs;\nuse function PestWP\\logout;\nuse function PestWP\\currentUser;\n\nit('authenticates users correctly', function () {\n    $admin = createUser('administrator');\n    \n    loginAs($admin);\n    \n    expect(currentUser()->ID)->toBe($admin->ID);\n    expect($admin)->toHaveRole('administrator');\n    expect($admin)->toHaveCapability('manage_options');\n    \n    logout();\n    \n    expect(currentUser()->ID)->toBe(0);\n});\n\nit('tests user capabilities', function () {\n    $editor = createUser('editor');\n    $subscriber = createUser('subscriber');\n    \n    expect($editor)->can('edit_posts');\n    expect($editor)->can('publish_posts');\n    expect($subscriber)->not->can('publish_posts');\n});\n```\n\n## Testing Custom Post Types\n\nVerify that your custom post types are registered correctly:\n\n```php\n<?php\n\nit('registers the product post type', function () {\n    expect('product')->toBeRegisteredPostType();\n    expect('product')->toSupportFeature('title');\n    expect('product')->toSupportFeature('editor');\n    expect('product')->toSupportFeature('thumbnail');\n});\n\nit('registers the product taxonomy', function () {\n    expect('product_category')->toBeRegisteredTaxonomy();\n});\n```\n\n## Testing Hooks\n\nVerify that hooks are registered:\n\n```php\n<?php\n\nit('adds filters correctly', function () {\n    add_filter('the_title', 'my_title_filter', 20);\n    \n    expect('the_title')->toHaveFilter('my_title_filter', 20);\n});\n\nit('adds actions correctly', function () {\n    add_action('init', 'my_init_callback', 15);\n    \n    expect('init')->toHaveAction('my_init_callback', 15);\n});\n```\n\n## Testing Options\n\nWork with WordPress options:\n\n```php\n<?php\n\nuse function PestWP\\setOption;\nuse function PestWP\\deleteOption;\n\nit('stores options correctly', function () {\n    setOption('my_plugin_setting', 'value');\n    \n    expect('my_plugin_setting')->toHaveOption('value');\n    \n    deleteOption('my_plugin_setting');\n    \n    expect(get_option('my_plugin_setting', false))->toBeFalse();\n});\n```\n\n## Testing with Metadata\n\nAdd and verify post/user metadata:\n\n```php\n<?php\n\nuse function PestWP\\createPost;\nuse function PestWP\\createUser;\n\nit('stores post meta correctly', function () {\n    $post = createPost();\n    \n    update_post_meta($post->ID, 'price', '99.99');\n    \n    // Refresh the post object\n    $post = get_post($post->ID);\n    \n    expect($post)->toHaveMeta('price', '99.99');\n    expect($post)->toHaveMetaKey('price');\n});\n\nit('stores user meta correctly', function () {\n    $user = createUser();\n    \n    update_user_meta($user->ID, 'favorite_color', 'blue');\n    \n    expect($user)->toHaveUserMeta('favorite_color', 'blue');\n});\n```\n\n## Testing Terms\n\nCreate and assign terms to posts:\n\n```php\n<?php\n\nuse function PestWP\\createPost;\nuse function PestWP\\createTerm;\n\nit('assigns terms to posts', function () {\n    $post = createPost();\n    $termId = createTerm('News', 'category');\n    \n    wp_set_post_terms($post->ID, [$termId], 'category');\n    \n    expect($post)->toHaveTerm('News', 'category');\n});\n```\n\n## Testing Shortcodes\n\nRegister and test shortcodes:\n\n```php\n<?php\n\nuse function PestWP\\registerTestShortcode;\n\nit('registers shortcodes', function () {\n    registerTestShortcode('my_shortcode', function ($atts) {\n        return 'Hello World';\n    });\n    \n    expect('my_shortcode')->toBeRegisteredShortcode();\n    \n    $output = do_shortcode('[my_shortcode]');\n    expect($output)->toBe('Hello World');\n});\n```\n\n## Testing WP_Error\n\nHandle and verify WordPress errors:\n\n```php\n<?php\n\nit('handles WP_Error correctly', function () {\n    $error = new WP_Error('invalid_email', 'The email address is invalid.');\n    \n    expect($error)->toBeWPError();\n    expect($error)->toHaveErrorCode('invalid_email');\n});\n```\n\n## Running Tests\n\n```bash\n# Run all tests\n./vendor/bin/pest\n\n# Run specific test file\n./vendor/bin/pest tests/Unit/PostTest.php\n\n# Run tests matching a pattern\n./vendor/bin/pest --filter=\"creates a published post\"\n\n# Run with coverage\n./vendor/bin/pest --coverage\n```\n\n## Next Steps\n\n- [Factories](factories.md) - Deep dive into test data creation\n- [Expectations](expectations.md) - All available assertions\n- [Database Isolation](database-isolation.md) - Understand test isolation\n- [Browser Testing](browser-testing.md) - End-to-end testing\n",
    "configuration": "# Configuration\n\nThis guide covers all configuration options for PestWP.\n\n## Pest.php Configuration\n\nThe main configuration file is `tests/Pest.php`:\n\n```php\n<?php\n\nuse PestWP\\Concerns\\InteractsWithDatabase;\n\n/*\n|--------------------------------------------------------------------------\n| Test Case\n|--------------------------------------------------------------------------\n|\n| The base test case class that all tests extend.\n|\n*/\n\n// uses(Tests\\TestCase::class)->in('Feature');\n\n/*\n|--------------------------------------------------------------------------\n| Database Isolation\n|--------------------------------------------------------------------------\n|\n| Apply database isolation to integration tests.\n|\n*/\n\nuses(InteractsWithDatabase::class)->in('Integration');\n\n// Or use the helper function:\n// uses(PestWP\\databaseIsolation())->in('Integration');\n\n/*\n|--------------------------------------------------------------------------\n| Expectations\n|--------------------------------------------------------------------------\n|\n| Custom expectations are automatically registered by PestWP.\n| You can add your own custom expectations here.\n|\n*/\n\nexpect()->extend('toBeValidPost', function () {\n    expect($this->value)\n        ->toBeInstanceOf(WP_Post::class)\n        ->and($this->value->post_status)->not->toBe('auto-draft');\n    \n    return $this;\n});\n```\n\n## PHPUnit Configuration\n\nConfigure environment variables in `phpunit.xml`:\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<phpunit xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:noNamespaceSchemaLocation=\"vendor/phpunit/phpunit/phpunit.xsd\"\n         bootstrap=\"vendor/autoload.php\"\n         colors=\"true\"\n>\n    <testsuites>\n        <testsuite name=\"Unit\">\n            <directory>tests/Unit</directory>\n        </testsuite>\n        <testsuite name=\"Integration\">\n            <directory>tests/Integration</directory>\n        </testsuite>\n    </testsuites>\n    \n    <php>\n        <!-- WordPress Path -->\n        <env name=\"WP_PATH\" value=\"/path/to/wordpress\"/>\n        \n        <!-- Database Configuration -->\n        <env name=\"WP_TESTS_DB_NAME\" value=\"wordpress_test\"/>\n        <env name=\"WP_TESTS_DB_USER\" value=\"root\"/>\n        <env name=\"WP_TESTS_DB_PASSWORD\" value=\"\"/>\n        <env name=\"WP_TESTS_DB_HOST\" value=\"localhost\"/>\n        \n        <!-- Test Configuration -->\n        <env name=\"WP_TESTS_DOMAIN\" value=\"localhost\"/>\n        <env name=\"WP_TESTS_EMAIL\" value=\"admin@example.com\"/>\n        <env name=\"WP_TESTS_TITLE\" value=\"Test Site\"/>\n        \n        <!-- Enable/disable features -->\n        <env name=\"PEST_WP_SQLITE\" value=\"true\"/>\n    </php>\n    \n    <source>\n        <include>\n            <directory suffix=\".php\">src</directory>\n        </include>\n    </source>\n</phpunit>\n```\n\n## Environment Variables\n\n### WordPress Path\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `WP_PATH` | Path to WordPress installation | Auto-detected |\n| `WP_CONTENT_DIR` | Path to wp-content directory | `{WP_PATH}/wp-content` |\n| `WP_PLUGIN_DIR` | Path to plugins directory | `{WP_CONTENT_DIR}/plugins` |\n\n### Database\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `WP_TESTS_DB_NAME` | Test database name | `wordpress_test` |\n| `WP_TESTS_DB_USER` | Database username | `root` |\n| `WP_TESTS_DB_PASSWORD` | Database password | (empty) |\n| `WP_TESTS_DB_HOST` | Database host | `localhost` |\n| `PEST_WP_SQLITE` | Use SQLite instead of MySQL | `true` |\n\n### Site Configuration\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `WP_TESTS_DOMAIN` | Test site domain | `localhost` |\n| `WP_TESTS_EMAIL` | Admin email | `admin@example.com` |\n| `WP_TESTS_TITLE` | Site title | `Test Site` |\n| `WP_DEBUG` | Enable WordPress debug mode | `true` |\n\n### Browser Testing\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `PEST_BROWSER_HEADLESS` | Run browser in headless mode | `true` |\n| `PEST_BROWSER_SLOW_MO` | Slow down browser actions (ms) | `0` |\n| `PEST_BROWSER_TIMEOUT` | Default timeout (ms) | `30000` |\n| `PEST_SCREENSHOT_DIR` | Screenshot output directory | `tests/__screenshots__` |\n\n## Composer Configuration\n\nAdd PestWP configuration to `composer.json`:\n\n```json\n{\n    \"extra\": {\n        \"pest-wp\": {\n            \"wordpress-path\": \"/path/to/wordpress\",\n            \"sqlite\": true,\n            \"plugins\": [\n                \"my-plugin/my-plugin.php\"\n            ],\n            \"theme\": \"my-theme\"\n        }\n    }\n}\n```\n\n### Options\n\n| Key | Description | Default |\n|-----|-------------|---------|\n| `wordpress-path` | Path to WordPress | Auto-detected |\n| `sqlite` | Use SQLite | `true` |\n| `plugins` | Plugins to activate | `[]` |\n| `theme` | Theme to activate | Default theme |\n| `multisite` | Enable multisite | `false` |\n\n## Directory Structure\n\nRecommended project structure:\n\n```\nyour-plugin/\n\u251c\u2500\u2500 src/                      # Plugin source code\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 Pest.php              # Pest configuration\n\u2502   \u251c\u2500\u2500 TestCase.php          # Base test case (optional)\n\u2502   \u251c\u2500\u2500 Unit/                 # Unit tests (no WordPress)\n\u2502   \u2502   \u2514\u2500\u2500 ExampleTest.php\n\u2502   \u251c\u2500\u2500 Integration/          # Integration tests (with WordPress)\n\u2502   \u2502   \u2514\u2500\u2500 PostTest.php\n\u2502   \u251c\u2500\u2500 Browser/              # Browser/E2E tests\n\u2502   \u2502   \u2514\u2500\u2500 AdminTest.php\n\u2502   \u251c\u2500\u2500 __fixtures__/         # Test fixtures\n\u2502   \u2502   \u251c\u2500\u2500 data.json\n\u2502   \u2502   \u2514\u2500\u2500 users.yaml\n\u2502   \u2514\u2500\u2500 __snapshots__/        # Snapshot files\n\u2502       \u2514\u2500\u2500 ExampleTest/\n\u251c\u2500\u2500 composer.json\n\u251c\u2500\u2500 phpunit.xml\n\u2514\u2500\u2500 playwright.config.js      # Browser test config (optional)\n```\n\n## Test Organization\n\n### Unit Tests\n\nUnit tests don't load WordPress and are fast:\n\n```php\n<?php\n\n// tests/Unit/HelperTest.php\n\nit('formats currency correctly', function () {\n    expect(format_price(1000))->toBe('$10.00');\n});\n```\n\n### Integration Tests\n\nIntegration tests load WordPress and use database isolation:\n\n```php\n<?php\n\n// tests/Integration/PostTest.php\n\nuse function PestWP\\createPost;\n\nit('creates posts', function () {\n    $post = createPost(['post_title' => 'Hello']);\n    \n    expect($post)->toBePublished();\n});\n```\n\n### Browser Tests\n\nBrowser tests use Playwright for end-to-end testing:\n\n```php\n<?php\n\n// tests/Browser/AdminTest.php\n\nuse function PestWP\\Browser\\visit;\n\nit('loads the admin dashboard', function () {\n    visit('/wp-admin/')\n        ->assertSee('Dashboard');\n});\n```\n\n## Custom Test Case\n\nCreate a base test case for shared setup:\n\n```php\n<?php\n\n// tests/TestCase.php\n\nnamespace Tests;\n\nuse PHPUnit\\Framework\\TestCase as BaseTestCase;\n\nabstract class TestCase extends BaseTestCase\n{\n    protected function setUp(): void\n    {\n        parent::setUp();\n        \n        // Common setup for all tests\n    }\n    \n    protected function tearDown(): void\n    {\n        // Common cleanup\n        \n        parent::tearDown();\n    }\n}\n```\n\nUse it in `Pest.php`:\n\n```php\nuses(Tests\\TestCase::class)->in('Feature');\n```\n\n## Performance Tips\n\n1. **Use SQLite** - Faster than MySQL for tests\n2. **Parallel Testing** - Run tests in parallel with `--parallel`\n3. **Database Isolation** - Use transactions for rollback\n4. **Minimal Fixtures** - Only create necessary test data\n\n```bash\n# Run tests in parallel\n./vendor/bin/pest --parallel\n\n# Run only unit tests (faster)\n./vendor/bin/pest tests/Unit\n```\n\n## Next Steps\n\n- [Factories](factories.md) - Create test data\n- [Database Isolation](database-isolation.md) - Understand isolation\n- [CI/CD](ci-cd.md) - Configure continuous integration\n",
    "factories": "# Factories\n\nPestWP provides factory functions to easily create WordPress objects in your tests.\n\n## Posts\n\n### createPost()\n\nCreate a post and return the `WP_Post` object.\n\n```php\nuse function PestWP\\createPost;\n\n// Create a published post with defaults\n$post = createPost();\n\n// Create with custom attributes\n$post = createPost([\n    'post_title' => 'My Custom Title',\n    'post_content' => 'The content of the post.',\n    'post_status' => 'draft',\n    'post_type' => 'post',\n    'post_author' => 1,\n    'post_date' => '2024-01-15 10:30:00',\n]);\n\n// Create a page\n$page = createPost([\n    'post_type' => 'page',\n    'post_title' => 'About Us',\n]);\n\n// Create a custom post type\n$product = createPost([\n    'post_type' => 'product',\n    'post_title' => 'Cool Widget',\n    'meta_input' => [\n        'price' => '99.99',\n        'sku' => 'WIDGET-001',\n    ],\n]);\n```\n\n### Default Values\n\n| Attribute | Default |\n|-----------|---------|\n| `post_title` | `'Test Post {unique_id}'` |\n| `post_content` | `'Test content'` |\n| `post_status` | `'publish'` |\n| `post_type` | `'post'` |\n\n### With Metadata\n\n```php\n$post = createPost([\n    'post_title' => 'Product',\n    'meta_input' => [\n        'price' => '29.99',\n        'stock' => 100,\n    ],\n]);\n\nexpect($post)->toHaveMeta('price', '29.99');\n```\n\n### With Taxonomy Terms\n\n```php\n$post = createPost([\n    'post_title' => 'News Article',\n    'tax_input' => [\n        'category' => ['news', 'featured'],\n        'post_tag' => ['breaking', 'important'],\n    ],\n]);\n```\n\n## Users\n\n### createUser()\n\nCreate a user and return the `WP_User` object.\n\n```php\nuse function PestWP\\createUser;\n\n// Create a subscriber (default)\n$user = createUser();\n\n// Create with a specific role\n$admin = createUser('administrator');\n$editor = createUser('editor');\n$author = createUser('author');\n$contributor = createUser('contributor');\n$subscriber = createUser('subscriber');\n\n// Create with custom attributes\n$user = createUser('editor', [\n    'user_login' => 'john_doe',\n    'user_email' => 'john@example.com',\n    'first_name' => 'John',\n    'last_name' => 'Doe',\n    'display_name' => 'John Doe',\n]);\n\n// Create with full options array\n$user = createUser([\n    'user_login' => 'jane_doe',\n    'user_email' => 'jane@example.com',\n    'user_pass' => 'secure_password',\n    'role' => 'author',\n]);\n```\n\n### Default Values\n\n| Attribute | Default |\n|-----------|---------|\n| `user_login` | `'testuser_{unique_id}'` |\n| `user_email` | `'test_{unique_id}@example.com'` |\n| `user_pass` | Random password |\n| `role` | `'subscriber'` |\n\n### With User Meta\n\n```php\n$user = createUser('subscriber', [\n    'meta_input' => [\n        'phone_number' => '555-1234',\n        'preferred_language' => 'en',\n    ],\n]);\n```\n\n## Terms\n\n### createTerm()\n\nCreate a term and return the term ID.\n\n```php\nuse function PestWP\\createTerm;\n\n// Create a category\n$categoryId = createTerm('News', 'category');\n\n// Create a tag\n$tagId = createTerm('Featured', 'post_tag');\n\n// Create with additional arguments\n$termId = createTerm('Technology', 'category', [\n    'slug' => 'tech',\n    'description' => 'Technology related posts',\n    'parent' => $parentTermId,\n]);\n\n// Create custom taxonomy term\n$termId = createTerm('Red', 'product_color');\n```\n\n## Attachments\n\n### createAttachment()\n\nCreate an attachment and return the attachment ID.\n\n```php\nuse function PestWP\\createAttachment;\n\n// Create a dummy image attachment\n$attachmentId = createAttachment();\n\n// Create from a specific file\n$attachmentId = createAttachment('/path/to/image.jpg');\n\n// Create and attach to a post\n$post = createPost();\n$attachmentId = createAttachment('', $post->ID);\n\n// Create with custom attributes\n$attachmentId = createAttachment('', 0, [\n    'post_title' => 'Featured Image',\n    'post_mime_type' => 'image/png',\n]);\n\n// Set as featured image\n$post = createPost();\n$attachmentId = createAttachment();\nset_post_thumbnail($post->ID, $attachmentId);\n```\n\n## Comments\n\nWordPress doesn't have a PestWP wrapper, but you can use the core function:\n\n```php\n$post = createPost();\n\n$commentId = wp_insert_comment([\n    'comment_post_ID' => $post->ID,\n    'comment_author' => 'John Doe',\n    'comment_author_email' => 'john@example.com',\n    'comment_content' => 'Great post!',\n    'comment_approved' => 1,\n]);\n```\n\n## Options\n\n### setOption() / deleteOption()\n\nWork with WordPress options:\n\n```php\nuse function PestWP\\setOption;\nuse function PestWP\\deleteOption;\n\n// Set an option\nsetOption('my_plugin_setting', 'value');\nsetOption('my_plugin_array', ['key' => 'value']);\n\n// Verify option\nexpect('my_plugin_setting')->toHaveOption('value');\n\n// Delete an option\ndeleteOption('my_plugin_setting');\n```\n\n## Transients\n\n### setTransient() / deleteTransient()\n\nWork with WordPress transients:\n\n```php\nuse function PestWP\\setTransient;\nuse function PestWP\\deleteTransient;\n\n// Set a transient (expires in 1 hour)\nsetTransient('my_cache_key', ['data' => 'value'], HOUR_IN_SECONDS);\n\n// Verify transient\nexpect('my_cache_key')->toHaveTransient();\n\n// Delete a transient\ndeleteTransient('my_cache_key');\n```\n\n## Shortcodes\n\n### registerTestShortcode()\n\nRegister a shortcode for testing:\n\n```php\nuse function PestWP\\registerTestShortcode;\nuse function PestWP\\unregisterShortcode;\n\n// Register a test shortcode\nregisterTestShortcode('greeting', function ($atts) {\n    $atts = shortcode_atts(['name' => 'World'], $atts);\n    return \"Hello, {$atts['name']}!\";\n});\n\n// Verify registration\nexpect('greeting')->toBeRegisteredShortcode();\n\n// Test output\n$output = do_shortcode('[greeting name=\"John\"]');\nexpect($output)->toBe('Hello, John!');\n\n// Cleanup\nunregisterShortcode('greeting');\n```\n\n## Factory Patterns\n\n### Creating Multiple Objects\n\n```php\n// Create multiple posts\n$posts = collect(range(1, 10))->map(function ($i) {\n    return createPost(['post_title' => \"Post {$i}\"]);\n});\n\n// Create users with different roles\n$users = [\n    'admin' => createUser('administrator'),\n    'editor' => createUser('editor'),\n    'subscriber' => createUser('subscriber'),\n];\n```\n\n### Creating Related Objects\n\n```php\n// Create author with posts\n$author = createUser('author');\n$posts = [];\n\nfor ($i = 1; $i <= 5; $i++) {\n    $posts[] = createPost([\n        'post_title' => \"Article {$i}\",\n        'post_author' => $author->ID,\n    ]);\n}\n```\n\n### Reusable Factory Functions\n\nCreate custom factory functions in your test helpers:\n\n```php\n<?php\n\n// tests/Helpers.php\n\nfunction createProduct(array $attributes = []): WP_Post\n{\n    return createPost(array_merge([\n        'post_type' => 'product',\n        'post_title' => 'Test Product',\n        'meta_input' => [\n            'price' => '9.99',\n            'sku' => 'TEST-' . uniqid(),\n        ],\n    ], $attributes));\n}\n\nfunction createOrder(WP_User $customer, array $products = []): WP_Post\n{\n    $order = createPost([\n        'post_type' => 'shop_order',\n        'post_author' => $customer->ID,\n        'post_status' => 'wc-pending',\n    ]);\n    \n    foreach ($products as $product) {\n        add_post_meta($order->ID, '_product_ids', $product->ID);\n    }\n    \n    return $order;\n}\n```\n\n## Best Practices\n\n1. **Use Factories Over Raw Inserts** - Factories handle defaults and return proper objects\n\n2. **Create Minimal Data** - Only create what you need for the test\n\n3. **Use Descriptive Titles** - Makes debugging easier\n   ```php\n   createPost(['post_title' => 'Published post for visibility test']);\n   ```\n\n4. **Leverage Database Isolation** - Tests clean up automatically\n\n5. **Group Related Creations** - Keep setup code organized\n   ```php\n   beforeEach(function () {\n       $this->admin = createUser('administrator');\n       $this->post = createPost(['post_author' => $this->admin->ID]);\n   });\n   ```\n\n## Next Steps\n\n- [Expectations](expectations.md) - Assert on created objects\n- [Authentication](authentication.md) - Test with created users\n- [Fixtures](fixtures.md) - Reusable test data\n",
    "expectations": "# Expectations\n\nPestWP extends Pest's `expect()` API with WordPress-specific assertions.\n\n## Post Expectations\n\n### Status Assertions\n\n```php\nuse function PestWP\\createPost;\n\n$post = createPost(['post_status' => 'publish']);\n\n// Assert post status\nexpect($post)->toBePublished();\nexpect($post)->toBeDraft();       // Fails\nexpect($post)->toBePending();     // Fails\nexpect($post)->toBePrivate();     // Fails\nexpect($post)->toBeInTrash();     // Fails\n\n// Negation\nexpect($post)->not->toBeDraft();\n```\n\n### All Post Status Expectations\n\n| Expectation | Post Status |\n|-------------|-------------|\n| `toBePublished()` | `publish` |\n| `toBeDraft()` | `draft` |\n| `toBePending()` | `pending` |\n| `toBePrivate()` | `private` |\n| `toBeInTrash()` | `trash` |\n\n### Metadata Assertions\n\n```php\n$post = createPost();\nupdate_post_meta($post->ID, 'price', '29.99');\nupdate_post_meta($post->ID, 'featured', true);\n\n// Assert meta exists with specific value\nexpect($post)->toHaveMeta('price', '29.99');\n\n// Assert meta key exists (any value)\nexpect($post)->toHaveMetaKey('price');\nexpect($post)->toHaveMetaKey('featured');\n\n// Negation\nexpect($post)->not->toHaveMetaKey('nonexistent');\n```\n\n### Term Assertions\n\n```php\nuse function PestWP\\createPost;\nuse function PestWP\\createTerm;\n\n$post = createPost();\n$termId = createTerm('News', 'category');\nwp_set_post_terms($post->ID, [$termId], 'category');\n\n// Assert post has term\nexpect($post)->toHaveTerm('News', 'category');\nexpect($post)->toHaveTerm($termId, 'category');\n\n// Negation\nexpect($post)->not->toHaveTerm('Sports', 'category');\n```\n\n## User Expectations\n\n### Role Assertions\n\n```php\nuse function PestWP\\createUser;\n\n$admin = createUser('administrator');\n\nexpect($admin)->toHaveRole('administrator');\nexpect($admin)->not->toHaveRole('subscriber');\n```\n\n### Capability Assertions\n\n```php\n$editor = createUser('editor');\n\n// Assert user has capability\nexpect($editor)->toHaveCapability('edit_posts');\nexpect($editor)->toHaveCapability('publish_posts');\nexpect($editor)->not->toHaveCapability('manage_options');\n\n// Alias: can()\nexpect($editor)->can('edit_posts');\nexpect($editor)->can('delete_posts');\n```\n\n### User Meta Assertions\n\n```php\n$user = createUser();\nupdate_user_meta($user->ID, 'phone', '555-1234');\n\n// Assert user meta\nexpect($user)->toHaveUserMeta('phone', '555-1234');\nexpect($user)->toHaveMeta('phone', '555-1234'); // Also works\nexpect($user)->toHaveMetaKey('phone');\n```\n\n## Error Expectations\n\n### WP_Error Assertions\n\n```php\n$error = new WP_Error('invalid_email', 'The email address is invalid.');\n\n// Assert is WP_Error\nexpect($error)->toBeWPError();\n\n// Assert error code\nexpect($error)->toHaveErrorCode('invalid_email');\n\n// Negation\nexpect('not an error')->not->toBeWPError();\n```\n\n## Hook Expectations\n\n### Action Assertions\n\n```php\nadd_action('init', 'my_init_function', 15);\n\nexpect('init')->toHaveAction('my_init_function', 15);\nexpect('init')->not->toHaveAction('nonexistent_function');\n\n// Default priority is 10\nadd_action('wp_head', 'my_head_function');\nexpect('wp_head')->toHaveAction('my_head_function', 10);\n```\n\n### Filter Assertions\n\n```php\nadd_filter('the_content', 'my_content_filter', 20);\n\nexpect('the_content')->toHaveFilter('my_content_filter', 20);\nexpect('the_title')->not->toHaveFilter('my_content_filter');\n```\n\n## Post Type & Taxonomy Expectations\n\n### Post Type Assertions\n\n```php\n// Assert post type is registered\nexpect('post')->toBeRegisteredPostType();\nexpect('page')->toBeRegisteredPostType();\nexpect('product')->toBeRegisteredPostType(); // Custom post type\n\n// Assert post type supports features\nexpect('post')->toSupportFeature('title');\nexpect('post')->toSupportFeature('editor');\nexpect('post')->toSupportFeature('thumbnail');\nexpect('post')->not->toSupportFeature('comments'); // If disabled\n```\n\n### Taxonomy Assertions\n\n```php\n// Assert taxonomy is registered\nexpect('category')->toBeRegisteredTaxonomy();\nexpect('post_tag')->toBeRegisteredTaxonomy();\nexpect('product_cat')->toBeRegisteredTaxonomy(); // WooCommerce\n```\n\n## Option & Transient Expectations\n\n### Option Assertions\n\n```php\nupdate_option('my_setting', 'enabled');\n\n// Assert option exists\nexpect('my_setting')->toHaveOption();\n\n// Assert option has specific value\nexpect('my_setting')->toHaveOption('enabled');\n\n// Negation\nexpect('nonexistent_option')->not->toHaveOption();\n```\n\n### Transient Assertions\n\n```php\nset_transient('my_cache', ['data' => 'value'], HOUR_IN_SECONDS);\n\n// Assert transient exists\nexpect('my_cache')->toHaveTransient();\n\n// Assert transient has specific value\nexpect('my_cache')->toHaveTransient(['data' => 'value']);\n```\n\n## Shortcode Expectations\n\n```php\nadd_shortcode('my_shortcode', function () {\n    return 'Hello';\n});\n\nexpect('my_shortcode')->toBeRegisteredShortcode();\nexpect('nonexistent')->not->toBeRegisteredShortcode();\n```\n\n## REST API Expectations\n\n### Response Assertions\n\n```php\nuse function PestWP\\Functions\\rest;\n\n$response = rest()->get('/wp/v2/posts');\n\n// Status assertions\nexpect($response)->toHaveStatus(200);\nexpect($response)->toBeSuccessful();\nexpect($response)->not->toBeError();\n\n// Data assertions\nexpect($response)->toHaveResponseData('id');\nexpect($response)->toHaveResponseData('title', ['rendered' => 'Hello']);\n\n// Header assertions\nexpect($response)->toHaveHeader('Content-Type');\nexpect($response)->toHaveHeader('Content-Type', 'application/json');\n\n// Collection assertions\nexpect($response)->toHaveCount(10);\n```\n\n### Route Assertions\n\n```php\n// Assert REST route exists\nexpect('/wp/v2/posts')->toBeRegisteredRestRoute();\nexpect('/wp/v2/posts')->toBeRegisteredRestRoute('GET');\nexpect('/my-plugin/v1/items')->toBeRegisteredRestRoute('POST');\n```\n\n### Error Response Assertions\n\n```php\n$response = rest()->get('/wp/v2/posts/99999');\n\nexpect($response)->toBeError();\nexpect($response)->toHaveStatus(404);\nexpect($response)->toHaveErrorCode('rest_post_invalid_id');\nexpect($response)->toHaveErrorMessage('Invalid post ID.');\n```\n\n## AJAX Expectations\n\n### Response Assertions\n\n```php\nuse function PestWP\\Functions\\ajax;\n\n$response = ajax('my_action', ['data' => 'value']);\n\nexpect($response)->toBeAjaxSuccess();\nexpect($response)->toHaveStatus(200);\nexpect($response)->toHaveResponseData('message');\n```\n\n### Action Assertions\n\n```php\n// Assert AJAX action is registered\nexpect('my_action')->toBeRegisteredAjaxAction();\nexpect('my_action')->toBeRegisteredAjaxAction(admin: true, nopriv: false);\n```\n\n## Mocking Expectations\n\n### Function Mock Assertions\n\n```php\nuse function PestWP\\Functions\\mockFunction;\n\n$mock = mockFunction('wp_mail')->andReturn(true);\n\nwp_mail('test@example.com', 'Subject', 'Message');\n\nexpect($mock)->toHaveBeenCalled();\nexpect($mock)->toHaveBeenCalledTimes(1);\nexpect($mock)->toHaveBeenCalledWith(['test@example.com', 'Subject', 'Message']);\n```\n\n### HTTP Mock Assertions\n\n```php\nuse function PestWP\\Functions\\mockHTTP;\n\n$mock = mockHTTP()\n    ->whenUrl('https://api.example.com/users')\n    ->andReturn(['users' => []]);\n\nwp_remote_get('https://api.example.com/users');\n\nexpect($mock)->toHaveRequested('https://api.example.com/users');\nexpect($mock)->toHaveRequestCount(1);\n```\n\n## Snapshot Expectations\n\n```php\n// Match against stored snapshot\nexpect($html)->toMatchSnapshot();\nexpect($html)->toMatchSnapshot('custom-name');\n\n// JSON snapshot\nexpect($data)->toMatchJsonSnapshot();\n\n// HTML snapshot (normalized)\nexpect($renderedHtml)->toMatchHtmlSnapshot();\n```\n\n## Time Expectations\n\n```php\nuse function PestWP\\Functions\\freezeTime;\n\nfreezeTime('2024-01-15 10:00:00');\n\n$createdAt = time();\nsleep(0); // Time is frozen\n$later = time();\n\nexpect($createdAt)->toBe($later); // Same timestamp\n\n// Relative assertions\nexpect($createdAt)->toBeBefore(strtotime('2024-01-16'));\nexpect($createdAt)->toBeAfter(strtotime('2024-01-14'));\n```\n\n## Chaining Expectations\n\nAll expectations return `$this`, allowing chaining:\n\n```php\n$post = createPost([\n    'post_status' => 'publish',\n    'meta_input' => ['featured' => true],\n]);\n\nexpect($post)\n    ->toBeInstanceOf(WP_Post::class)\n    ->toBePublished()\n    ->toHaveMetaKey('featured')\n    ->toHaveMeta('featured', true);\n```\n\n## Custom Expectations\n\nAdd your own expectations in `tests/Pest.php`:\n\n```php\nexpect()->extend('toBeValidProduct', function () {\n    expect($this->value)\n        ->toBeInstanceOf(WP_Post::class)\n        ->and($this->value->post_type)->toBe('product')\n        ->and(get_post_meta($this->value->ID, 'price', true))->not->toBeEmpty();\n    \n    return $this;\n});\n\n// Usage\nexpect($product)->toBeValidProduct();\n```\n\n## Next Steps\n\n- [Factories](factories.md) - Create test data\n- [Mocking](mocking.md) - Mock functions and hooks\n- [REST API Testing](rest-api-testing.md) - Test REST endpoints\n",
    "authentication": "# Authentication\n\nPestWP provides helper functions to simulate user authentication in tests.\n\n## Overview\n\nTesting user-dependent functionality requires simulating different user contexts. PestWP makes this easy with intuitive authentication helpers.\n\n## Functions\n\n### loginAs()\n\nLog in as a specific user:\n\n```php\nuse function PestWP\\loginAs;\nuse function PestWP\\createUser;\n\n$user = createUser('editor');\n\n// Login by user object\nloginAs($user);\n\n// Login by user ID\nloginAs($user->ID);\n\n// Returns the WP_User object\n$loggedInUser = loginAs($user);\nexpect($loggedInUser->ID)->toBe($user->ID);\n```\n\n### logout()\n\nLog out the current user:\n\n```php\nuse function PestWP\\logout;\nuse function PestWP\\loginAs;\nuse function PestWP\\createUser;\n\n$user = createUser('administrator');\nloginAs($user);\n\n// Verify logged in\nexpect(is_user_logged_in())->toBeTrue();\n\n// Log out\nlogout();\n\n// Verify logged out\nexpect(is_user_logged_in())->toBeFalse();\n```\n\n### currentUser()\n\nGet the currently authenticated user:\n\n```php\nuse function PestWP\\currentUser;\nuse function PestWP\\loginAs;\nuse function PestWP\\createUser;\n\n$admin = createUser('administrator');\nloginAs($admin);\n\n$current = currentUser();\nexpect($current->ID)->toBe($admin->ID);\nexpect($current->user_login)->toBe($admin->user_login);\n```\n\n### isUserLoggedIn()\n\nCheck if a user is logged in:\n\n```php\nuse function PestWP\\isUserLoggedIn;\nuse function PestWP\\loginAs;\nuse function PestWP\\logout;\nuse function PestWP\\createUser;\n\nexpect(isUserLoggedIn())->toBeFalse();\n\n$user = createUser();\nloginAs($user);\n\nexpect(isUserLoggedIn())->toBeTrue();\n\nlogout();\n\nexpect(isUserLoggedIn())->toBeFalse();\n```\n\n## Testing Capabilities\n\n### Role-Based Access\n\n```php\nuse function PestWP\\createUser;\nuse function PestWP\\loginAs;\n\nit('allows administrators to manage options', function () {\n    $admin = createUser('administrator');\n    loginAs($admin);\n    \n    expect(current_user_can('manage_options'))->toBeTrue();\n});\n\nit('prevents subscribers from managing options', function () {\n    $subscriber = createUser('subscriber');\n    loginAs($subscriber);\n    \n    expect(current_user_can('manage_options'))->toBeFalse();\n});\n```\n\n### Testing User Capabilities\n\n```php\nit('tests editor capabilities', function () {\n    $editor = createUser('editor');\n    \n    expect($editor)->toHaveRole('editor');\n    expect($editor)->toHaveCapability('edit_posts');\n    expect($editor)->toHaveCapability('edit_others_posts');\n    expect($editor)->toHaveCapability('publish_posts');\n    expect($editor)->not->toHaveCapability('manage_options');\n    expect($editor)->not->toHaveCapability('install_plugins');\n});\n\nit('tests author capabilities', function () {\n    $author = createUser('author');\n    \n    expect($author)->can('edit_posts');\n    expect($author)->can('upload_files');\n    expect($author)->not->can('edit_others_posts');\n});\n```\n\n### Post-Specific Capabilities\n\n```php\nuse function PestWP\\createPost;\nuse function PestWP\\createUser;\nuse function PestWP\\loginAs;\n\nit('allows authors to edit their own posts', function () {\n    $author = createUser('author');\n    $post = createPost(['post_author' => $author->ID]);\n    \n    loginAs($author);\n    \n    expect(current_user_can('edit_post', $post->ID))->toBeTrue();\n    expect(current_user_can('delete_post', $post->ID))->toBeTrue();\n});\n\nit('prevents authors from editing others posts', function () {\n    $author = createUser('author');\n    $otherAuthor = createUser('author');\n    $post = createPost(['post_author' => $otherAuthor->ID]);\n    \n    loginAs($author);\n    \n    expect(current_user_can('edit_post', $post->ID))->toBeFalse();\n});\n```\n\n## Common Patterns\n\n### Testing Admin Functions\n\n```php\nit('updates plugin settings as admin', function () {\n    $admin = createUser('administrator');\n    loginAs($admin);\n    \n    // Simulate updating settings\n    update_option('my_plugin_setting', 'new_value');\n    \n    expect('my_plugin_setting')->toHaveOption('new_value');\n});\n\nit('denies settings update for non-admins', function () {\n    $editor = createUser('editor');\n    loginAs($editor);\n    \n    // Check capability before update\n    expect(current_user_can('manage_options'))->toBeFalse();\n});\n```\n\n### Testing User Registration\n\n```php\nit('creates users with correct defaults', function () {\n    $user = createUser('subscriber', [\n        'user_login' => 'newuser',\n        'user_email' => 'new@example.com',\n    ]);\n    \n    expect($user->user_login)->toBe('newuser');\n    expect($user->user_email)->toBe('new@example.com');\n    expect($user)->toHaveRole('subscriber');\n});\n```\n\n### Testing Content Ownership\n\n```php\nit('assigns posts to correct author', function () {\n    $author = createUser('author');\n    $post = createPost([\n        'post_author' => $author->ID,\n        'post_title' => 'My Article',\n    ]);\n    \n    expect((int) $post->post_author)->toBe($author->ID);\n    \n    // Query by author\n    $authorPosts = get_posts([\n        'author' => $author->ID,\n        'post_type' => 'post',\n    ]);\n    \n    expect($authorPosts)->toHaveCount(1);\n    expect($authorPosts[0]->ID)->toBe($post->ID);\n});\n```\n\n## BeforeEach Pattern\n\nSet up authentication for multiple tests:\n\n```php\nbeforeEach(function () {\n    $this->admin = createUser('administrator');\n    $this->editor = createUser('editor');\n    $this->subscriber = createUser('subscriber');\n});\n\nit('admin can do everything', function () {\n    loginAs($this->admin);\n    \n    expect(current_user_can('manage_options'))->toBeTrue();\n    expect(current_user_can('edit_users'))->toBeTrue();\n});\n\nit('editor has limited access', function () {\n    loginAs($this->editor);\n    \n    expect(current_user_can('edit_posts'))->toBeTrue();\n    expect(current_user_can('manage_options'))->toBeFalse();\n});\n\nafterEach(function () {\n    logout();\n});\n```\n\n## Testing with REST API\n\n```php\nuse function PestWP\\Functions\\rest;\nuse function PestWP\\createUser;\n\nit('allows authenticated users to create posts', function () {\n    $author = createUser('author');\n    \n    $response = rest()\n        ->as($author)\n        ->post('/wp/v2/posts', [\n            'title' => 'New Post',\n            'status' => 'draft',\n        ]);\n    \n    expect($response)->toBeSuccessful();\n    expect($response)->toHaveStatus(201);\n});\n\nit('denies anonymous post creation', function () {\n    $response = rest()->post('/wp/v2/posts', [\n        'title' => 'New Post',\n    ]);\n    \n    expect($response)->toBeError();\n    expect($response)->toHaveStatus(401);\n});\n```\n\n## Testing with AJAX\n\n```php\nuse function PestWP\\Functions\\ajax;\nuse function PestWP\\createUser;\n\nit('handles admin AJAX actions', function () {\n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('my_admin_action', ['data' => 'value']);\n    \n    expect($response)->toBeAjaxSuccess();\n});\n```\n\n## Testing with Browser\n\n```php\nuse function PestWP\\createUser;\n\nit('logs into wp-admin', function () {\n    $admin = createUser('administrator', [\n        'user_login' => 'testadmin',\n        'user_pass' => 'password123',\n    ]);\n    \n    visit('/wp-login.php')\n        ->fill('#user_login', 'testadmin')\n        ->fill('#user_pass', 'password123')\n        ->click('#wp-submit')\n        ->assertUrlContains('/wp-admin/')\n        ->assertSee('Dashboard');\n});\n```\n\n## Error Handling\n\n```php\nuse function PestWP\\loginAs;\n\nit('throws exception for non-existent user', function () {\n    loginAs(99999);\n})->throws(RuntimeException::class, 'User with ID 99999 does not exist');\n\nit('throws exception when WordPress not loaded', function () {\n    // This would only happen in unit tests without WordPress\n    loginAs(1);\n})->throws(RuntimeException::class);\n```\n\n## Next Steps\n\n- [Factories](factories.md) - Create users and other test data\n- [Expectations](expectations.md) - Assert on user capabilities\n- [REST API Testing](rest-api-testing.md) - Test authenticated endpoints\n- [Browser Testing](browser-testing.md) - Test login flows\n",
    "database-isolation": "# Database Isolation\n\nPestWP provides automatic database isolation to ensure each test runs in a clean state.\n\n## Overview\n\nDatabase isolation means each test starts with a fresh database state and any changes made during the test are rolled back afterward. This prevents tests from affecting each other and ensures consistent, reproducible results.\n\n## Enabling Database Isolation\n\nAdd the `InteractsWithDatabase` trait to your tests in `Pest.php`:\n\n```php\n<?php\n\n// tests/Pest.php\n\nuse PestWP\\Concerns\\InteractsWithDatabase;\n\n// Apply to all integration tests\nuses(InteractsWithDatabase::class)->in('Integration');\n\n// Or use the helper function\nuses(PestWP\\databaseIsolation())->in('Integration');\n```\n\n## How It Works\n\n### Transaction-Based Isolation\n\nPestWP uses database transactions for isolation:\n\n1. **Before Each Test**: A transaction is started\n2. **During Test**: All database operations occur within the transaction\n3. **After Each Test**: The transaction is rolled back\n\nThis is extremely fast because no actual data needs to be deleted.\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Test Execution                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1. BEGIN TRANSACTION                \u2502\n\u2502 2. Create posts, users, etc.        \u2502\n\u2502 3. Run assertions                   \u2502\n\u2502 4. ROLLBACK                         \u2502\n\u2502 5. Database is clean for next test  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n### Savepoints (Nested Transactions)\n\nFor complex test scenarios, PestWP supports savepoints:\n\n```php\nit('supports savepoints for nested isolation', function () {\n    $post1 = createPost(['post_title' => 'First Post']);\n    \n    // Create a savepoint\n    $this->createSavepoint('before_second_post');\n    \n    $post2 = createPost(['post_title' => 'Second Post']);\n    \n    // Both posts exist\n    expect(get_post($post1->ID))->not->toBeNull();\n    expect(get_post($post2->ID))->not->toBeNull();\n    \n    // Rollback to savepoint\n    $this->rollbackToSavepoint('before_second_post');\n    \n    // First post still exists, second is gone\n    expect(get_post($post1->ID))->not->toBeNull();\n    expect(get_post($post2->ID))->toBeNull();\n});\n```\n\n## SQLite vs MySQL\n\n### SQLite (Default)\n\nSQLite is the default database for testing:\n\n- **Fast**: No network overhead\n- **Isolated**: Each test suite gets its own database file\n- **Simple**: No server configuration needed\n\n```php\n// Automatically uses SQLite\nuses(PestWP\\databaseIsolation())->in('Integration');\n```\n\n### MySQL\n\nFor testing MySQL-specific features:\n\n```xml\n<!-- phpunit.xml -->\n<php>\n    <env name=\"PEST_WP_SQLITE\" value=\"false\"/>\n    <env name=\"WP_TESTS_DB_NAME\" value=\"wordpress_test\"/>\n    <env name=\"WP_TESTS_DB_USER\" value=\"root\"/>\n    <env name=\"WP_TESTS_DB_PASSWORD\" value=\"\"/>\n    <env name=\"WP_TESTS_DB_HOST\" value=\"localhost\"/>\n</php>\n```\n\n## Best Practices\n\n### 1. Use Integration Directory\n\nKeep tests that need database access in the `Integration` directory:\n\n```\ntests/\n\u251c\u2500\u2500 Unit/           # Fast tests, no database\n\u251c\u2500\u2500 Integration/    # Tests with database isolation\n\u2514\u2500\u2500 Browser/        # E2E tests\n```\n\n### 2. Minimal Data Creation\n\nOnly create the data you need:\n\n```php\n// Good: Creates only what's needed\nit('publishes a post', function () {\n    $post = createPost(['post_status' => 'draft']);\n    \n    wp_publish_post($post->ID);\n    \n    expect(get_post($post->ID))->toBePublished();\n});\n\n// Bad: Creates unnecessary data\nit('publishes a post', function () {\n    $user = createUser('author');\n    $category = createTerm('News', 'category');\n    $tag = createTerm('Featured', 'post_tag');\n    $post = createPost([\n        'post_status' => 'draft',\n        'post_author' => $user->ID, // Not needed for this test\n    ]);\n    \n    wp_publish_post($post->ID);\n    \n    expect(get_post($post->ID))->toBePublished();\n});\n```\n\n### 3. Use beforeEach for Shared Setup\n\n```php\nbeforeEach(function () {\n    $this->admin = createUser('administrator');\n    $this->post = createPost();\n});\n\nit('allows admin to edit', function () {\n    loginAs($this->admin);\n    expect(current_user_can('edit_post', $this->post->ID))->toBeTrue();\n});\n\nit('allows admin to delete', function () {\n    loginAs($this->admin);\n    expect(current_user_can('delete_post', $this->post->ID))->toBeTrue();\n});\n```\n\n### 4. Avoid Persistent State\n\nDon't rely on data from previous tests:\n\n```php\n// Bad: Depends on data from another test\nit('creates a post', function () {\n    createPost(['post_title' => 'First']);\n});\n\nit('counts posts', function () {\n    // This will fail because \"First\" was rolled back\n    expect(wp_count_posts()->publish)->toBeGreaterThan(0);\n});\n\n// Good: Each test is self-contained\nit('counts posts', function () {\n    createPost(['post_title' => 'Test Post']);\n    \n    expect(wp_count_posts()->publish)->toBeGreaterThan(0);\n});\n```\n\n## Testing Without Isolation\n\nFor unit tests that don't need WordPress:\n\n```php\n// tests/Unit/HelperTest.php - No database isolation needed\n\nit('formats currency', function () {\n    expect(format_price(1000))->toBe('$10.00');\n});\n\nit('validates email', function () {\n    expect(is_valid_email('test@example.com'))->toBeTrue();\n    expect(is_valid_email('invalid'))->toBeFalse();\n});\n```\n\n## Debugging Database Issues\n\n### View SQL Queries\n\n```php\nit('debugs queries', function () {\n    global $wpdb;\n    \n    // Enable query logging\n    define('SAVEQUERIES', true);\n    \n    $post = createPost();\n    \n    // View all queries\n    dump($wpdb->queries);\n});\n```\n\n### Check Database State\n\n```php\nit('checks database state', function () {\n    global $wpdb;\n    \n    $post = createPost(['post_title' => 'Debug Post']);\n    \n    // Query directly\n    $result = $wpdb->get_var(\n        $wpdb->prepare(\n            \"SELECT post_title FROM {$wpdb->posts} WHERE ID = %d\",\n            $post->ID\n        )\n    );\n    \n    expect($result)->toBe('Debug Post');\n});\n```\n\n## Performance Considerations\n\n### Transaction Speed\n\nTransactions are fast, but some operations force commits:\n\n| Operation | Isolation Preserved |\n|-----------|---------------------|\n| `wp_insert_post()` | Yes |\n| `wp_insert_user()` | Yes |\n| `update_option()` | Yes |\n| DDL (CREATE TABLE) | No* |\n| External API calls | No* |\n\n\\* These operations may not be fully rolled back.\n\n### Parallel Testing\n\nDatabase isolation works with parallel testing:\n\n```bash\n# Each parallel process gets its own database\n./vendor/bin/pest --parallel\n```\n\n## Common Issues\n\n### \"Transaction already in progress\"\n\nThis happens when nested transactions aren't properly handled:\n\n```php\n// Bad: Manual transaction inside isolated test\nit('has nested transaction issue', function () {\n    global $wpdb;\n    $wpdb->query('START TRANSACTION'); // Conflicts!\n    \n    createPost();\n    \n    $wpdb->query('COMMIT');\n});\n\n// Good: Use savepoints instead\nit('uses savepoints', function () {\n    $this->createSavepoint('my_savepoint');\n    \n    createPost();\n    \n    $this->rollbackToSavepoint('my_savepoint');\n});\n```\n\n### Data Persisting Between Tests\n\nEnsure isolation is enabled for the test directory:\n\n```php\n// tests/Pest.php\nuses(PestWP\\databaseIsolation())->in('Integration');\n```\n\n## Next Steps\n\n- [Factories](factories.md) - Create test data\n- [Fixtures](fixtures.md) - Reusable test data\n- [Configuration](configuration.md) - Database configuration\n",
    "browser-testing": "# Browser Testing\n\nPestWP integrates with Pest's browser testing plugin (Playwright) for end-to-end testing.\n\n## Overview\n\nBrowser testing allows you to test your WordPress site in a real browser environment, simulating user interactions like clicking, typing, and navigating.\n\n## Setup\n\n### Install Browser Binaries\n\n```bash\n# Install Playwright browsers\n./vendor/bin/pest-setup-browser\n\n# Or manually\nnpx playwright install chromium\n```\n\n### Configuration\n\nThe browser testing configuration can be customized:\n\n```php\n// tests/Pest.php\nuses()->group('browser')->in('Browser');\n```\n\n## Basic Usage\n\n### Visit Pages\n\n```php\nit('loads the homepage', function () {\n    visit('/')\n        ->assertSee('Welcome');\n});\n\nit('loads the admin dashboard', function () {\n    visit('/wp-admin/')\n        ->assertSee('Dashboard');\n});\n```\n\n### Interact with Elements\n\n```php\nit('submits a contact form', function () {\n    visit('/contact')\n        ->fill('input[name=\"name\"]', 'John Doe')\n        ->fill('input[name=\"email\"]', 'john@example.com')\n        ->fill('textarea[name=\"message\"]', 'Hello!')\n        ->click('button[type=\"submit\"]')\n        ->assertSee('Message sent');\n});\n```\n\n### Assertions\n\n```php\nvisit('/about')\n    ->assertSee('About Us')                    // Text is visible\n    ->assertDontSee('Error')                   // Text is not visible\n    ->assertTitle('About - My Site')           // Page title\n    ->assertUrlContains('/about')              // URL check\n    ->assertElementExists('.hero')             // Element exists\n    ->assertElementVisible('.hero')            // Element is visible\n    ->assertElementHidden('.modal');           // Element is hidden\n```\n\n## WordPress Admin Testing\n\n### Login to Admin\n\n```php\nuse function PestWP\\createUser;\n\nit('logs into wp-admin', function () {\n    $admin = createUser('administrator', [\n        'user_login' => 'testadmin',\n        'user_pass' => 'password123',\n    ]);\n    \n    visit('/wp-login.php')\n        ->fill('#user_login', 'testadmin')\n        ->fill('#user_pass', 'password123')\n        ->click('#wp-submit')\n        ->assertUrlContains('/wp-admin/')\n        ->assertSee('Dashboard');\n});\n```\n\n### Using WP Admin Locators\n\nPestWP provides pre-built CSS selectors for WordPress admin elements:\n\n```php\nuse function PestWP\\Browser\\wpAdminUrl;\nuse function PestWP\\Browser\\wpAdminSelector;\n\nit('navigates wp-admin', function () {\n    // Get admin URLs\n    $dashboardUrl = wpAdminUrl('dashboard');      // /wp-admin/\n    $postsUrl = wpAdminUrl('posts');              // /wp-admin/edit.php\n    $newPostUrl = wpAdminUrl('post-new');         // /wp-admin/post-new.php\n    \n    // Get admin selectors\n    $menuSelector = wpAdminSelector('menu');              // #adminmenu\n    $contentSelector = wpAdminSelector('content');        // #wpbody-content\n    $noticeSelector = wpAdminSelector('notice');          // .notice\n    $submitButton = wpAdminSelector('publish-button');    // #publish\n    \n    visit($postsUrl)\n        ->assertElementExists($contentSelector);\n});\n```\n\n### Available Admin URLs\n\n| Key | URL |\n|-----|-----|\n| `dashboard` | `/wp-admin/` |\n| `posts` | `/wp-admin/edit.php` |\n| `post-new` | `/wp-admin/post-new.php` |\n| `pages` | `/wp-admin/edit.php?post_type=page` |\n| `media` | `/wp-admin/upload.php` |\n| `comments` | `/wp-admin/edit-comments.php` |\n| `themes` | `/wp-admin/themes.php` |\n| `plugins` | `/wp-admin/plugins.php` |\n| `users` | `/wp-admin/users.php` |\n| `settings` | `/wp-admin/options-general.php` |\n\n### Available Admin Selectors\n\n| Key | Selector |\n|-----|----------|\n| `menu` | `#adminmenu` |\n| `content` | `#wpbody-content` |\n| `title-input` | `#title` |\n| `content-editor` | `#content` |\n| `publish-button` | `#publish` |\n| `notice` | `.notice` |\n| `notice-success` | `.notice-success` |\n| `notice-error` | `.notice-error` |\n\n## Gutenberg Block Testing\n\nPestWP provides selectors for Gutenberg block editor elements:\n\n```php\nuse function PestWP\\Browser\\gutenbergSelector;\n\nit('creates a post with blocks', function () {\n    loginToAdmin();\n    \n    visit(wpAdminUrl('post-new'))\n        // Wait for editor\n        ->waitFor(gutenbergSelector('editor'))\n        \n        // Add a paragraph block\n        ->click(gutenbergSelector('inserter-toggle'))\n        ->fill(gutenbergSelector('inserter-search'), 'Paragraph')\n        ->click(gutenbergSelector('block-paragraph'))\n        ->type('Hello, World!')\n        \n        // Publish\n        ->click(gutenbergSelector('publish-button'))\n        ->click(gutenbergSelector('confirm-publish'))\n        ->assertSee('Post published');\n});\n```\n\n### Available Gutenberg Selectors\n\n| Key | Description |\n|-----|-------------|\n| `editor` | Main editor container |\n| `inserter-toggle` | Block inserter button |\n| `inserter-search` | Block search input |\n| `publish-button` | Publish button |\n| `save-draft` | Save draft button |\n| `block-paragraph` | Paragraph block |\n| `block-heading` | Heading block |\n| `block-image` | Image block |\n| `block-list` | List block |\n| ... | 70+ block selectors |\n\n## Viewport Testing\n\nTest responsive designs with viewport presets:\n\n```php\nuse function PestWP\\Browser\\viewport;\n\nit('displays mobile menu on small screens', function () {\n    visit('/')\n        ->resize(viewport('mobile'))\n        ->assertElementVisible('.mobile-menu-toggle')\n        ->assertElementHidden('.desktop-menu');\n});\n\nit('displays desktop menu on large screens', function () {\n    visit('/')\n        ->resize(viewport('desktop'))\n        ->assertElementHidden('.mobile-menu-toggle')\n        ->assertElementVisible('.desktop-menu');\n});\n```\n\n### Available Viewports\n\n| Key | Dimensions |\n|-----|------------|\n| `mobile` | 375 x 667 (iPhone SE) |\n| `mobile-lg` | 414 x 896 (iPhone 11) |\n| `tablet` | 768 x 1024 (iPad) |\n| `tablet-lg` | 1024 x 1366 (iPad Pro) |\n| `laptop` | 1366 x 768 |\n| `desktop` | 1920 x 1080 |\n| `4k` | 3840 x 2160 |\n\n## Screenshots\n\n### Capture Screenshots\n\n```php\nit('captures homepage screenshot', function () {\n    visit('/')\n        ->screenshot('homepage.png');\n});\n\nit('captures element screenshot', function () {\n    visit('/')\n        ->screenshotElement('.hero', 'hero.png');\n});\n```\n\n### Full Page Screenshots\n\n```php\nvisit('/long-page')\n    ->screenshotFullPage('full-page.png');\n```\n\n## Visual Regression Testing\n\nCompare screenshots against baselines:\n\n```php\nuse function PestWP\\Browser\\screenshot;\n\nit('matches visual baseline', function () {\n    visit('/')\n        ->assertMatchesScreenshot('homepage-baseline');\n});\n\nit('element matches baseline', function () {\n    visit('/')\n        ->assertElementMatchesScreenshot('.hero', 'hero-baseline');\n});\n```\n\n### Threshold Configuration\n\n```php\n// Allow small differences (default: 0.1%)\nvisit('/')\n    ->assertMatchesScreenshot('homepage', threshold: 0.5);\n```\n\n## Accessibility Testing\n\nPestWP includes WCAG accessibility checks:\n\n```php\nuse function PestWP\\Browser\\accessibilityCheck;\n\nit('passes accessibility checks', function () {\n    visit('/')\n        ->assertAccessible();\n});\n\nit('checks specific WCAG level', function () {\n    visit('/')\n        ->assertAccessible('AA'); // WCAG 2.1 Level AA\n});\n\nit('checks specific element accessibility', function () {\n    visit('/')\n        ->assertElementAccessible('.main-content');\n});\n```\n\n### Available Checks\n\n| Check | Description |\n|-------|-------------|\n| `images-have-alt` | All images have alt text |\n| `links-have-text` | All links have accessible text |\n| `form-labels` | Form inputs have labels |\n| `color-contrast` | Text has sufficient contrast |\n| `heading-order` | Headings are in correct order |\n| `skip-link` | Skip navigation link exists |\n| `lang-attribute` | HTML has lang attribute |\n\n## WooCommerce Testing\n\nTest WooCommerce storefronts and checkout:\n\n```php\nuse function PestWP\\Browser\\wooSelector;\n\nit('adds product to cart', function () {\n    visit('/shop')\n        ->click(wooSelector('add-to-cart'))\n        ->assertSee('added to your cart');\n});\n\nit('completes checkout', function () {\n    // Add product to cart\n    visit('/shop')\n        ->click(wooSelector('add-to-cart'));\n    \n    // Go to checkout\n    visit('/checkout')\n        ->fill(wooSelector('billing-first-name'), 'John')\n        ->fill(wooSelector('billing-last-name'), 'Doe')\n        ->fill(wooSelector('billing-email'), 'john@example.com')\n        ->fill(wooSelector('billing-phone'), '555-1234')\n        ->fill(wooSelector('billing-address'), '123 Main St')\n        ->fill(wooSelector('billing-city'), 'New York')\n        ->fill(wooSelector('billing-postcode'), '10001')\n        ->select(wooSelector('billing-state'), 'NY')\n        ->click(wooSelector('place-order'))\n        ->assertSee('Order received');\n});\n```\n\n### Available WooCommerce Selectors\n\nSee [WooCommerce Testing](woocommerce.md) for the full list of 90+ selectors.\n\n## Advanced Interactions\n\n### Wait for Elements\n\n```php\nvisit('/async-page')\n    ->waitFor('.loaded-content')\n    ->waitForText('Content loaded')\n    ->waitUntil(fn($page) => $page->locator('.spinner')->isHidden());\n```\n\n### JavaScript Execution\n\n```php\nvisit('/')\n    ->evaluate('window.scrollTo(0, document.body.scrollHeight)')\n    ->evaluate('localStorage.setItem(\"key\", \"value\")');\n```\n\n### File Upload\n\n```php\nvisit('/upload-form')\n    ->attachFile('input[type=\"file\"]', '/path/to/file.pdf')\n    ->click('button[type=\"submit\"]')\n    ->assertSee('Upload successful');\n```\n\n### Keyboard and Mouse\n\n```php\nvisit('/editor')\n    ->click('.editor-area')\n    ->type('Hello World')\n    ->press('Enter')\n    ->type('New line')\n    ->keyboard('Control+A')  // Select all\n    ->keyboard('Control+C'); // Copy\n```\n\n## Configuration Options\n\nSet browser options via environment variables:\n\n```bash\n# Run headless (default: true)\nPEST_BROWSER_HEADLESS=true\n\n# Slow down actions for debugging\nPEST_BROWSER_SLOW_MO=100\n\n# Set default timeout\nPEST_BROWSER_TIMEOUT=30000\n\n# Screenshot directory\nPEST_SCREENSHOT_DIR=tests/__screenshots__\n```\n\n## Running Browser Tests\n\n```bash\n# Run all browser tests\n./vendor/bin/pest tests/Browser\n\n# Run with headed browser (see the browser)\nPEST_BROWSER_HEADLESS=false ./vendor/bin/pest tests/Browser\n\n# Run specific test\n./vendor/bin/pest tests/Browser/AdminTest.php\n```\n\n## Next Steps\n\n- [Visual Regression](visual-regression.md) - Screenshot comparison\n- [Accessibility Testing](accessibility-testing.md) - WCAG compliance\n- [WooCommerce](woocommerce.md) - E-commerce testing\n- [Gutenberg](gutenberg.md) - Block editor testing\n",
    "rest-api-testing": "# REST API Testing\n\nPestWP provides a fluent API for testing WordPress REST API endpoints.\n\n## Overview\n\nThe REST testing helpers let you make requests to REST endpoints and assert on responses without making actual HTTP requests.\n\n## Basic Usage\n\n### The rest() Helper\n\n```php\nuse function PestWP\\Functions\\rest;\n\n// Make a GET request\n$response = rest()->get('/wp/v2/posts');\n\n// Make a POST request\n$response = rest()->post('/wp/v2/posts', [\n    'title' => 'New Post',\n    'status' => 'publish',\n]);\n\n// Make a PUT request\n$response = rest()->put('/wp/v2/posts/1', [\n    'title' => 'Updated Title',\n]);\n\n// Make a PATCH request\n$response = rest()->patch('/wp/v2/posts/1', [\n    'title' => 'Patched Title',\n]);\n\n// Make a DELETE request\n$response = rest()->delete('/wp/v2/posts/1');\n```\n\n### Shorthand Functions\n\n```php\nuse function PestWP\\Functions\\restGet;\nuse function PestWP\\Functions\\restPost;\nuse function PestWP\\Functions\\restPut;\nuse function PestWP\\Functions\\restPatch;\nuse function PestWP\\Functions\\restDelete;\n\n$response = restGet('/wp/v2/posts');\n$response = restPost('/wp/v2/posts', ['title' => 'New']);\n$response = restPut('/wp/v2/posts/1', ['title' => 'Updated']);\n$response = restPatch('/wp/v2/posts/1', ['title' => 'Patched']);\n$response = restDelete('/wp/v2/posts/1');\n```\n\n## Authentication\n\n### As a User\n\n```php\nuse function PestWP\\createUser;\nuse function PestWP\\Functions\\rest;\n\n$admin = createUser('administrator');\n\n// Authenticate as user\n$response = rest()\n    ->as($admin)\n    ->post('/wp/v2/posts', [\n        'title' => 'Admin Post',\n        'status' => 'publish',\n    ]);\n\nexpect($response)->toBeSuccessful();\n```\n\n### With Nonce\n\n```php\n$response = rest()\n    ->withNonce()\n    ->post('/wp/v2/posts', [\n        'title' => 'Nonced Request',\n    ]);\n```\n\n### With Custom Headers\n\n```php\n$response = rest()\n    ->withHeader('X-Custom-Header', 'value')\n    ->withHeader('X-Another-Header', 'another')\n    ->get('/my-plugin/v1/endpoint');\n```\n\n## Response Assertions\n\n### Status Assertions\n\n```php\n// Check specific status\nexpect($response)->toHaveStatus(200);\nexpect($response)->toHaveStatus(201);\nexpect($response)->toHaveStatus(404);\n\n// Check success (2xx)\nexpect($response)->toBeSuccessful();\n\n// Check error (4xx or 5xx)\nexpect($response)->toBeError();\n```\n\n### Data Assertions\n\n```php\n// Check response has key\nexpect($response)->toHaveResponseData('id');\nexpect($response)->toHaveResponseData('title');\n\n// Check specific value\nexpect($response)->toHaveResponseData('status', 'publish');\nexpect($response)->toHaveResponseData('title', ['rendered' => 'My Post']);\n```\n\n### Error Assertions\n\n```php\n$response = rest()->get('/wp/v2/posts/99999');\n\nexpect($response)->toBeError();\nexpect($response)->toHaveStatus(404);\nexpect($response)->toHaveErrorCode('rest_post_invalid_id');\nexpect($response)->toHaveErrorMessage('Invalid post ID.');\n```\n\n### Header Assertions\n\n```php\nexpect($response)->toHaveHeader('Content-Type');\nexpect($response)->toHaveHeader('Content-Type', 'application/json');\nexpect($response)->toHaveHeader('X-WP-Total');\n```\n\n### Collection Assertions\n\n```php\n$response = rest()->get('/wp/v2/posts', ['per_page' => 10]);\n\nexpect($response)->toHaveCount(10);\n```\n\n## Working with Response Data\n\n### Get Data\n\n```php\n$response = rest()->get('/wp/v2/posts/1');\n\n// Get all data\n$data = $response->data();\n\n// Get specific field\n$title = $response->get('title');\n$renderedTitle = $response->get('title.rendered');\n\n// Check if key exists\nif ($response->has('meta')) {\n    $meta = $response->get('meta');\n}\n```\n\n### Get Status\n\n```php\n$status = $response->status();\n\nif ($response->isSuccessful()) {\n    // 2xx status\n}\n\nif ($response->isError()) {\n    // 4xx or 5xx status\n}\n```\n\n### Get Headers\n\n```php\n$contentType = $response->header('Content-Type');\n$total = $response->header('X-WP-Total');\n$allHeaders = $response->headers();\n```\n\n## Testing Custom Endpoints\n\n### Register and Test\n\n```php\n// In your plugin\nadd_action('rest_api_init', function () {\n    register_rest_route('my-plugin/v1', '/items', [\n        'methods' => 'GET',\n        'callback' => function () {\n            return ['items' => ['one', 'two', 'three']];\n        },\n        'permission_callback' => '__return_true',\n    ]);\n});\n\n// In your test\nit('returns items from custom endpoint', function () {\n    $response = rest()->get('/my-plugin/v1/items');\n    \n    expect($response)->toBeSuccessful();\n    expect($response)->toHaveResponseData('items');\n    expect($response->get('items'))->toHaveCount(3);\n});\n```\n\n### Test Route Registration\n\n```php\nuse function PestWP\\Functions\\restRouteExists;\nuse function PestWP\\Functions\\restRoutes;\nuse function PestWP\\Functions\\restRoutesForNamespace;\n\nit('registers custom routes', function () {\n    // Check route exists\n    expect(restRouteExists('/my-plugin/v1/items'))->toBeTrue();\n    expect(restRouteExists('/my-plugin/v1/items', 'GET'))->toBeTrue();\n    \n    // Using expectation\n    expect('/my-plugin/v1/items')->toBeRegisteredRestRoute();\n    expect('/my-plugin/v1/items')->toBeRegisteredRestRoute('GET');\n});\n\nit('lists all routes', function () {\n    $routes = restRoutes();\n    \n    expect($routes)->toHaveKey('/wp/v2/posts');\n});\n\nit('lists routes for namespace', function () {\n    $routes = restRoutesForNamespace('wp/v2');\n    \n    expect($routes)->toHaveKey('/wp/v2/posts');\n    expect($routes)->toHaveKey('/wp/v2/pages');\n});\n```\n\n## Testing CRUD Operations\n\n### Create (POST)\n\n```php\nit('creates a post via REST', function () {\n    $admin = createUser('administrator');\n    \n    $response = rest()\n        ->as($admin)\n        ->post('/wp/v2/posts', [\n            'title' => 'REST Created Post',\n            'content' => 'Post content here',\n            'status' => 'publish',\n        ]);\n    \n    expect($response)->toHaveStatus(201);\n    expect($response)->toHaveResponseData('id');\n    expect($response->get('title.rendered'))->toBe('REST Created Post');\n    \n    // Verify in database\n    $post = get_post($response->get('id'));\n    expect($post)->toBePublished();\n});\n```\n\n### Read (GET)\n\n```php\nit('retrieves posts via REST', function () {\n    $post = createPost(['post_title' => 'Test Post']);\n    \n    $response = rest()->get(\"/wp/v2/posts/{$post->ID}\");\n    \n    expect($response)->toBeSuccessful();\n    expect($response->get('id'))->toBe($post->ID);\n    expect($response->get('title.rendered'))->toBe('Test Post');\n});\n\nit('lists posts with pagination', function () {\n    for ($i = 1; $i <= 15; $i++) {\n        createPost(['post_title' => \"Post {$i}\"]);\n    }\n    \n    $response = rest()->get('/wp/v2/posts', [\n        'per_page' => 5,\n        'page' => 2,\n    ]);\n    \n    expect($response)->toHaveCount(5);\n    expect($response)->toHaveHeader('X-WP-Total', '15');\n    expect($response)->toHaveHeader('X-WP-TotalPages', '3');\n});\n```\n\n### Update (PUT/PATCH)\n\n```php\nit('updates a post via REST', function () {\n    $admin = createUser('administrator');\n    $post = createPost(['post_title' => 'Original Title']);\n    \n    $response = rest()\n        ->as($admin)\n        ->put(\"/wp/v2/posts/{$post->ID}\", [\n            'title' => 'Updated Title',\n        ]);\n    \n    expect($response)->toBeSuccessful();\n    expect($response->get('title.rendered'))->toBe('Updated Title');\n    \n    // Verify in database\n    $post = get_post($post->ID);\n    expect($post->post_title)->toBe('Updated Title');\n});\n```\n\n### Delete (DELETE)\n\n```php\nit('deletes a post via REST', function () {\n    $admin = createUser('administrator');\n    $post = createPost();\n    \n    $response = rest()\n        ->as($admin)\n        ->delete(\"/wp/v2/posts/{$post->ID}\");\n    \n    expect($response)->toBeSuccessful();\n    \n    // Verify trashed\n    $post = get_post($post->ID);\n    expect($post)->toBeInTrash();\n});\n\nit('permanently deletes a post', function () {\n    $admin = createUser('administrator');\n    $post = createPost();\n    \n    $response = rest()\n        ->as($admin)\n        ->delete(\"/wp/v2/posts/{$post->ID}\", ['force' => true]);\n    \n    expect($response)->toBeSuccessful();\n    expect(get_post($post->ID))->toBeNull();\n});\n```\n\n## Testing Permissions\n\n```php\nit('requires authentication to create posts', function () {\n    $response = rest()->post('/wp/v2/posts', [\n        'title' => 'Unauthenticated Post',\n    ]);\n    \n    expect($response)->toBeError();\n    expect($response)->toHaveStatus(401);\n});\n\nit('denies subscribers from creating posts', function () {\n    $subscriber = createUser('subscriber');\n    \n    $response = rest()\n        ->as($subscriber)\n        ->post('/wp/v2/posts', [\n            'title' => 'Subscriber Post',\n        ]);\n    \n    expect($response)->toBeError();\n    expect($response)->toHaveStatus(403);\n});\n\nit('allows authors to create posts', function () {\n    $author = createUser('author');\n    \n    $response = rest()\n        ->as($author)\n        ->post('/wp/v2/posts', [\n            'title' => 'Author Post',\n            'status' => 'draft',\n        ]);\n    \n    expect($response)->toBeSuccessful();\n});\n```\n\n## Testing Query Parameters\n\n```php\nit('filters posts by status', function () {\n    $admin = createUser('administrator');\n    \n    createPost(['post_status' => 'publish']);\n    createPost(['post_status' => 'draft']);\n    createPost(['post_status' => 'draft']);\n    \n    $response = rest()\n        ->as($admin)\n        ->get('/wp/v2/posts', ['status' => 'draft']);\n    \n    expect($response)->toHaveCount(2);\n});\n\nit('searches posts', function () {\n    createPost(['post_title' => 'WordPress Guide']);\n    createPost(['post_title' => 'PHP Tutorial']);\n    createPost(['post_title' => 'WordPress Tips']);\n    \n    $response = rest()->get('/wp/v2/posts', [\n        'search' => 'WordPress',\n    ]);\n    \n    expect($response)->toHaveCount(2);\n});\n\nit('orders posts', function () {\n    createPost(['post_title' => 'A Post', 'post_date' => '2024-01-01']);\n    createPost(['post_title' => 'B Post', 'post_date' => '2024-01-02']);\n    createPost(['post_title' => 'C Post', 'post_date' => '2024-01-03']);\n    \n    $response = rest()->get('/wp/v2/posts', [\n        'orderby' => 'title',\n        'order' => 'asc',\n    ]);\n    \n    $titles = array_map(fn($p) => $p['title']['rendered'], $response->data());\n    expect($titles)->toBe(['A Post', 'B Post', 'C Post']);\n});\n```\n\n## Next Steps\n\n- [AJAX Testing](ajax-testing.md) - Test admin-ajax handlers\n- [Authentication](authentication.md) - User authentication\n- [Mocking](mocking.md) - Mock external APIs\n",
    "ajax-testing": "# AJAX Testing\n\nPestWP provides helpers for testing WordPress admin-ajax.php handlers.\n\n## Overview\n\nWordPress uses admin-ajax.php for AJAX requests. PestWP lets you test these handlers without making actual HTTP requests.\n\n## Basic Usage\n\n### The ajax() Helper\n\n```php\nuse function PestWP\\Functions\\ajax;\n\n// Execute an AJAX action\n$response = ajax('my_action', ['param' => 'value']);\n\n// Using the client\n$response = ajax()\n    ->action('my_action', ['param' => 'value']);\n```\n\n### Response Object\n\n```php\n$response = ajax('my_action');\n\n// Check success/error\n$response->isSuccess();  // true/false\n$response->isError();    // true/false\n\n// Get data\n$response->data();       // Full response data\n$response->get('key');   // Specific key\n$response->has('key');   // Check if key exists\n\n// Get status\n$response->statusCode(); // HTTP status code\n```\n\n## Authentication\n\n### Admin Users (Logged In)\n\n```php\nuse function PestWP\\createUser;\nuse function PestWP\\Functions\\ajax;\n\n$admin = createUser('administrator');\n\n$response = ajax()\n    ->as($admin)\n    ->action('admin_only_action', ['data' => 'value']);\n\n// Shorthand\n$response = ajaxAdmin('admin_only_action', ['data' => 'value']);\n```\n\n### No-Priv (Not Logged In)\n\n```php\n// Test as unauthenticated user\n$response = ajax()\n    ->nopriv()\n    ->action('public_action', ['data' => 'value']);\n\n// Shorthand\n$response = ajaxNopriv('public_action', ['data' => 'value']);\n```\n\n### With Nonce\n\n```php\n$response = ajax()\n    ->withNonce('my_nonce_action')\n    ->action('my_action', ['data' => 'value']);\n```\n\n## Response Assertions\n\n### Success/Error\n\n```php\n// Check AJAX success\nexpect($response)->toBeAjaxSuccess();\n\n// Check AJAX error\nexpect($response)->toBeAjaxError();\n\n// Generic assertions also work\nexpect($response)->toBeSuccessful();\nexpect($response)->toBeError();\n```\n\n### Status Code\n\n```php\nexpect($response)->toHaveStatus(200);\nexpect($response)->toHaveStatus(403);\n```\n\n### Response Data\n\n```php\nexpect($response)->toHaveResponseData('message');\nexpect($response)->toHaveResponseData('message', 'Success!');\n```\n\n### Error Message\n\n```php\nexpect($response)->toHaveErrorMessage('Invalid request');\n```\n\n## Testing AJAX Handlers\n\n### Register and Test\n\n```php\n// In your plugin\nadd_action('wp_ajax_my_action', function () {\n    if (!isset($_POST['name'])) {\n        wp_send_json_error(['message' => 'Name required']);\n    }\n    \n    $name = sanitize_text_field($_POST['name']);\n    wp_send_json_success(['greeting' => \"Hello, {$name}!\"]);\n});\n\n// In your test\nit('handles my_action', function () {\n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('my_action', ['name' => 'World']);\n    \n    expect($response)->toBeAjaxSuccess();\n    expect($response)->toHaveResponseData('greeting', 'Hello, World!');\n});\n\nit('requires name parameter', function () {\n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('my_action', []);\n    \n    expect($response)->toBeAjaxError();\n    expect($response)->toHaveErrorMessage('Name required');\n});\n```\n\n### Test Registration\n\n```php\nuse function PestWP\\Functions\\hasAjaxAction;\nuse function PestWP\\Functions\\registeredAjaxActions;\n\nit('registers AJAX actions', function () {\n    // Check if action is registered\n    expect(hasAjaxAction('my_action'))->toBeTrue();\n    \n    // Check specific contexts\n    expect(hasAjaxAction('my_action', admin: true, nopriv: false))->toBeTrue();\n    \n    // Using expectation\n    expect('my_action')->toBeRegisteredAjaxAction();\n    expect('my_action')->toBeRegisteredAjaxAction(admin: true, nopriv: true);\n});\n\nit('lists all registered actions', function () {\n    $actions = registeredAjaxActions();\n    \n    // Returns ['admin' => [...], 'nopriv' => [...]]\n    expect($actions['admin'])->toContain('my_action');\n});\n```\n\n## Testing Authentication\n\n### Admin-Only Actions\n\n```php\n// Register admin-only action\nadd_action('wp_ajax_admin_only', function () {\n    wp_send_json_success(['secret' => 'data']);\n});\n\nit('allows admin access', function () {\n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('admin_only');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n\nit('denies unauthenticated access', function () {\n    $response = ajax()\n        ->nopriv()\n        ->action('admin_only');\n    \n    // Action not registered for nopriv, returns 0 or error\n    expect($response)->toBeAjaxError();\n});\n```\n\n### Public Actions\n\n```php\n// Register public action (both logged-in and guest)\nadd_action('wp_ajax_public_action', 'handle_public_action');\nadd_action('wp_ajax_nopriv_public_action', 'handle_public_action');\n\nfunction handle_public_action() {\n    wp_send_json_success(['public' => 'data']);\n}\n\nit('allows authenticated access', function () {\n    $user = createUser('subscriber');\n    \n    $response = ajax()\n        ->as($user)\n        ->action('public_action');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n\nit('allows guest access', function () {\n    $response = ajax()\n        ->nopriv()\n        ->action('public_action');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n```\n\n## Testing Nonce Verification\n\n```php\n// Handler that verifies nonce\nadd_action('wp_ajax_secure_action', function () {\n    if (!check_ajax_referer('secure_action_nonce', 'nonce', false)) {\n        wp_send_json_error(['message' => 'Invalid nonce']);\n    }\n    \n    wp_send_json_success(['secure' => 'data']);\n});\n\nit('accepts valid nonce', function () {\n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->withNonce('secure_action_nonce')\n        ->action('secure_action');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n\nit('rejects invalid nonce', function () {\n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('secure_action', ['nonce' => 'invalid']);\n    \n    expect($response)->toBeAjaxError();\n    expect($response)->toHaveErrorMessage('Invalid nonce');\n});\n```\n\n## Testing Capabilities\n\n```php\nadd_action('wp_ajax_editor_action', function () {\n    if (!current_user_can('edit_posts')) {\n        wp_send_json_error(['message' => 'Permission denied']);\n    }\n    \n    wp_send_json_success(['allowed' => true]);\n});\n\nit('allows editors', function () {\n    $editor = createUser('editor');\n    \n    $response = ajax()\n        ->as($editor)\n        ->action('editor_action');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n\nit('denies subscribers', function () {\n    $subscriber = createUser('subscriber');\n    \n    $response = ajax()\n        ->as($subscriber)\n        ->action('editor_action');\n    \n    expect($response)->toBeAjaxError();\n    expect($response)->toHaveErrorMessage('Permission denied');\n});\n```\n\n## Testing File Uploads\n\n```php\nadd_action('wp_ajax_upload_file', function () {\n    if (empty($_FILES['file'])) {\n        wp_send_json_error(['message' => 'No file uploaded']);\n    }\n    \n    $file = $_FILES['file'];\n    wp_send_json_success([\n        'name' => $file['name'],\n        'size' => $file['size'],\n    ]);\n});\n\nit('handles file uploads', function () {\n    $admin = createUser('administrator');\n    \n    // Create a temporary file\n    $tempFile = tempnam(sys_get_temp_dir(), 'test');\n    file_put_contents($tempFile, 'test content');\n    \n    $response = ajax()\n        ->as($admin)\n        ->withFile('file', [\n            'name' => 'test.txt',\n            'type' => 'text/plain',\n            'tmp_name' => $tempFile,\n            'error' => 0,\n            'size' => filesize($tempFile),\n        ])\n        ->action('upload_file');\n    \n    expect($response)->toBeAjaxSuccess();\n    expect($response)->toHaveResponseData('name', 'test.txt');\n    \n    unlink($tempFile);\n});\n```\n\n## Testing Complex Responses\n\n```php\nadd_action('wp_ajax_get_posts', function () {\n    $posts = get_posts(['numberposts' => 5]);\n    \n    $data = array_map(function ($post) {\n        return [\n            'id' => $post->ID,\n            'title' => $post->post_title,\n        ];\n    }, $posts);\n    \n    wp_send_json_success(['posts' => $data, 'total' => count($posts)]);\n});\n\nit('returns posts data', function () {\n    $admin = createUser('administrator');\n    \n    for ($i = 1; $i <= 3; $i++) {\n        createPost(['post_title' => \"Post {$i}\"]);\n    }\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('get_posts');\n    \n    expect($response)->toBeAjaxSuccess();\n    expect($response->get('total'))->toBe(3);\n    expect($response->get('posts'))->toHaveCount(3);\n});\n```\n\n## Common Patterns\n\n### BeforeEach Setup\n\n```php\nbeforeEach(function () {\n    $this->admin = createUser('administrator');\n    \n    // Register actions for testing\n    add_action('wp_ajax_test_action', function () {\n        wp_send_json_success(['message' => 'OK']);\n    });\n});\n\nit('test one', function () {\n    $response = ajax()\n        ->as($this->admin)\n        ->action('test_action');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n\nit('test two', function () {\n    $response = ajax()\n        ->as($this->admin)\n        ->action('test_action');\n    \n    expect($response)->toBeAjaxSuccess();\n});\n```\n\n### Error Handling\n\n```php\nit('handles exceptions gracefully', function () {\n    add_action('wp_ajax_error_action', function () {\n        throw new Exception('Something went wrong');\n    });\n    \n    $admin = createUser('administrator');\n    \n    $response = ajax()\n        ->as($admin)\n        ->action('error_action');\n    \n    expect($response)->toBeAjaxError();\n});\n```\n\n## Next Steps\n\n- [REST API Testing](rest-api-testing.md) - Test REST endpoints\n- [Authentication](authentication.md) - User authentication\n- [Mocking](mocking.md) - Mock external services\n",
    "architecture-testing": "# Architecture Testing\n\nPestWP extends Pest's architecture testing with WordPress-specific presets and helpers.\n\n## Overview\n\nArchitecture testing ensures your codebase follows best practices and coding standards. PestWP provides WordPress-specific rules to catch common security and performance issues.\n\n## The wordpress() Helper\n\n```php\nuse function PestWP\\Functions\\wordpress;\n\n// Test a namespace\nwordpress('App')->noDebugFunctions();\n\n// Test multiple namespaces\nwordpress(['App', 'MyPlugin'])->noSecuritySensitiveFunctions();\n\n// Alias: wpArch()\nwpArch('App')->noDebugFunctions();\n```\n\n## Debug Functions\n\nEnsure no debug functions are left in production code:\n\n```php\narch('no debug functions in production code')\n    ->expect('App')\n    ->not->toUse(['var_dump', 'print_r', 'dump', 'dd', 'error_log']);\n\n// Using the wordpress() helper\ntest('no debug functions', function () {\n    wordpress('App')->noDebugFunctions();\n});\n```\n\n### Detected Debug Functions\n\n- `var_dump`\n- `print_r`\n- `var_export` (when output to screen)\n- `dump`\n- `dd`\n- `error_log`\n- `debug_print_backtrace`\n- `debug_backtrace` (when outputting)\n\n## Security-Sensitive Functions\n\nDetect potentially dangerous functions:\n\n```php\ntest('no security-sensitive functions', function () {\n    wordpress('App')->noSecuritySensitiveFunctions();\n});\n```\n\n### Detected Security Functions\n\n- `eval`\n- `exec`\n- `shell_exec`\n- `system`\n- `passthru`\n- `popen`\n- `proc_open`\n- `pcntl_exec`\n\n## WordPress Coding Standards\n\n### Direct Database Queries\n\nEnsure proper database access:\n\n```php\narch('uses wpdb properly')\n    ->expect('App\\\\Repositories')\n    ->toUseWpdb()\n    ->not->toUseRawSql();\n\ntest('no direct database queries', function () {\n    wordpress('App')->usesWpdbProperly();\n});\n```\n\n### Escaping Output\n\nVerify output is properly escaped:\n\n```php\ntest('escapes output', function () {\n    wordpress('App\\\\Views')\n        ->usesEscaping(['esc_html', 'esc_attr', 'esc_url', 'wp_kses']);\n});\n```\n\n### Nonce Verification\n\nEnsure forms and AJAX handlers verify nonces:\n\n```php\ntest('verifies nonces', function () {\n    wordpress('App\\\\Controllers')\n        ->verifiesNonces();\n});\n```\n\n### Capability Checks\n\nEnsure proper capability checks:\n\n```php\ntest('checks capabilities', function () {\n    wordpress('App\\\\Admin')\n        ->checksCapabilities(['current_user_can', 'user_can']);\n});\n```\n\n## Namespace Rules\n\n### Strict Namespacing\n\n```php\narch('controllers have proper namespace')\n    ->expect('App\\\\Controllers')\n    ->toBeClasses()\n    ->toHaveSuffix('Controller');\n\narch('models use proper namespace')\n    ->expect('App\\\\Models')\n    ->toBeClasses()\n    ->toHaveSuffix('Model');\n```\n\n### No Global Functions\n\n```php\narch('no global functions')\n    ->expect('App')\n    ->toOnlyUseClasses();\n```\n\n### Interface Implementation\n\n```php\narch('repositories implement interface')\n    ->expect('App\\\\Repositories')\n    ->toImplement('App\\\\Contracts\\\\Repository');\n\narch('services are final')\n    ->expect('App\\\\Services')\n    ->toBeFinal();\n```\n\n## Dependency Rules\n\n### Layer Architecture\n\n```php\narch('controllers only use services')\n    ->expect('App\\\\Controllers')\n    ->toOnlyUse('App\\\\Services');\n\narch('services don\\'t use controllers')\n    ->expect('App\\\\Services')\n    ->not->toUse('App\\\\Controllers');\n\narch('models are independent')\n    ->expect('App\\\\Models')\n    ->not->toUse(['App\\\\Controllers', 'App\\\\Services']);\n```\n\n### External Dependencies\n\n```php\narch('limits external dependencies')\n    ->expect('App')\n    ->toOnlyUse([\n        'App',\n        'WordPress',\n        'Psr\\\\Log',\n    ]);\n```\n\n## WordPress-Specific Presets\n\n### Plugin Preset\n\n```php\ntest('follows plugin standards', function () {\n    wordpress('MyPlugin')\n        ->noDebugFunctions()\n        ->noSecuritySensitiveFunctions()\n        ->usesWpdbProperly()\n        ->prefixesFunctions('myplugin_');\n});\n```\n\n### Theme Preset\n\n```php\ntest('follows theme standards', function () {\n    wordpress('MyTheme')\n        ->noDebugFunctions()\n        ->escapesOutput()\n        ->usesTemplateHierarchy();\n});\n```\n\n## Custom Rules\n\n### Define Custom Checks\n\n```php\nuse PestWP\\Arch\\WordPressArchHelper;\n\n// Extend with custom check\nWordPressArchHelper::extend('noHardcodedUrls', function () {\n    return $this->expect->not->toMatch('/https?:\\\\/\\\\/[^\"\\']+/');\n});\n\n// Use it\ntest('no hardcoded URLs', function () {\n    wordpress('App')->noHardcodedUrls();\n});\n```\n\n## Example Test Suite\n\n```php\n<?php\n\n// tests/Arch/ArchitectureTest.php\n\ndescribe('architecture', function () {\n    test('no debug functions in app code', function () {\n        wordpress('App')->noDebugFunctions();\n    });\n\n    test('no security-sensitive functions', function () {\n        wordpress('App')->noSecuritySensitiveFunctions();\n    });\n\n    test('controllers are properly namespaced', function () {\n        arch()\n            ->expect('App\\\\Controllers')\n            ->toBeClasses()\n            ->toHaveSuffix('Controller')\n            ->toExtend('App\\\\Controllers\\\\BaseController');\n    });\n\n    test('models use strict types', function () {\n        arch()\n            ->expect('App\\\\Models')\n            ->toUseStrictTypes();\n    });\n\n    test('services are final', function () {\n        arch()\n            ->expect('App\\\\Services')\n            ->toBeFinal();\n    });\n\n    test('no direct database queries in controllers', function () {\n        arch()\n            ->expect('App\\\\Controllers')\n            ->not->toUse('wpdb');\n    });\n\n    test('repositories handle database access', function () {\n        arch()\n            ->expect('App\\\\Repositories')\n            ->toUse('wpdb');\n    });\n});\n```\n\n## Running Architecture Tests\n\n```bash\n# Run all architecture tests\n./vendor/bin/pest tests/Arch\n\n# Run with verbose output\n./vendor/bin/pest tests/Arch --verbose\n\n# Filter by test name\n./vendor/bin/pest --filter=\"no debug\"\n```\n\n## Best Practices\n\n1. **Run Early**: Include architecture tests in CI/CD pipeline\n\n2. **Be Specific**: Target specific namespaces rather than entire codebase\n\n3. **Incremental Adoption**: Start with critical rules, add more over time\n\n4. **Document Exceptions**: If rules need exceptions, document why\n\n5. **Layer Testing**: Test each architectural layer separately\n\n```php\ndescribe('layers', function () {\n    test('presentation layer')\n        ->expect('App\\\\Http')\n        ->not->toUse(['App\\\\Models', 'wpdb']);\n\n    test('business layer')\n        ->expect('App\\\\Services')\n        ->not->toUse('App\\\\Http');\n\n    test('data layer')\n        ->expect('App\\\\Repositories')\n        ->not->toUse('App\\\\Http');\n});\n```\n\n## Integration with Pest arch()\n\nPestWP works alongside Pest's native `arch()` function:\n\n```php\n// Native Pest arch testing\narch('uses strict types')\n    ->expect('App')\n    ->toUseStrictTypes();\n\n// Combined with WordPress helper\ntest('wordpress and pest arch', function () {\n    wordpress('App')->noDebugFunctions();\n    \n    arch()\n        ->expect('App')\n        ->toUseStrictTypes();\n});\n```\n\n## Next Steps\n\n- [Configuration](configuration.md) - Configure architecture tests\n- [CI/CD](ci-cd.md) - Run architecture tests in pipelines\n- [Pest Architecture Testing](https://pestphp.com/docs/arch-testing) - Pest documentation\n",
    "mocking": "# Mocking\n\nPestWP provides powerful mocking capabilities for functions, hooks, HTTP requests, and time.\n\n## Function Mocking\n\nMock WordPress functions to control their behavior in tests.\n\n### mockFunction()\n\n```php\nuse function PestWP\\Functions\\mockFunction;\n\n// Mock wp_mail to always return true\n$mock = mockFunction('wp_mail')->andReturn(true);\n\n// Call the function\n$result = wp_mail('test@example.com', 'Subject', 'Message');\n\nexpect($result)->toBeTrue();\nexpect($mock)->toHaveBeenCalled();\n```\n\n### Return Values\n\n```php\n// Return a static value\nmockFunction('get_option')->andReturn('my_value');\n\n// Return using a callback\nmockFunction('get_option')->andReturnUsing(function ($option, $default = false) {\n    return match($option) {\n        'siteurl' => 'https://example.com',\n        'blogname' => 'Test Site',\n        default => $default,\n    };\n});\n\n// Return different values on each call\nmockFunction('wp_generate_password')\n    ->andReturn('first_password')\n    ->andReturn('second_password');\n```\n\n### Assertions\n\n```php\n$mock = mockFunction('wp_mail')->andReturn(true);\n\n// Send some emails\nwp_mail('user1@example.com', 'Hello', 'Body');\nwp_mail('user2@example.com', 'Hi', 'Content');\n\n// Assert calls\nexpect($mock)->toHaveBeenCalled();\nexpect($mock)->toHaveBeenCalledTimes(2);\nexpect($mock)->toHaveBeenCalledWith(['user1@example.com', 'Hello', 'Body']);\nexpect($mock)->not->toHaveBeenCalledWith(['unknown@example.com']);\n```\n\n### Cleanup\n\n```php\nuse function PestWP\\Functions\\clearFunctionMocks;\nuse function PestWP\\Functions\\clearMocks;\n\nafterEach(function () {\n    // Clear specific mocks\n    clearFunctionMocks();\n    \n    // Or clear all mocks (functions, hooks, HTTP, time)\n    clearMocks();\n});\n```\n\n## Hook Mocking\n\nMock WordPress actions and filters.\n\n### mockHook()\n\n```php\nuse function PestWP\\Functions\\mockHook;\n\n// Spy on filter execution\n$mock = mockHook('the_content')->spy();\n\n// Apply the filter\n$result = apply_filters('the_content', 'Hello World');\n\nexpect($mock)->toHaveBeenCalled();\nexpect($mock)->toHaveBeenCalledWith(['Hello World']);\n```\n\n### Override Filter Results\n\n```php\n// Override filter return value\nmockHook('the_title')->andReturn('Mocked Title');\n\n$title = apply_filters('the_title', 'Original Title');\nexpect($title)->toBe('Mocked Title');\n\n// Dynamic return\nmockHook('the_content')->andReturnUsing(function ($content) {\n    return strtoupper($content);\n});\n\n$content = apply_filters('the_content', 'hello');\nexpect($content)->toBe('HELLO');\n```\n\n### Capture Callbacks\n\n```php\n// Capture callbacks registered to a hook\n$mock = mockHook('init')->capture($callbacks);\n\n// Trigger the action\ndo_action('init');\n\n// $callbacks contains all registered callbacks\nexpect($mock)->toHaveBeenCalled();\n```\n\n### Clear Hook Mocks\n\n```php\nuse function PestWP\\Functions\\clearHookMocks;\n\nafterEach(function () {\n    clearHookMocks();\n});\n```\n\n## HTTP Mocking\n\nMock external HTTP requests made with `wp_remote_*` functions.\n\n### mockHTTP()\n\n```php\nuse function PestWP\\Functions\\mockHTTP;\n\n// Mock a specific URL\nmockHTTP()\n    ->whenUrl('https://api.example.com/users')\n    ->andReturn(['users' => ['john', 'jane']]);\n\n// Make the request\n$response = wp_remote_get('https://api.example.com/users');\n$body = json_decode(wp_remote_retrieve_body($response), true);\n\nexpect($body['users'])->toBe(['john', 'jane']);\n```\n\n### Pattern Matching\n\n```php\n// Match any URL with wildcard\nmockHTTP()\n    ->whenUrl('https://api.example.com/*')\n    ->andReturn(['status' => 'ok']);\n\n// Match specific pattern\nmockHTTP()\n    ->whenUrl('https://*.example.com/api')\n    ->andReturn(['data' => 'mocked']);\n```\n\n### Response Configuration\n\n```php\n// Return with specific status\nmockHTTP()\n    ->whenUrl('https://api.example.com/error')\n    ->andReturn(['error' => 'Not found'], 404);\n\n// Return with headers\nmockHTTP()\n    ->whenUrl('https://api.example.com/data')\n    ->andReturn(['data' => 'value'])\n    ->withHeaders(['X-Custom-Header' => 'value']);\n```\n\n### Block Unmocked Requests\n\n```php\n// Block all requests not explicitly mocked\nmockHTTP()->blockUnmatched();\n\n// Trying to access unmocked URL throws exception\n$response = wp_remote_get('https://unmocked-url.com');\n// Throws: Unmocked HTTP request to https://unmocked-url.com\n```\n\n### HTTP Assertions\n\n```php\n$http = mockHTTP()\n    ->whenUrl('https://api.example.com/users')\n    ->andReturn(['users' => []]);\n\n// Make requests\nwp_remote_get('https://api.example.com/users');\nwp_remote_get('https://api.example.com/users');\n\n// Assert\nexpect($http)->toHaveRequested('https://api.example.com/users');\nexpect($http)->toHaveRequestCount(2);\n```\n\n### Clear HTTP Mocks\n\n```php\nuse function PestWP\\Functions\\clearHTTPMocks;\n\nafterEach(function () {\n    clearHTTPMocks();\n});\n```\n\n## Time Mocking\n\nFreeze or control time in tests.\n\n### mockTime()\n\n```php\nuse function PestWP\\Functions\\mockTime;\nuse function PestWP\\Functions\\freezeTime;\n\n// Freeze time at specific moment\n$time = mockTime()->freeze('2024-01-15 10:30:00');\n\n// Or use shorthand\nfreezeTime('2024-01-15 10:30:00');\n\n// All time functions return frozen time\nexpect(time())->toBe(strtotime('2024-01-15 10:30:00'));\nexpect(current_time('timestamp'))->toBe(strtotime('2024-01-15 10:30:00'));\n```\n\n### Advance Time\n\n```php\n$time = freezeTime('2024-01-15 10:30:00');\n\n// Get timestamp\n$initial = $time->getTimestamp();\n\n// Advance time\n$time->advance('+1 hour');\nexpect($time->getTimestamp())->toBe($initial + 3600);\n\n// Advance by specific units\n$time->advanceSeconds(30);\n$time->advanceMinutes(5);\n$time->advanceHours(2);\n$time->advanceDays(1);\n$time->advanceWeeks(1);\n$time->advanceMonths(1);\n```\n\n### Get Mocked Time\n\n```php\nuse function PestWP\\Functions\\mockedTime;\nuse function PestWP\\Functions\\mockedDateTime;\nuse function PestWP\\Functions\\isTimeFrozen;\n\nfreezeTime('2024-01-15 10:30:00');\n\n// Check if frozen\nexpect(isTimeFrozen())->toBeTrue();\n\n// Get timestamp\n$timestamp = mockedTime();\n\n// Get DateTime object\n$datetime = mockedDateTime();\nexpect($datetime->format('Y-m-d'))->toBe('2024-01-15');\n```\n\n### Time Assertions\n\n```php\n$createdAt = strtotime('2024-01-14');\n$updatedAt = strtotime('2024-01-15');\n\nexpect($createdAt)->toBeBefore($updatedAt);\nexpect($updatedAt)->toBeAfter($createdAt);\n\n// With DateTimeInterface\n$date1 = new DateTime('2024-01-14');\n$date2 = new DateTime('2024-01-15');\n\nexpect($date1)->toBeBefore($date2);\n```\n\n### Unfreeze Time\n\n```php\nuse function PestWP\\Functions\\unfreezeTime;\n\nfreezeTime('2024-01-15');\n\n// ... run tests ...\n\nunfreezeTime(); // Time returns to normal\n\nexpect(isTimeFrozen())->toBeFalse();\n```\n\n## Complete Example\n\n```php\nuse function PestWP\\Functions\\mockFunction;\nuse function PestWP\\Functions\\mockHTTP;\nuse function PestWP\\Functions\\freezeTime;\nuse function PestWP\\Functions\\clearMocks;\n\ndescribe('notification system', function () {\n    beforeEach(function () {\n        $this->mailMock = mockFunction('wp_mail')->andReturn(true);\n        \n        mockHTTP()\n            ->whenUrl('https://push-service.example.com/*')\n            ->andReturn(['success' => true]);\n        \n        freezeTime('2024-01-15 09:00:00');\n    });\n    \n    afterEach(function () {\n        clearMocks();\n    });\n    \n    it('sends email notification', function () {\n        sendNotification('user@example.com', 'Hello!');\n        \n        expect($this->mailMock)->toHaveBeenCalled();\n        expect($this->mailMock)->toHaveBeenCalledWith([\n            'user@example.com',\n            'Notification',\n            'Hello!',\n        ]);\n    });\n    \n    it('sends push notification', function () {\n        $http = mockHTTP();\n        \n        sendPushNotification('device_token', 'Hello!');\n        \n        expect($http)->toHaveRequested('https://push-service.example.com/send');\n    });\n    \n    it('schedules notification for later', function () {\n        scheduleNotification('user@example.com', '+1 hour');\n        \n        // Advance time\n        mockTime()->advance('+1 hour');\n        \n        // Process scheduled notifications\n        processScheduledNotifications();\n        \n        expect($this->mailMock)->toHaveBeenCalled();\n    });\n});\n```\n\n## Best Practices\n\n1. **Always Clean Up**: Clear mocks in `afterEach()` to prevent leaks\n\n2. **Mock Only What's Needed**: Don't over-mock; test real behavior when possible\n\n3. **Use Specific URLs**: Prefer exact URL matching over wildcards\n\n4. **Verify Call Counts**: Ensure functions are called the expected number of times\n\n5. **Group Related Mocks**: Use `describe()` blocks to organize mock setup\n\n## Next Steps\n\n- [Fixtures](fixtures.md) - Reusable test data\n- [Snapshots](snapshots.md) - Snapshot testing\n- [HTTP Mocking Details](../MOCKING_FIXTURES.md) - Advanced HTTP mocking\n",
    "fixtures": "# Fixtures\n\nPestWP provides a fixture system for managing reusable test data.\n\n## Overview\n\nFixtures allow you to define test data in files and load them consistently across tests. This is useful for complex test scenarios that require specific data setups.\n\n## Basic Usage\n\n### The fixtures() Helper\n\n```php\nuse function PestWP\\Functions\\fixtures;\n\n// Get fixture manager\n$manager = fixtures();\n\n// Load from a path\n$manager = fixtures('/path/to/fixtures');\n```\n\n### Loading Fixtures\n\n```php\n// Load from JSON file\n$data = fixtures()->load('users.json');\n\n// Load from YAML file\n$data = fixtures()->load('posts.yaml');\n\n// Load from PHP file\n$data = fixtures()->load('settings.php');\n```\n\n## Defining Fixtures\n\n### JSON Fixtures\n\n```json\n// tests/__fixtures__/users.json\n{\n    \"users\": [\n        {\n            \"login\": \"admin\",\n            \"email\": \"admin@example.com\",\n            \"role\": \"administrator\"\n        },\n        {\n            \"login\": \"editor\",\n            \"email\": \"editor@example.com\",\n            \"role\": \"editor\"\n        }\n    ]\n}\n```\n\n### YAML Fixtures\n\n```yaml\n# tests/__fixtures__/posts.yaml\nposts:\n  - title: \"Welcome Post\"\n    content: \"Welcome to our site!\"\n    status: publish\n    \n  - title: \"Draft Article\"\n    content: \"Work in progress...\"\n    status: draft\n    meta:\n      featured: true\n      priority: 1\n```\n\n### PHP Fixtures\n\n```php\n<?php\n\n// tests/__fixtures__/complex.php\n\nreturn [\n    'settings' => [\n        'site_name' => 'Test Site',\n        'options' => [\n            'posts_per_page' => 10,\n            'date_format' => 'Y-m-d',\n        ],\n    ],\n    'users' => function () {\n        // Dynamic fixture generation\n        return [\n            'admin' => [\n                'login' => 'admin_' . uniqid(),\n                'email' => 'admin_' . uniqid() . '@example.com',\n            ],\n        ];\n    },\n];\n```\n\n## Inline Fixtures\n\nDefine fixtures directly in tests:\n\n```php\n$fixtures = fixtures()->define([\n    'users' => [\n        'admin' => [\n            'login' => 'testadmin',\n            'role' => 'administrator',\n        ],\n        'subscriber' => [\n            'login' => 'testuser',\n            'role' => 'subscriber',\n        ],\n    ],\n    'posts' => [\n        'welcome' => [\n            'title' => 'Welcome',\n            'status' => 'publish',\n        ],\n    ],\n]);\n```\n\n## Seeding Fixtures\n\nCreate WordPress objects from fixtures:\n\n```php\n$fixtures = fixtures()->load('test-data.yaml');\n\n// Seed all fixtures\n$fixtures->seed();\n\n// Access created objects\n$admin = $fixtures->get('users.admin');      // WP_User\n$post = $fixtures->get('posts.welcome');     // WP_Post\n$category = $fixtures->get('terms.news');    // Term ID\n```\n\n### Custom Seeders\n\n```php\n$fixtures = fixtures()->define([\n    'products' => [\n        'widget' => [\n            'title' => 'Cool Widget',\n            'price' => '29.99',\n        ],\n    ],\n]);\n\n// Register custom seeder\n$fixtures->seeder('products', function ($data, $key) {\n    $post = createPost([\n        'post_type' => 'product',\n        'post_title' => $data['title'],\n        'meta_input' => [\n            'price' => $data['price'],\n        ],\n    ]);\n    \n    return $post;\n});\n\n// Seed with custom seeder\n$fixtures->seed();\n\n$product = $fixtures->get('products.widget');\nexpect($product)->toBeInstanceOf(WP_Post::class);\nexpect($product)->toHaveMeta('price', '29.99');\n```\n\n## Accessing Fixture Data\n\n### Get Specific Values\n\n```php\n$fixtures = fixtures()->load('data.yaml');\n\n// Get by key\n$adminData = $fixtures->get('users.admin');\n\n// Get nested value\n$email = $fixtures->get('users.admin.email');\n\n// Get with default\n$value = $fixtures->get('missing.key', 'default');\n```\n\n### Check Existence\n\n```php\nif ($fixtures->has('users.admin')) {\n    $admin = $fixtures->get('users.admin');\n}\n```\n\n### Get All Data\n\n```php\n$allData = $fixtures->all();\n```\n\n## BeforeEach Pattern\n\nLoad fixtures before each test:\n\n```php\nbeforeEach(function () {\n    $this->fixtures = fixtures()->load('test-data.yaml')->seed();\n    \n    $this->admin = $this->fixtures->get('users.admin');\n    $this->post = $this->fixtures->get('posts.main');\n});\n\nit('admin can edit post', function () {\n    loginAs($this->admin);\n    \n    expect(current_user_can('edit_post', $this->post->ID))->toBeTrue();\n});\n\nit('post has correct status', function () {\n    expect($this->post)->toBePublished();\n});\n```\n\n## Shared Fixtures\n\nUse shared fixtures across test files:\n\n```php\n// tests/Pest.php\n\nuses()->beforeEach(function () {\n    $this->fixtures = fixtures()\n        ->setPath(dirname(__DIR__) . '/tests/__fixtures__')\n        ->load('shared.yaml')\n        ->seed();\n})->in('Integration');\n```\n\n## Fixture Cleanup\n\nFixtures created within database isolation are automatically cleaned up:\n\n```php\nbeforeEach(function () {\n    // These will be rolled back after each test\n    $this->fixtures = fixtures()->define([\n        'users' => [\n            'test' => ['login' => 'test', 'role' => 'subscriber'],\n        ],\n    ])->seed();\n});\n\nit('test one', function () {\n    $user = $this->fixtures->get('users.test');\n    expect($user)->toHaveRole('subscriber');\n});\n\nit('test two', function () {\n    // Fresh user created, previous was rolled back\n    $user = $this->fixtures->get('users.test');\n    expect($user)->toHaveRole('subscriber');\n});\n```\n\n## Complex Scenarios\n\n### Related Objects\n\n```yaml\n# tests/__fixtures__/blog.yaml\nauthors:\n  john:\n    login: john_doe\n    email: john@example.com\n    role: author\n\nposts:\n  johns_post:\n    title: \"John's Article\"\n    status: publish\n    author: \"@authors.john\"  # Reference to author\n    \ncategories:\n  tech:\n    name: Technology\n    \npost_terms:\n  - post: \"@posts.johns_post\"\n    term: \"@categories.tech\"\n    taxonomy: category\n```\n\n### Dynamic Data\n\n```php\n$fixtures = fixtures()->define([\n    'users' => function () {\n        return [\n            'random' => [\n                'login' => 'user_' . uniqid(),\n                'email' => 'user_' . uniqid() . '@example.com',\n                'role' => 'subscriber',\n            ],\n        ];\n    },\n]);\n\n// Each call generates new data\n$fixtures->seed();\n$user1 = $fixtures->get('users.random');\n\n$fixtures->reset()->seed();\n$user2 = $fixtures->get('users.random');\n\n// Different users\nexpect($user1->ID)->not->toBe($user2->ID);\n```\n\n## Best Practices\n\n1. **Keep Fixtures Minimal**: Only include data needed for tests\n\n2. **Use Descriptive Names**: Name fixtures clearly\n   ```yaml\n   posts:\n     published_post_by_admin: { ... }\n     draft_post_pending_review: { ... }\n   ```\n\n3. **Organize by Feature**: Group fixtures by feature/module\n   ```\n   __fixtures__/\n   \u251c\u2500\u2500 auth/\n   \u2502   \u2514\u2500\u2500 users.yaml\n   \u251c\u2500\u2500 blog/\n   \u2502   \u251c\u2500\u2500 posts.yaml\n   \u2502   \u2514\u2500\u2500 categories.yaml\n   \u2514\u2500\u2500 shop/\n       \u251c\u2500\u2500 products.yaml\n       \u2514\u2500\u2500 orders.yaml\n   ```\n\n4. **Avoid Duplication**: Use shared fixtures for common data\n\n5. **Document Dependencies**: Note when fixtures depend on each other\n\n## Comparison with Factories\n\n| Fixtures | Factories |\n|----------|-----------|\n| Pre-defined data | Dynamic creation |\n| File-based | Code-based |\n| Good for complex scenarios | Good for simple objects |\n| Reusable across tests | Created per-test |\n| Explicit relationships | Implicit defaults |\n\n```php\n// Fixtures: Load predefined data\n$fixtures = fixtures()->load('users.yaml')->seed();\n$admin = $fixtures->get('users.admin');\n\n// Factories: Create on demand\n$admin = createUser('administrator');\n```\n\n## Next Steps\n\n- [Factories](factories.md) - Dynamic object creation\n- [Database Isolation](database-isolation.md) - Automatic cleanup\n- [Snapshots](snapshots.md) - Snapshot testing\n",
    "snapshots": "# Snapshot Testing\n\nPestWP supports snapshot testing for comparing outputs against stored baselines.\n\n## Overview\n\nSnapshot testing captures the output of code and compares it against a previously stored \"snapshot\". If the output changes, the test fails, alerting you to potential regressions.\n\n## Basic Usage\n\n### toMatchSnapshot()\n\n```php\nit('matches snapshot', function () {\n    $html = render_component('button', ['label' => 'Click Me']);\n    \n    expect($html)->toMatchSnapshot();\n});\n```\n\nOn first run, a snapshot file is created. On subsequent runs, the output is compared against the stored snapshot.\n\n### Named Snapshots\n\n```php\nit('matches named snapshot', function () {\n    $html = render_component('button', ['label' => 'Submit']);\n    \n    expect($html)->toMatchSnapshot('submit-button');\n});\n```\n\n## Snapshot Types\n\n### Plain Text Snapshots\n\n```php\nit('renders text correctly', function () {\n    $text = generate_excerpt($post);\n    \n    expect($text)->toMatchSnapshot();\n});\n```\n\n### JSON Snapshots\n\n```php\nit('returns correct API response', function () {\n    $data = [\n        'id' => 1,\n        'title' => 'Hello',\n        'meta' => ['views' => 100],\n    ];\n    \n    expect($data)->toMatchJsonSnapshot();\n});\n```\n\nJSON snapshots format the output nicely and ignore key order differences.\n\n### HTML Snapshots\n\n```php\nit('renders HTML correctly', function () {\n    $html = render_template('header.php');\n    \n    expect($html)->toMatchHtmlSnapshot();\n});\n```\n\nHTML snapshots normalize whitespace and formatting for consistent comparisons.\n\n## Snapshot Storage\n\nSnapshots are stored in `tests/__snapshots__/` by default:\n\n```\ntests/\n\u251c\u2500\u2500 __snapshots__/\n\u2502   \u2514\u2500\u2500 ComponentTest/\n\u2502       \u251c\u2500\u2500 it_renders_button__1.snap\n\u2502       \u251c\u2500\u2500 it_renders_header__1.snap\n\u2502       \u2514\u2500\u2500 submit-button.snap\n\u2514\u2500\u2500 Unit/\n    \u2514\u2500\u2500 ComponentTest.php\n```\n\n### Custom Path\n\n```php\nuse function PestWP\\Functions\\snapshots;\n\n// Set custom path\nsnapshots('/custom/path/to/snapshots');\n\nit('uses custom path', function () {\n    expect($output)->toMatchSnapshot();\n});\n```\n\n## Updating Snapshots\n\nWhen output changes intentionally, update the snapshots:\n\n```bash\n# Update all snapshots\n./vendor/bin/pest --update-snapshots\n\n# Update specific test's snapshots\n./vendor/bin/pest tests/Unit/ComponentTest.php --update-snapshots\n```\n\n## Use Cases\n\n### Testing HTML Output\n\n```php\ndescribe('template rendering', function () {\n    it('renders post card', function () {\n        $post = createPost([\n            'post_title' => 'Test Post',\n            'post_content' => 'Content here',\n        ]);\n        \n        $html = render_post_card($post);\n        \n        expect($html)->toMatchHtmlSnapshot();\n    });\n    \n    it('renders navigation menu', function () {\n        $html = render_navigation('primary');\n        \n        expect($html)->toMatchHtmlSnapshot();\n    });\n});\n```\n\n### Testing API Responses\n\n```php\ndescribe('REST API', function () {\n    it('returns post data', function () {\n        $post = createPost(['post_title' => 'API Test']);\n        \n        $response = rest()->get(\"/wp/v2/posts/{$post->ID}\");\n        \n        // Exclude dynamic fields\n        $data = $response->data();\n        unset($data['date'], $data['modified'], $data['id']);\n        \n        expect($data)->toMatchJsonSnapshot();\n    });\n});\n```\n\n### Testing Shortcode Output\n\n```php\nit('renders gallery shortcode', function () {\n    $attachments = [];\n    for ($i = 1; $i <= 3; $i++) {\n        $attachments[] = createAttachment();\n    }\n    \n    $ids = implode(',', $attachments);\n    $output = do_shortcode(\"[gallery ids=\\\"{$ids}\\\"]\");\n    \n    expect($output)->toMatchHtmlSnapshot();\n});\n```\n\n### Testing Email Content\n\n```php\nit('generates welcome email', function () {\n    $user = createUser(['display_name' => 'John Doe']);\n    \n    $content = generate_welcome_email($user);\n    \n    expect($content)->toMatchSnapshot();\n});\n```\n\n## Handling Dynamic Content\n\n### Exclude Dynamic Values\n\n```php\nit('matches snapshot with dynamic content', function () {\n    $data = get_api_response();\n    \n    // Remove dynamic fields before snapshot\n    $data = array_diff_key($data, array_flip([\n        'timestamp',\n        'request_id',\n        'nonce',\n    ]));\n    \n    expect($data)->toMatchJsonSnapshot();\n});\n```\n\n### Replace Dynamic Values\n\n```php\nit('normalizes dynamic content', function () {\n    $html = render_page();\n    \n    // Replace dynamic values with placeholders\n    $html = preg_replace('/nonce=[a-f0-9]+/', 'nonce=XXX', $html);\n    $html = preg_replace('/\\d{4}-\\d{2}-\\d{2}/', 'YYYY-MM-DD', $html);\n    \n    expect($html)->toMatchHtmlSnapshot();\n});\n```\n\n### Freeze Time for Consistent Dates\n\n```php\nuse function PestWP\\Functions\\freezeTime;\n\nit('renders date consistently', function () {\n    freezeTime('2024-01-15 10:00:00');\n    \n    $html = render_post_date();\n    \n    expect($html)->toMatchSnapshot();\n});\n```\n\n## Custom Serializers\n\n### For Objects\n\n```php\nit('serializes custom objects', function () {\n    $order = new Order([\n        'id' => 123,\n        'items' => [new Product('Widget')],\n    ]);\n    \n    // Convert to array for snapshot\n    $data = $order->toArray();\n    \n    expect($data)->toMatchJsonSnapshot();\n});\n```\n\n### For Complex HTML\n\n```php\nit('normalizes complex HTML', function () {\n    $html = get_page_content();\n    \n    // Remove IDs that change\n    $html = preg_replace('/id=\"[^\"]*\"/', '', $html);\n    \n    // Normalize whitespace\n    $html = preg_replace('/\\s+/', ' ', $html);\n    \n    expect(trim($html))->toMatchSnapshot();\n});\n```\n\n## Best Practices\n\n### 1. Review Snapshot Changes\n\nAlways review snapshot changes in code review:\n\n```bash\ngit diff tests/__snapshots__/\n```\n\n### 2. Keep Snapshots Small\n\nTest specific components rather than entire pages:\n\n```php\n// Good: Focused snapshot\nit('renders button', function () {\n    expect(render_button())->toMatchHtmlSnapshot();\n});\n\n// Avoid: Large snapshots\nit('renders entire page', function () {\n    expect(render_page())->toMatchHtmlSnapshot(); // Too large!\n});\n```\n\n### 3. Use Descriptive Names\n\n```php\nexpect($html)->toMatchSnapshot('primary-navigation-mobile');\nexpect($html)->toMatchSnapshot('footer-with-widgets');\n```\n\n### 4. Commit Snapshots\n\nAlways commit snapshot files:\n\n```gitignore\n# .gitignore\n# Do NOT ignore snapshots\n# tests/__snapshots__/  <- Don't add this!\n```\n\n### 5. Update Intentionally\n\nOnly update snapshots when changes are intentional:\n\n```bash\n# Review what will change first\n./vendor/bin/pest --dry-run\n\n# Then update\n./vendor/bin/pest --update-snapshots\n```\n\n## Debugging Failed Snapshots\n\n### View Differences\n\n```php\nit('shows diff on failure', function () {\n    $html = '<div class=\"new-class\">Content</div>';\n    \n    expect($html)->toMatchSnapshot();\n    // Failure shows:\n    // - <div class=\"old-class\">Content</div>\n    // + <div class=\"new-class\">Content</div>\n});\n```\n\n### Regenerate Specific Snapshot\n\n```bash\n# Delete the snapshot file and re-run\nrm tests/__snapshots__/ComponentTest/it_renders_button__1.snap\n./vendor/bin/pest tests/Unit/ComponentTest.php\n```\n\n## CI/CD Considerations\n\n### Fail on Missing Snapshots\n\n```bash\n# In CI, fail if snapshots need to be created\n./vendor/bin/pest --ci\n```\n\n### Consistent Environment\n\nEnsure CI environment matches development for consistent snapshots:\n\n- Same PHP version\n- Same WordPress version\n- Same timezone setting\n\n## Next Steps\n\n- [Visual Regression](visual-regression.md) - Screenshot snapshots\n- [Mocking](mocking.md) - Mock dynamic content\n- [Fixtures](fixtures.md) - Consistent test data\n",
    "visual-regression": "# Visual Regression Testing\n\nPestWP supports visual regression testing by comparing screenshots against baselines.\n\n## Overview\n\nVisual regression testing captures screenshots of your pages and compares them against stored baseline images. If the visual appearance changes, the test fails.\n\n## Setup\n\n### Configure Screenshot Directory\n\n```bash\n# Set environment variable\nexport PEST_SCREENSHOT_DIR=tests/__screenshots__\n```\n\nOr in `phpunit.xml`:\n\n```xml\n<php>\n    <env name=\"PEST_SCREENSHOT_DIR\" value=\"tests/__screenshots__\"/>\n</php>\n```\n\n## Basic Usage\n\n### Capture Screenshots\n\n```php\nit('captures homepage screenshot', function () {\n    visit('/')\n        ->screenshot('homepage.png');\n});\n```\n\n### Compare Against Baseline\n\n```php\nit('homepage matches baseline', function () {\n    visit('/')\n        ->assertMatchesScreenshot('homepage');\n});\n```\n\nOn first run, a baseline is created. On subsequent runs, the current screenshot is compared against the baseline.\n\n## Screenshot Types\n\n### Full Page Screenshots\n\n```php\nit('captures full page', function () {\n    visit('/long-page')\n        ->screenshotFullPage('full-page.png');\n});\n```\n\n### Element Screenshots\n\n```php\nit('captures specific element', function () {\n    visit('/')\n        ->screenshotElement('.hero', 'hero.png');\n});\n```\n\n### Viewport Screenshots\n\n```php\nuse function PestWP\\Browser\\viewport;\n\nit('captures mobile view', function () {\n    visit('/')\n        ->resize(viewport('mobile'))\n        ->screenshot('homepage-mobile.png');\n});\n```\n\n## Visual Comparison\n\n### Default Comparison\n\n```php\nit('matches baseline', function () {\n    visit('/about')\n        ->assertMatchesScreenshot('about-page');\n});\n```\n\n### With Threshold\n\nAllow small differences (anti-aliasing, font rendering):\n\n```php\nit('matches with tolerance', function () {\n    visit('/about')\n        ->assertMatchesScreenshot('about-page', threshold: 0.5); // 0.5% difference allowed\n});\n```\n\n### Element Comparison\n\n```php\nit('header matches baseline', function () {\n    visit('/')\n        ->assertElementMatchesScreenshot('.site-header', 'header');\n});\n```\n\n## Responsive Testing\n\nTest across multiple viewports:\n\n```php\nuse function PestWP\\Browser\\viewport;\n\n$viewports = [\n    'mobile' => viewport('mobile'),\n    'tablet' => viewport('tablet'),\n    'desktop' => viewport('desktop'),\n];\n\nforeach ($viewports as $name => $size) {\n    it(\"homepage matches on {$name}\", function () use ($size, $name) {\n        visit('/')\n            ->resize($size)\n            ->assertMatchesScreenshot(\"homepage-{$name}\");\n    });\n}\n```\n\n## Masking Dynamic Content\n\nHide elements that change between runs:\n\n```php\nit('matches with masked elements', function () {\n    visit('/')\n        ->mask('.timestamp')      // Hide timestamp\n        ->mask('.random-ad')      // Hide ads\n        ->mask('.user-avatar')    // Hide avatars\n        ->assertMatchesScreenshot('homepage');\n});\n```\n\n## File Organization\n\n```\ntests/\n\u251c\u2500\u2500 __screenshots__/\n\u2502   \u251c\u2500\u2500 baselines/           # Stored baseline images\n\u2502   \u2502   \u251c\u2500\u2500 homepage.png\n\u2502   \u2502   \u251c\u2500\u2500 about-page.png\n\u2502   \u2502   \u2514\u2500\u2500 homepage-mobile.png\n\u2502   \u251c\u2500\u2500 current/             # Current test screenshots\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 diffs/               # Difference images (failures)\n\u2502       \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 Browser/\n    \u2514\u2500\u2500 VisualTest.php\n```\n\n## Updating Baselines\n\nWhen visual changes are intentional:\n\n```bash\n# Update all baselines\n./vendor/bin/pest --update-screenshots\n\n# Update specific test\n./vendor/bin/pest tests/Browser/VisualTest.php --update-screenshots\n```\n\n## Viewing Differences\n\nWhen a test fails, a diff image is generated showing:\n- Baseline image\n- Current image  \n- Highlighted differences\n\n```php\nit('shows diff on failure', function () {\n    visit('/changed-page')\n        ->assertMatchesScreenshot('page');\n    \n    // Failure creates:\n    // tests/__screenshots__/diffs/page.png\n});\n```\n\n## Cross-Browser Testing\n\nTest in different browsers:\n\n```php\nit('looks correct in chromium', function () {\n    visit('/', browser: 'chromium')\n        ->assertMatchesScreenshot('homepage-chromium');\n});\n\nit('looks correct in firefox', function () {\n    visit('/', browser: 'firefox')\n        ->assertMatchesScreenshot('homepage-firefox');\n});\n\nit('looks correct in webkit', function () {\n    visit('/', browser: 'webkit')\n        ->assertMatchesScreenshot('homepage-webkit');\n});\n```\n\n## Common Use Cases\n\n### Testing Theme Changes\n\n```php\ndescribe('theme visual tests', function () {\n    it('header matches', function () {\n        visit('/')\n            ->assertElementMatchesScreenshot('.site-header', 'header');\n    });\n    \n    it('footer matches', function () {\n        visit('/')\n            ->assertElementMatchesScreenshot('.site-footer', 'footer');\n    });\n    \n    it('sidebar matches', function () {\n        visit('/blog')\n            ->assertElementMatchesScreenshot('.sidebar', 'sidebar');\n    });\n});\n```\n\n### Testing Plugin Output\n\n```php\nit('contact form renders correctly', function () {\n    visit('/contact')\n        ->assertElementMatchesScreenshot('.contact-form', 'contact-form');\n});\n\nit('gallery shortcode renders correctly', function () {\n    $post = createPost([\n        'post_content' => '[gallery ids=\"1,2,3\"]',\n    ]);\n    \n    visit(\"/?p={$post->ID}\")\n        ->assertElementMatchesScreenshot('.gallery', 'gallery');\n});\n```\n\n### Testing Admin Pages\n\n```php\nit('plugin settings page renders correctly', function () {\n    loginAsAdmin();\n    \n    visit('/wp-admin/options-general.php?page=my-plugin')\n        ->assertMatchesScreenshot('settings-page');\n});\n```\n\n## Best Practices\n\n### 1. Consistent Environment\n\nEnsure consistent rendering:\n- Same browser version\n- Same fonts installed\n- Same screen DPI\n- Disable animations\n\n```php\nbeforeEach(function () {\n    // Disable animations for consistent screenshots\n    visit('/')->evaluate(<<<JS\n        document.querySelectorAll('*').forEach(el => {\n            el.style.animation = 'none';\n            el.style.transition = 'none';\n        });\n    JS);\n});\n```\n\n### 2. Stable Selectors\n\nUse stable selectors for element screenshots:\n\n```php\n// Good: Semantic class\n->assertElementMatchesScreenshot('.product-card', 'product');\n\n// Avoid: Dynamic or positional\n->assertElementMatchesScreenshot('.col:nth-child(3)', 'product');\n```\n\n### 3. Appropriate Thresholds\n\nSet thresholds based on element type:\n\n```php\n// Text-heavy: lower threshold\n->assertMatchesScreenshot('article', threshold: 0.1);\n\n// Images: slightly higher\n->assertMatchesScreenshot('gallery', threshold: 0.5);\n```\n\n### 4. Organize by Feature\n\n```\n__screenshots__/\n\u251c\u2500\u2500 baselines/\n\u2502   \u251c\u2500\u2500 homepage/\n\u2502   \u2502   \u251c\u2500\u2500 desktop.png\n\u2502   \u2502   \u251c\u2500\u2500 tablet.png\n\u2502   \u2502   \u2514\u2500\u2500 mobile.png\n\u2502   \u251c\u2500\u2500 blog/\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 shop/\n\u2502       \u2514\u2500\u2500 ...\n```\n\n### 5. CI Considerations\n\n```yaml\n# .github/workflows/visual.yml\n- name: Run Visual Tests\n  run: ./vendor/bin/pest tests/Browser/Visual\n\n- name: Upload Diffs on Failure\n  if: failure()\n  uses: actions/upload-artifact@v3\n  with:\n    name: visual-diffs\n    path: tests/__screenshots__/diffs/\n```\n\n## Troubleshooting\n\n### Inconsistent Screenshots\n\n**Problem**: Screenshots differ slightly between runs.\n\n**Solutions**:\n- Disable animations\n- Use consistent fonts\n- Mask dynamic content\n- Increase threshold slightly\n\n### Large Image Files\n\n**Problem**: Baseline images are too large.\n\n**Solutions**:\n- Capture smaller viewports\n- Screenshot specific elements\n- Use PNG compression\n- Limit full-page screenshots\n\n### Slow Tests\n\n**Problem**: Visual tests are slow.\n\n**Solutions**:\n- Run visual tests separately\n- Use parallel execution\n- Reduce number of viewports\n- Cache browser instance\n\n## Next Steps\n\n- [Browser Testing](browser-testing.md) - Browser testing basics\n- [Accessibility Testing](accessibility-testing.md) - WCAG compliance\n- [Snapshots](snapshots.md) - Snapshot testing\n",
    "accessibility-testing": "# Accessibility Testing\n\nPestWP provides built-in accessibility testing to ensure your WordPress site meets WCAG standards.\n\n## Overview\n\nAccessibility testing helps ensure your website is usable by everyone, including people with disabilities. PestWP integrates accessibility checks into browser tests.\n\n## Basic Usage\n\n### Assert Page Accessibility\n\n```php\nit('homepage is accessible', function () {\n    visit('/')\n        ->assertAccessible();\n});\n```\n\n### Specify WCAG Level\n\n```php\nit('meets WCAG AA standards', function () {\n    visit('/')\n        ->assertAccessible('AA');\n});\n\nit('meets WCAG AAA standards', function () {\n    visit('/')\n        ->assertAccessible('AAA');\n});\n```\n\n## Element Accessibility\n\n### Check Specific Elements\n\n```php\nit('navigation is accessible', function () {\n    visit('/')\n        ->assertElementAccessible('nav.main-navigation');\n});\n\nit('form is accessible', function () {\n    visit('/contact')\n        ->assertElementAccessible('.contact-form');\n});\n```\n\n## Built-in Accessibility Checks\n\nPestWP includes 25+ accessibility checks:\n\n### Images\n\n```php\nuse function PestWP\\Browser\\accessibilityCheck;\n\nit('images have alt text', function () {\n    visit('/')\n        ->assertPasses(accessibilityCheck('images-have-alt'));\n});\n```\n\n| Check | Description |\n|-------|-------------|\n| `images-have-alt` | All `<img>` elements have alt text |\n| `decorative-images` | Decorative images have empty alt |\n| `svg-accessible` | SVGs have accessible names |\n\n### Links\n\n```php\nit('links have accessible text', function () {\n    visit('/')\n        ->assertPasses(accessibilityCheck('links-have-text'));\n});\n```\n\n| Check | Description |\n|-------|-------------|\n| `links-have-text` | Links have discernible text |\n| `links-distinguishable` | Links are distinguishable from text |\n| `skip-link` | Skip navigation link exists |\n\n### Forms\n\n```php\nit('form inputs have labels', function () {\n    visit('/contact')\n        ->assertPasses(accessibilityCheck('form-labels'));\n});\n```\n\n| Check | Description |\n|-------|-------------|\n| `form-labels` | Form controls have labels |\n| `required-fields` | Required fields are marked |\n| `error-messages` | Error messages are associated |\n| `autocomplete` | Autocomplete attributes are correct |\n\n### Color & Contrast\n\n```php\nit('has sufficient color contrast', function () {\n    visit('/')\n        ->assertPasses(accessibilityCheck('color-contrast'));\n});\n```\n\n| Check | Description |\n|-------|-------------|\n| `color-contrast` | Text has 4.5:1 contrast ratio (AA) |\n| `color-contrast-enhanced` | Text has 7:1 contrast ratio (AAA) |\n| `color-not-sole-method` | Color isn't the only way to convey information |\n\n### Document Structure\n\n```php\nit('has proper heading order', function () {\n    visit('/')\n        ->assertPasses(accessibilityCheck('heading-order'));\n});\n```\n\n| Check | Description |\n|-------|-------------|\n| `heading-order` | Headings are in sequential order |\n| `landmarks` | Page has proper landmarks |\n| `lang-attribute` | HTML has lang attribute |\n| `page-title` | Page has descriptive title |\n| `one-h1` | Page has exactly one h1 |\n\n### Keyboard Navigation\n\n```php\nit('is keyboard navigable', function () {\n    visit('/')\n        ->assertPasses(accessibilityCheck('keyboard-accessible'));\n});\n```\n\n| Check | Description |\n|-------|-------------|\n| `keyboard-accessible` | All interactive elements are keyboard accessible |\n| `focus-visible` | Focus indicators are visible |\n| `tab-order` | Tab order is logical |\n| `no-keyboard-trap` | No keyboard traps |\n\n## Running Multiple Checks\n\n```php\nit('passes core accessibility checks', function () {\n    visit('/')\n        ->assertPasses([\n            accessibilityCheck('images-have-alt'),\n            accessibilityCheck('links-have-text'),\n            accessibilityCheck('form-labels'),\n            accessibilityCheck('color-contrast'),\n            accessibilityCheck('heading-order'),\n            accessibilityCheck('lang-attribute'),\n        ]);\n});\n```\n\n## Excluding Elements\n\nExclude specific elements from checks:\n\n```php\nit('is accessible (excluding ads)', function () {\n    visit('/')\n        ->assertAccessible('AA', exclude: [\n            '.advertisement',\n            '.third-party-widget',\n        ]);\n});\n```\n\n## Custom Accessibility Rules\n\n### Define Custom Checks\n\n```php\nit('passes custom accessibility check', function () {\n    visit('/')\n        ->assertPasses(function ($page) {\n            // Check all buttons have accessible names\n            $buttons = $page->locator('button');\n            \n            for ($i = 0; $i < $buttons->count(); $i++) {\n                $button = $buttons->nth($i);\n                $name = $button->getAttribute('aria-label') \n                     ?? $button->textContent();\n                \n                if (empty(trim($name))) {\n                    return false;\n                }\n            }\n            \n            return true;\n        });\n});\n```\n\n## Accessibility Report\n\nGenerate an accessibility report:\n\n```php\nit('generates accessibility report', function () {\n    $report = visit('/')\n        ->getAccessibilityReport();\n    \n    // Check violations\n    expect($report->violations)->toBeEmpty();\n    \n    // Check passes\n    expect($report->passes)->toContain('images-have-alt');\n    \n    // Check warnings (manual review needed)\n    dump($report->warnings);\n});\n```\n\n## Testing Common WordPress Elements\n\n### Navigation Menus\n\n```php\nit('navigation is accessible', function () {\n    visit('/')\n        ->assertElementAccessible('nav.main-navigation')\n        ->assertPasses([\n            accessibilityCheck('landmarks'),\n            accessibilityCheck('keyboard-accessible'),\n        ]);\n});\n```\n\n### WordPress Admin\n\n```php\nit('admin dashboard is accessible', function () {\n    loginAsAdmin();\n    \n    visit('/wp-admin/')\n        ->assertAccessible('AA');\n});\n```\n\n### Plugin Settings Pages\n\n```php\nit('plugin settings are accessible', function () {\n    loginAsAdmin();\n    \n    visit('/wp-admin/options-general.php?page=my-plugin')\n        ->assertAccessible()\n        ->assertPasses(accessibilityCheck('form-labels'));\n});\n```\n\n### WooCommerce Pages\n\n```php\ndescribe('WooCommerce accessibility', function () {\n    it('shop page is accessible', function () {\n        visit('/shop')\n            ->assertAccessible('AA');\n    });\n    \n    it('cart is accessible', function () {\n        addProductToCart();\n        \n        visit('/cart')\n            ->assertAccessible()\n            ->assertPasses(accessibilityCheck('form-labels'));\n    });\n    \n    it('checkout is accessible', function () {\n        addProductToCart();\n        \n        visit('/checkout')\n            ->assertAccessible('AA')\n            ->assertPasses([\n                accessibilityCheck('form-labels'),\n                accessibilityCheck('required-fields'),\n            ]);\n    });\n});\n```\n\n## Responsive Accessibility\n\nTest accessibility at different viewport sizes:\n\n```php\nuse function PestWP\\Browser\\viewport;\n\n$viewports = ['mobile', 'tablet', 'desktop'];\n\nforeach ($viewports as $size) {\n    it(\"is accessible on {$size}\", function () use ($size) {\n        visit('/')\n            ->resize(viewport($size))\n            ->assertAccessible('AA');\n    });\n}\n```\n\n## CI/CD Integration\n\n### GitHub Actions\n\n```yaml\nname: Accessibility Tests\n\non: [push, pull_request]\n\njobs:\n  accessibility:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      \n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n          \n      - name: Install dependencies\n        run: composer install\n        \n      - name: Install browsers\n        run: ./vendor/bin/pest-setup-browser\n        \n      - name: Run accessibility tests\n        run: ./vendor/bin/pest tests/Browser/Accessibility\n```\n\n## Best Practices\n\n### 1. Test Early and Often\n\nRun accessibility tests on every commit:\n\n```bash\n./vendor/bin/pest tests/Browser/Accessibility\n```\n\n### 2. Start with WCAG AA\n\nBegin with AA compliance, then work toward AAA:\n\n```php\n// Start here\n->assertAccessible('AA');\n\n// Progress to\n->assertAccessible('AAA');\n```\n\n### 3. Test User Journeys\n\nTest complete user flows, not just individual pages:\n\n```php\nit('checkout flow is accessible', function () {\n    visit('/shop')\n        ->assertAccessible()\n        ->click('.add-to-cart')\n        \n    visit('/cart')\n        ->assertAccessible()\n        ->click('.checkout-button')\n        \n    visit('/checkout')\n        ->assertAccessible()\n        ->fill('#billing_first_name', 'John')\n        // ... complete checkout\n        ->assertAccessible();\n});\n```\n\n### 4. Manual Review\n\nAutomated tests catch about 30-40% of issues. Supplement with manual testing:\n\n```php\nit('lists warnings for manual review', function () {\n    $report = visit('/')->getAccessibilityReport();\n    \n    // Log warnings for human review\n    foreach ($report->warnings as $warning) {\n        echo \"Review: {$warning->description}\\n\";\n    }\n});\n```\n\n### 5. Document Exceptions\n\nIf you must accept violations temporarily:\n\n```php\nit('is accessible (known issue #123)', function () {\n    visit('/')\n        ->assertAccessible('AA', exclude: [\n            '.legacy-component', // TODO: Fix in #123\n        ]);\n})->todo('Fix legacy component accessibility - see issue #123');\n```\n\n## Resources\n\n- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)\n- [WebAIM Checklist](https://webaim.org/standards/wcag/checklist)\n- [WordPress Accessibility Handbook](https://make.wordpress.org/accessibility/handbook/)\n\n## Next Steps\n\n- [Browser Testing](browser-testing.md) - Browser testing basics\n- [Visual Regression](visual-regression.md) - Screenshot testing\n- [WooCommerce](woocommerce.md) - E-commerce testing\n",
    "woocommerce": "# WooCommerce Testing\n\nPestWP provides comprehensive browser testing support for WooCommerce stores with **90+ CSS selectors** covering admin, storefront, and checkout flows. These selectors are designed to work with WooCommerce 8.0+ and WordPress 6.5+.\n\n## Overview\n\nWooCommerce testing involves:\n- **Admin testing**: Product management, orders, coupons, settings\n- **Storefront testing**: Shop pages, product pages, cart, checkout\n- **Account testing**: Customer registration, login, order history\n\n## Quick Start\n\n```php\nuse function PestWP\\Functions\\wooShopAddToCartSelector;\nuse function PestWP\\Functions\\wooProceedToCheckoutSelector;\nuse function PestWP\\Functions\\wooPlaceOrderSelector;\n\nit('completes a purchase', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/shop')\n            ->click(wooShopAddToCartSelector())\n            ->visit('/cart')\n            ->click(wooProceedToCheckoutSelector())\n            ->type('#billing_first_name', 'John')\n            ->type('#billing_last_name', 'Doe')\n            ->type('#billing_email', 'john@example.com')\n            ->click(wooPlaceOrderSelector())\n            ->waitForText('Order received');\n    });\n});\n```\n\n---\n\n## Admin Selectors\n\n### Products\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooProductsUrl()` | Products list page URL | `edit.php?post_type=product` |\n| `wooNewProductUrl()` | New product page URL | `post-new.php?post_type=product` |\n| `wooEditProductUrl($id)` | Edit product URL | `post.php?post={$id}&action=edit` |\n| `wooProductTitleSelector()` | Product title field | `#title, #post-title-0, .editor-post-title__input` |\n| `wooProductPriceSelector()` | Regular price field | `#_regular_price` |\n| `wooProductSalePriceSelector()` | Sale price field | `#_sale_price` |\n| `wooProductSkuSelector()` | SKU field | `#_sku` |\n| `wooProductStockSelector()` | Stock quantity field | `#_stock` |\n| `wooProductStockStatusSelector()` | Stock status dropdown | `#_stock_status` |\n| `wooProductWeightSelector()` | Weight field | `#_weight` |\n| `wooProductDimensionSelector($dim)` | Dimension fields | `#_{$dimension}` |\n| `wooProductTabSelector($tab)` | Product data tabs | `.{$tab}_options a` |\n| `wooProductTypeSelector()` | Product type dropdown | `#product-type` |\n| `wooVirtualProductSelector()` | Virtual checkbox | `#_virtual` |\n| `wooDownloadableProductSelector()` | Downloadable checkbox | `#_downloadable` |\n| `wooProductCategoriesSelector()` | Categories metabox | `#product_cat-all` |\n| `wooProductTagsSelector()` | Tags metabox | `#tagsdiv-product_tag` |\n| `wooProductGallerySelector()` | Gallery container | `#product_images_container` |\n| `wooAddGalleryImageSelector()` | Add gallery image button | `.add_product_images` |\n| `wooProductImageSelector()` | Featured image | `#set-post-thumbnail` |\n\n#### Example: Create a Product\n\n```php\nuse function PestWP\\Functions\\wooNewProductUrl;\nuse function PestWP\\Functions\\wooProductTitleSelector;\nuse function PestWP\\Functions\\wooProductPriceSelector;\nuse function PestWP\\Functions\\wooProductTabSelector;\nuse function PestWP\\Functions\\wooProductStockSelector;\n\nit('creates a simple product', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit(wooNewProductUrl())\n            ->type(wooProductTitleSelector(), 'Test Product')\n            ->type(wooProductPriceSelector(), '29.99')\n            ->click(wooProductTabSelector('inventory'))\n            ->type(wooProductStockSelector(), '100')\n            ->click('#publish')\n            ->waitForText('Product published');\n    });\n});\n```\n\n### Orders\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooOrdersUrl()` | Orders list (HPOS) | `admin.php?page=wc-orders` |\n| `wooOrdersLegacyUrl()` | Orders list (legacy) | `edit.php?post_type=shop_order` |\n| `wooNewOrderUrl()` | New order page | `admin.php?page=wc-orders&action=new` |\n| `wooEditOrderUrl($id)` | Edit order URL | `admin.php?page=wc-orders&action=edit&id={$id}` |\n| `wooOrderStatusSelector()` | Order status dropdown | `#order_status` |\n| `wooOrderCustomerSelector()` | Customer selector | `#customer_user, .wc-customer-search` |\n| `wooOrderItemsSelector()` | Order items metabox | `#woocommerce-order-items` |\n| `wooAddOrderItemSelector()` | Add line item button | `.add-line-item` |\n| `wooAddOrderProductSelector()` | Add product button | `.add-order-item` |\n| `wooOrderNotesSelector()` | Order notes metabox | `#woocommerce-order-notes` |\n| `wooAddOrderNoteSelector()` | Add note button | `.add_note` |\n| `wooOrderNoteInputSelector()` | Note textarea | `#add_order_note` |\n| `wooOrderBillingFieldSelector($field)` | Billing fields | `#_billing_{$field}` |\n| `wooOrderShippingFieldSelector($field)` | Shipping fields | `#_shipping_{$field}` |\n| `wooOrderActionsSelector()` | Order actions metabox | `#woocommerce-order-actions` |\n| `wooOrderActionDropdownSelector()` | Action dropdown | `#wc_order_action` |\n\n#### Example: Process an Order\n\n```php\nuse function PestWP\\Functions\\wooEditOrderUrl;\nuse function PestWP\\Functions\\wooOrderStatusSelector;\nuse function PestWP\\Functions\\wooAddOrderNoteSelector;\nuse function PestWP\\Functions\\wooOrderNoteInputSelector;\n\nit('processes an order to completed', function () {\n    $order = wc_create_order();\n    \n    $this->browse(function ($browser) use ($order) {\n        $browser->loginAs(1)\n            ->visit(wooEditOrderUrl($order->get_id()))\n            ->select(wooOrderStatusSelector(), 'wc-completed')\n            ->type(wooOrderNoteInputSelector(), 'Order shipped via FedEx')\n            ->click(wooAddOrderNoteSelector())\n            ->click('button.save_order')\n            ->waitForText('Order updated');\n    });\n});\n```\n\n### Coupons\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooCouponsUrl()` | Coupons list URL | `edit.php?post_type=shop_coupon` |\n| `wooNewCouponUrl()` | New coupon URL | `post-new.php?post_type=shop_coupon` |\n| `wooCouponCodeSelector()` | Coupon code field | `#title` |\n| `wooCouponTypeSelector()` | Discount type dropdown | `#discount_type` |\n| `wooCouponAmountSelector()` | Discount amount | `#coupon_amount` |\n| `wooCouponExpirySelector()` | Expiry date | `#expiry_date` |\n| `wooCouponUsageLimitSelector()` | Usage limit | `#usage_limit` |\n| `wooCouponUsageLimitPerUserSelector()` | Per-user limit | `#usage_limit_per_user` |\n\n#### Example: Create a Coupon\n\n```php\nuse function PestWP\\Functions\\wooNewCouponUrl;\nuse function PestWP\\Functions\\wooCouponCodeSelector;\nuse function PestWP\\Functions\\wooCouponTypeSelector;\nuse function PestWP\\Functions\\wooCouponAmountSelector;\n\nit('creates a percentage discount coupon', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit(wooNewCouponUrl())\n            ->type(wooCouponCodeSelector(), 'SAVE20')\n            ->select(wooCouponTypeSelector(), 'percent')\n            ->type(wooCouponAmountSelector(), '20')\n            ->click('#publish')\n            ->waitForText('Coupon published');\n    });\n});\n```\n\n### Settings\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooSettingsUrl($tab)` | Settings page URL | `admin.php?page=wc-settings&tab={$tab}` |\n| `wooSettingsTabSelector($tab)` | Settings tab link | `.nav-tab-wrapper a[href*='tab={$tab}']` |\n| `wooSettingsSectionSelector($section)` | Settings section | `.subsubsub a[href*='section={$section}']` |\n| `wooSettingFieldSelector($id)` | Setting field by ID | `#{$fieldId}` |\n| `wooSaveSettingsSelector()` | Save button | `.woocommerce-save-button` |\n\n### Analytics\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooAnalyticsUrl($report)` | Analytics page URL | `admin.php?page=wc-admin&path=/analytics/{$report}` |\n| `wooAnalyticsDateRangeSelector()` | Date range picker | `.woocommerce-filters-date` |\n| `wooAnalyticsChartSelector()` | Chart container | `.woocommerce-chart` |\n| `wooAnalyticsSummarySelector()` | Summary numbers | `.woocommerce-summary` |\n| `wooAnalyticsTableSelector()` | Data table | `.woocommerce-table` |\n\n---\n\n## Storefront Selectors\n\n### Shop Page\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooShopProductSelector()` | Product card | `.product, li.product` |\n| `wooShopProductTitleSelector()` | Product title | `.woocommerce-loop-product__title` |\n| `wooShopProductPriceSelector()` | Product price | `.product .price` |\n| `wooShopAddToCartSelector()` | Add to cart button | `.add_to_cart_button, .ajax_add_to_cart` |\n| `wooShopPaginationSelector()` | Pagination | `.woocommerce-pagination` |\n| `wooShopOrderingSelector()` | Sort dropdown | `select.orderby` |\n| `wooShopResultCountSelector()` | Result count | `.woocommerce-result-count` |\n\n#### Example: Browse Shop\n\n```php\nuse function PestWP\\Functions\\wooShopProductSelector;\nuse function PestWP\\Functions\\wooShopOrderingSelector;\nuse function PestWP\\Functions\\wooShopAddToCartSelector;\n\nit('adds product to cart from shop page', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/shop')\n            ->assertVisible(wooShopProductSelector())\n            ->select(wooShopOrderingSelector(), 'price')\n            ->waitForReload()\n            ->click(wooShopAddToCartSelector())\n            ->waitForText('added to your cart');\n    });\n});\n```\n\n### Single Product Page\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooSingleProductTitleSelector()` | Product title | `.product_title, h1.product_title` |\n| `wooSingleProductPriceSelector()` | Product price | `.single-product .price` |\n| `wooSingleAddToCartSelector()` | Add to cart button | `.single_add_to_cart_button` |\n| `wooProductQuantitySelector()` | Quantity input | `.quantity input[type=\"number\"]` |\n| `wooProductShortDescriptionSelector()` | Short description | `.woocommerce-product-details__short-description` |\n| `wooProductDescriptionTabSelector()` | Description tab | `#tab-title-description` |\n| `wooProductReviewsTabSelector()` | Reviews tab | `#tab-title-reviews` |\n| `wooProductInfoTabSelector()` | Additional info tab | `#tab-title-additional_information` |\n| `wooProductGalleryImagesSelector()` | Gallery images | `.woocommerce-product-gallery` |\n| `wooProductMainImageSelector()` | Main image | `.woocommerce-product-gallery__wrapper img` |\n| `wooRelatedProductsSelector()` | Related products | `.related.products` |\n| `wooUpsellProductsSelector()` | Upsell products | `.upsells.products` |\n| `wooVariationSelector($attr)` | Variation dropdown | `select[name='attribute_{$attribute}']` |\n| `wooVariationPriceSelector()` | Variation price | `.woocommerce-variation-price` |\n\n#### Example: Variable Product\n\n```php\nuse function PestWP\\Functions\\wooVariationSelector;\nuse function PestWP\\Functions\\wooVariationPriceSelector;\nuse function PestWP\\Functions\\wooProductQuantitySelector;\nuse function PestWP\\Functions\\wooSingleAddToCartSelector;\n\nit('selects product variation and adds to cart', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/product/variable-tshirt')\n            ->select(wooVariationSelector('pa_size'), 'large')\n            ->select(wooVariationSelector('pa_color'), 'blue')\n            ->waitFor(wooVariationPriceSelector())\n            ->assertVisible(wooVariationPriceSelector())\n            ->clear(wooProductQuantitySelector())\n            ->type(wooProductQuantitySelector(), '2')\n            ->click(wooSingleAddToCartSelector())\n            ->waitForText('have been added');\n    });\n});\n```\n\n### Cart\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooCartTableSelector()` | Cart table | `.woocommerce-cart-form, table.cart` |\n| `wooCartItemSelector()` | Cart item row | `tr.cart_item` |\n| `wooCartRemoveItemSelector()` | Remove item button | `a.remove` |\n| `wooCartQuantitySelector()` | Item quantity input | `.cart_item input.qty` |\n| `wooUpdateCartSelector()` | Update cart button | `button[name=\"update_cart\"]` |\n| `wooCartSubtotalSelector()` | Cart subtotal | `.cart-subtotal` |\n| `wooCartTotalSelector()` | Cart total | `.order-total` |\n| `wooProceedToCheckoutSelector()` | Proceed to checkout | `.checkout-button` |\n| `wooCartCouponInputSelector()` | Coupon code input | `#coupon_code` |\n| `wooApplyCouponSelector()` | Apply coupon button | `button[name=\"apply_coupon\"]` |\n| `wooMiniCartSelector()` | Mini cart widget | `.widget_shopping_cart` |\n| `wooCartIconSelector()` | Cart icon in header | `.cart-contents, .cart-count` |\n\n#### Example: Cart Operations\n\n```php\nuse function PestWP\\Functions\\wooCartQuantitySelector;\nuse function PestWP\\Functions\\wooUpdateCartSelector;\nuse function PestWP\\Functions\\wooCartCouponInputSelector;\nuse function PestWP\\Functions\\wooApplyCouponSelector;\nuse function PestWP\\Functions\\wooCartTotalSelector;\n\nit('applies coupon and updates quantity', function () {\n    // Add product to cart first\n    addProductToCart($productId);\n    \n    $this->browse(function ($browser) {\n        $browser->visit('/cart')\n            // Update quantity\n            ->clear(wooCartQuantitySelector())\n            ->type(wooCartQuantitySelector(), '3')\n            ->click(wooUpdateCartSelector())\n            ->waitForText('Cart updated')\n            // Apply coupon\n            ->type(wooCartCouponInputSelector(), 'SAVE10')\n            ->click(wooApplyCouponSelector())\n            ->waitForText('Coupon code applied')\n            // Verify total updated\n            ->assertVisible(wooCartTotalSelector());\n    });\n});\n```\n\n### Checkout\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooCheckoutFormSelector()` | Checkout form | `form.woocommerce-checkout` |\n| `wooBillingFieldSelector($field)` | Billing fields | `#billing_{$field}` |\n| `wooShippingFieldSelector($field)` | Shipping fields | `#shipping_{$field}` |\n| `wooShipDifferentAddressSelector()` | Ship to different checkbox | `#ship-to-different-address-checkbox` |\n| `wooCheckoutNotesSelector()` | Order notes | `#order_comments` |\n| `wooPaymentMethodSelector($id)` | Payment method radio | `#payment_method_{$methodId}` |\n| `wooPaymentMethodsSelector()` | Payment methods list | `#payment ul.payment_methods` |\n| `wooPlaceOrderSelector()` | Place order button | `#place_order` |\n| `wooCheckoutLoginSelector()` | Checkout login form | `.woocommerce-form-login` |\n| `wooCreateAccountSelector()` | Create account checkbox | `#createaccount` |\n| `wooAccountPasswordSelector()` | Account password field | `#account_password` |\n| `wooShippingMethodsSelector()` | Shipping methods list | `#shipping_method` |\n| `wooShippingMethodSelector($id)` | Specific shipping method | `#shipping_method_0_{$methodId}` |\n| `wooOrderReviewSelector()` | Order review section | `#order_review` |\n| `wooCheckoutTotalSelector()` | Checkout total | `.order-total` |\n\n#### Billing/Shipping Fields\n\nAvailable fields for `wooBillingFieldSelector()` and `wooShippingFieldSelector()`:\n- `first_name`, `last_name`, `company`\n- `country`, `address_1`, `address_2`\n- `city`, `state`, `postcode`\n- `phone`, `email` (billing only)\n\n#### Example: Complete Checkout\n\n```php\nuse function PestWP\\Functions\\wooBillingFieldSelector;\nuse function PestWP\\Functions\\wooPaymentMethodSelector;\nuse function PestWP\\Functions\\wooPlaceOrderSelector;\n\nit('completes checkout with COD payment', function () {\n    addProductToCart($productId);\n    \n    $this->browse(function ($browser) {\n        $browser->visit('/checkout')\n            // Billing details\n            ->type(wooBillingFieldSelector('first_name'), 'John')\n            ->type(wooBillingFieldSelector('last_name'), 'Doe')\n            ->select(wooBillingFieldSelector('country'), 'US')\n            ->type(wooBillingFieldSelector('address_1'), '123 Main St')\n            ->type(wooBillingFieldSelector('city'), 'New York')\n            ->select(wooBillingFieldSelector('state'), 'NY')\n            ->type(wooBillingFieldSelector('postcode'), '10001')\n            ->type(wooBillingFieldSelector('phone'), '555-1234')\n            ->type(wooBillingFieldSelector('email'), 'john@example.com')\n            // Payment\n            ->click(wooPaymentMethodSelector('cod'))\n            ->click(wooPlaceOrderSelector())\n            ->waitForText('Order received')\n            ->assertSee('Thank you');\n    });\n});\n```\n\n#### Example: Guest vs Account Checkout\n\n```php\nuse function PestWP\\Functions\\wooCreateAccountSelector;\nuse function PestWP\\Functions\\wooAccountPasswordSelector;\n\nit('creates account during checkout', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/checkout')\n            ->fillCheckoutForm()\n            // Create account\n            ->check(wooCreateAccountSelector())\n            ->waitFor(wooAccountPasswordSelector())\n            ->type(wooAccountPasswordSelector(), 'SecurePass123!')\n            ->click(wooPlaceOrderSelector())\n            ->waitForText('Order received');\n    });\n    \n    // Verify account was created\n    expect(email_exists('john@example.com'))->toBeInt();\n});\n```\n\n### My Account\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooAccountNavSelector()` | Account navigation | `.woocommerce-MyAccount-navigation` |\n| `wooAccountContentSelector()` | Account content area | `.woocommerce-MyAccount-content` |\n| `wooAccountNavLinkSelector($endpoint)` | Navigation link | `.woocommerce-MyAccount-navigation-link--{$endpoint} a` |\n| `wooAccountOrdersSelector()` | Orders table | `.woocommerce-orders-table` |\n| `wooViewOrderSelector()` | View order button | `a.woocommerce-button.view` |\n| `wooAccountDownloadsSelector()` | Downloads table | `.woocommerce-table--order-downloads` |\n| `wooEditAddressSelector($type)` | Edit address link | `.woocommerce-Address-title a[href*='{$type}']` |\n| `wooAccountDetailsFormSelector()` | Account details form | `form.woocommerce-EditAccountForm` |\n\n#### Account Endpoints\n\nAvailable endpoints for `wooAccountNavLinkSelector()`:\n- `dashboard`, `orders`, `downloads`\n- `edit-address`, `payment-methods`\n- `edit-account`, `customer-logout`\n\n#### Example: My Account Navigation\n\n```php\nuse function PestWP\\Functions\\wooAccountNavLinkSelector;\nuse function PestWP\\Functions\\wooAccountOrdersSelector;\nuse function PestWP\\Functions\\wooViewOrderSelector;\n\nit('views order history', function () {\n    $customer = createUser(['role' => 'customer']);\n    createWooOrder(['customer_id' => $customer->ID]);\n    \n    $this->browse(function ($browser) use ($customer) {\n        $browser->loginAs($customer)\n            ->visit('/my-account')\n            ->click(wooAccountNavLinkSelector('orders'))\n            ->assertVisible(wooAccountOrdersSelector())\n            ->click(wooViewOrderSelector())\n            ->assertSee('Order details');\n    });\n});\n```\n\n### Login & Registration\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooLoginFormSelector()` | Login form | `form.woocommerce-form-login` |\n| `wooRegisterFormSelector()` | Register form | `form.woocommerce-form-register` |\n| `wooLoginUsernameSelector()` | Username field | `#username` |\n| `wooLoginPasswordSelector()` | Password field | `#password` |\n| `wooRememberMeSelector()` | Remember me checkbox | `#rememberme` |\n| `wooLoginSubmitSelector()` | Login button | `button[name=\"login\"]` |\n| `wooRegisterEmailSelector()` | Register email | `#reg_email` |\n| `wooRegisterPasswordSelector()` | Register password | `#reg_password` |\n| `wooRegisterSubmitSelector()` | Register button | `button[name=\"register\"]` |\n| `wooLostPasswordSelector()` | Lost password link | `.woocommerce-LostPassword a` |\n\n#### Example: Customer Login\n\n```php\nuse function PestWP\\Functions\\wooLoginUsernameSelector;\nuse function PestWP\\Functions\\wooLoginPasswordSelector;\nuse function PestWP\\Functions\\wooLoginSubmitSelector;\n\nit('logs in customer', function () {\n    $customer = createUser([\n        'role' => 'customer',\n        'user_login' => 'testcustomer',\n        'user_pass' => 'password123'\n    ]);\n    \n    $this->browse(function ($browser) {\n        $browser->visit('/my-account')\n            ->type(wooLoginUsernameSelector(), 'testcustomer')\n            ->type(wooLoginPasswordSelector(), 'password123')\n            ->click(wooLoginSubmitSelector())\n            ->waitForText('Dashboard')\n            ->assertPathIs('/my-account/');\n    });\n});\n```\n\n### Notices\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `wooNoticeSelector()` | Any notice | `.woocommerce-notices-wrapper, .woocommerce-message` |\n| `wooSuccessNoticeSelector()` | Success message | `.woocommerce-message` |\n| `wooErrorNoticeSelector()` | Error message | `.woocommerce-error` |\n| `wooInfoNoticeSelector()` | Info message | `.woocommerce-info` |\n| `wooAddedToCartNoticeSelector()` | Added to cart notice | `.woocommerce-message:has-text('cart')` |\n\n#### Example: Verify Notices\n\n```php\nuse function PestWP\\Functions\\wooSuccessNoticeSelector;\nuse function PestWP\\Functions\\wooErrorNoticeSelector;\n\nit('shows validation errors on checkout', function () {\n    addProductToCart($productId);\n    \n    $this->browse(function ($browser) {\n        $browser->visit('/checkout')\n            ->click(wooPlaceOrderSelector())\n            ->waitFor(wooErrorNoticeSelector())\n            ->assertSeeIn(wooErrorNoticeSelector(), 'required field');\n    });\n});\n\nit('shows success message after order', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/checkout')\n            ->fillCheckoutForm()\n            ->click(wooPlaceOrderSelector())\n            ->waitForText('Order received');\n        \n        // Success page doesn't use notice, but thank you message\n        $browser->assertSee('Thank you');\n    });\n});\n```\n\n---\n\n## Complete Checkout Flow Example\n\n```php\nuse function PestWP\\Functions\\{\n    wooShopAddToCartSelector,\n    wooCartQuantitySelector,\n    wooUpdateCartSelector,\n    wooProceedToCheckoutSelector,\n    wooBillingFieldSelector,\n    wooPaymentMethodSelector,\n    wooPlaceOrderSelector,\n    wooSuccessNoticeSelector\n};\n\nit('completes full purchase flow', function () {\n    // Create test product\n    $product = createWooProduct([\n        'name' => 'Test Product',\n        'regular_price' => '49.99',\n        'stock_quantity' => 100\n    ]);\n    \n    $this->browse(function ($browser) use ($product) {\n        // 1. Add to cart from shop\n        $browser->visit('/shop')\n            ->click(wooShopAddToCartSelector() . ':first-child')\n            ->waitForText('added to your cart')\n            ->visit('/cart');\n        \n        // 2. Update quantity\n        $browser->clear(wooCartQuantitySelector())\n            ->type(wooCartQuantitySelector(), '2')\n            ->click(wooUpdateCartSelector())\n            ->waitForText('Cart updated');\n        \n        // 3. Proceed to checkout\n        $browser->click(wooProceedToCheckoutSelector())\n            ->waitFor(wooCheckoutFormSelector());\n        \n        // 4. Fill billing details\n        $browser->type(wooBillingFieldSelector('first_name'), 'Jane')\n            ->type(wooBillingFieldSelector('last_name'), 'Smith')\n            ->select(wooBillingFieldSelector('country'), 'US')\n            ->type(wooBillingFieldSelector('address_1'), '456 Oak Ave')\n            ->type(wooBillingFieldSelector('city'), 'Los Angeles')\n            ->select(wooBillingFieldSelector('state'), 'CA')\n            ->type(wooBillingFieldSelector('postcode'), '90001')\n            ->type(wooBillingFieldSelector('phone'), '555-9876')\n            ->type(wooBillingFieldSelector('email'), 'jane@example.com');\n        \n        // 5. Select payment and place order\n        $browser->click(wooPaymentMethodSelector('cod'))\n            ->click(wooPlaceOrderSelector())\n            ->waitForText('Order received');\n        \n        // 6. Verify order confirmation\n        $browser->assertSee('Thank you')\n            ->assertSee('Jane Smith')\n            ->assertSee('$99.98'); // 2 x $49.99\n    });\n    \n    // Verify order in database\n    $orders = wc_get_orders(['customer' => 'jane@example.com']);\n    expect($orders)->toHaveCount(1);\n    expect($orders[0]->get_total())->toBe('99.98');\n});\n```\n\n---\n\n## Testing Payment Gateways\n\n### Stripe Test Mode\n\n```php\nit('processes Stripe payment', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/checkout')\n            ->fillCheckoutForm()\n            ->click(wooPaymentMethodSelector('stripe'))\n            ->waitFor('#stripe-card-element iframe')\n            ->withinFrame('#stripe-card-element iframe', function ($frame) {\n                $frame->type('[name=\"cardnumber\"]', '4242424242424242')\n                    ->type('[name=\"exp-date\"]', '12/25')\n                    ->type('[name=\"cvc\"]', '123');\n            })\n            ->click(wooPlaceOrderSelector())\n            ->waitForText('Order received', 30);\n    });\n});\n```\n\n### PayPal Sandbox\n\n```php\nit('redirects to PayPal', function () {\n    $this->browse(function ($browser) {\n        $browser->visit('/checkout')\n            ->fillCheckoutForm()\n            ->click(wooPaymentMethodSelector('paypal'))\n            ->click(wooPlaceOrderSelector())\n            ->waitForLocation('/checkout/order-pay/')\n            ->assertSee('PayPal');\n    });\n});\n```\n\n---\n\n## Best Practices\n\n### 1. Use Test Mode\n\nAlways run WooCommerce in test mode:\n```php\nbeforeEach(function () {\n    update_option('woocommerce_sandbox_mode', 'yes');\n});\n```\n\n### 2. Create Products Programmatically\n\n```php\nfunction createWooProduct(array $data = []): WC_Product\n{\n    $product = new WC_Product_Simple();\n    $product->set_name($data['name'] ?? 'Test Product');\n    $product->set_regular_price($data['regular_price'] ?? '10.00');\n    $product->set_stock_quantity($data['stock_quantity'] ?? 100);\n    $product->set_stock_status('instock');\n    $product->save();\n    \n    return $product;\n}\n```\n\n### 3. Helper for Cart Operations\n\n```php\nfunction addProductToCart(int $productId, int $quantity = 1): void\n{\n    WC()->cart->add_to_cart($productId, $quantity);\n}\n\nfunction emptyCart(): void\n{\n    WC()->cart->empty_cart();\n}\n```\n\n### 4. Isolate Test Orders\n\n```php\nafterEach(function () {\n    // Clean up test orders\n    $orders = wc_get_orders(['limit' => -1]);\n    foreach ($orders as $order) {\n        $order->delete(true);\n    }\n});\n```\n\n---\n\n## Next Steps\n\n- [Browser Testing](browser-testing.md) - Learn about Playwright integration\n- [Factories](factories.md) - Create test data easily\n- [Database Isolation](database-isolation.md) - Keep tests isolated\n- [Accessibility Testing](accessibility-testing.md) - Test WCAG compliance\n",
    "gutenberg": "# Gutenberg Block Testing\n\nPestWP provides comprehensive browser testing support for the WordPress Block Editor (Gutenberg) with **70+ CSS selectors** covering all core blocks, editor UI, and site editor elements. These selectors work with WordPress 6.5+ and the latest block editor.\n\n## Overview\n\nGutenberg testing involves:\n- **Block manipulation**: Creating, editing, and transforming blocks\n- **Editor UI**: Toolbar, sidebar, inserter, and settings\n- **Content verification**: Validating block output on frontend\n- **Site Editor**: Testing Full Site Editing (FSE) templates\n\n## Quick Start\n\n```php\nuse function PestWP\\Functions\\paragraphBlockSelector;\nuse function PestWP\\Functions\\headingBlockSelector;\nuse function PestWP\\Functions\\blockToolbarSelector;\n\nit('creates content with blocks', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor')\n            ->type(paragraphBlockSelector(), 'Hello World')\n            ->assertVisible(blockToolbarSelector());\n    });\n});\n```\n\n---\n\n## Text Blocks\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `paragraphBlockSelector($index)` | Paragraph block | `[data-type='core/paragraph']` |\n| `headingBlockSelector($level)` | Heading block (H1-H6) | `[data-type='core/heading']` |\n| `listBlockSelector($type)` | List block (ordered/unordered) | `[data-type='core/list']` |\n| `quoteBlockSelector()` | Quote block | `[data-type='core/quote']` |\n| `pullquoteBlockSelector()` | Pullquote block | `[data-type='core/pullquote']` |\n| `codeBlockSelector()` | Code block | `[data-type='core/code']` |\n| `preformattedBlockSelector()` | Preformatted block | `[data-type='core/preformatted']` |\n| `verseBlockSelector()` | Verse block | `[data-type='core/verse']` |\n\n### Example: Working with Text Blocks\n\n```php\nuse function PestWP\\Functions\\paragraphBlockSelector;\nuse function PestWP\\Functions\\headingBlockSelector;\nuse function PestWP\\Functions\\listBlockSelector;\n\nit('creates a blog post with text blocks', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        // Add title\n        $browser->type('.editor-post-title__input', 'My Blog Post');\n        \n        // Add heading\n        $browser->click('[aria-label=\"Add block\"]')\n            ->type('[placeholder=\"Search\"]', 'Heading')\n            ->click('[aria-label=\"Heading\"]')\n            ->type(headingBlockSelector(), 'Introduction');\n        \n        // Add paragraph\n        $browser->press('Enter')\n            ->type(paragraphBlockSelector(), 'Welcome to my blog post.');\n        \n        // Add list\n        $browser->click('[aria-label=\"Add block\"]')\n            ->click('[aria-label=\"List\"]')\n            ->type(listBlockSelector(), 'First item');\n        \n        $browser->click('.editor-post-publish-button')\n            ->waitForText('Published');\n    });\n});\n```\n\n### Heading Levels\n\n```php\nuse function PestWP\\Functions\\headingBlockSelector;\n\nit('creates headings at different levels', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php?post_type=page')\n            ->waitFor('.block-editor');\n        \n        // H1 heading\n        $browser->addBlock('Heading')\n            ->type(headingBlockSelector(1), 'Main Title')\n            ->assertVisible(headingBlockSelector(1));\n        \n        // Change to H2\n        $browser->click(headingBlockSelector(1))\n            ->click('[aria-label=\"Change level\"]')\n            ->click('button:has-text(\"H2\")')\n            ->assertVisible(headingBlockSelector(2));\n    });\n});\n```\n\n---\n\n## Media Blocks\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `imageBlockSelector()` | Image block | `[data-type='core/image']` |\n| `galleryBlockSelector()` | Gallery block | `[data-type='core/gallery']` |\n| `audioBlockSelector()` | Audio block | `[data-type='core/audio']` |\n| `videoBlockSelector()` | Video block | `[data-type='core/video']` |\n| `coverBlockSelector()` | Cover block | `[data-type='core/cover']` |\n| `mediaTextBlockSelector()` | Media & Text block | `[data-type='core/media-text']` |\n| `fileBlockSelector()` | File block | `[data-type='core/file']` |\n\n### Example: Media Blocks\n\n```php\nuse function PestWP\\Functions\\imageBlockSelector;\nuse function PestWP\\Functions\\galleryBlockSelector;\nuse function PestWP\\Functions\\coverBlockSelector;\n\nit('adds media blocks to post', function () {\n    $imageId = createAttachment('test-image.jpg');\n    \n    $this->browse(function ($browser) use ($imageId) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        // Add image block\n        $browser->addBlock('Image')\n            ->click('.block-editor-media-placeholder__upload-button')\n            ->waitFor('.media-modal')\n            ->click(\".attachment[data-id='{$imageId}']\")\n            ->click('.media-button-select')\n            ->waitFor(imageBlockSelector() . ' img');\n        \n        // Add cover block\n        $browser->addBlock('Cover')\n            ->click('.block-editor-media-placeholder__media-library-button')\n            ->waitFor('.media-modal')\n            ->click(\".attachment[data-id='{$imageId}']\")\n            ->click('.media-button-select')\n            ->type(coverBlockSelector() . ' p', 'Featured Content');\n    });\n});\n```\n\n---\n\n## Design & Layout Blocks\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `buttonsBlockSelector()` | Buttons container | `[data-type='core/buttons']` |\n| `buttonBlockSelector()` | Single button | `[data-type='core/button']` |\n| `columnsBlockSelector()` | Columns layout | `[data-type='core/columns']` |\n| `columnBlockSelector($index)` | Single column | `[data-type='core/column']` |\n| `groupBlockSelector()` | Group block | `[data-type='core/group']` |\n| `rowBlockSelector()` | Row layout (flex) | `[data-type='core/group'].is-layout-flex` |\n| `stackBlockSelector()` | Stack layout (flow) | `[data-type='core/group'].is-layout-flow` |\n| `separatorBlockSelector()` | Separator/divider | `[data-type='core/separator']` |\n| `spacerBlockSelector()` | Spacer block | `[data-type='core/spacer']` |\n| `detailsBlockSelector()` | Details/accordion | `[data-type='core/details']` |\n\n### Example: Layout Blocks\n\n```php\nuse function PestWP\\Functions\\columnsBlockSelector;\nuse function PestWP\\Functions\\columnBlockSelector;\nuse function PestWP\\Functions\\buttonBlockSelector;\n\nit('creates a two-column layout with CTA', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php?post_type=page')\n            ->waitFor('.block-editor');\n        \n        // Add columns\n        $browser->addBlock('Columns')\n            ->click('.block-editor-block-variation-picker__variation:first-child'); // 50/50\n        \n        // Add content to first column\n        $browser->click(columnBlockSelector(0))\n            ->type('p', 'Left column content');\n        \n        // Add button to second column\n        $browser->click(columnBlockSelector(1))\n            ->addBlock('Buttons')\n            ->type(buttonBlockSelector() . ' [contenteditable]', 'Learn More')\n            ->assertVisible(buttonBlockSelector());\n        \n        // Verify structure\n        $browser->assertVisible(columnsBlockSelector())\n            ->assertElementsCount(columnBlockSelector(), 2);\n    });\n});\n```\n\n---\n\n## Widget Blocks\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `shortcodeBlockSelector()` | Shortcode block | `[data-type='core/shortcode']` |\n| `archivesBlockSelector()` | Archives widget | `[data-type='core/archives']` |\n| `calendarBlockSelector()` | Calendar widget | `[data-type='core/calendar']` |\n| `categoriesBlockSelector()` | Categories widget | `[data-type='core/categories']` |\n| `htmlBlockSelector()` | Custom HTML block | `[data-type='core/html']` |\n| `latestCommentsBlockSelector()` | Latest Comments | `[data-type='core/latest-comments']` |\n| `latestPostsBlockSelector()` | Latest Posts | `[data-type='core/latest-posts']` |\n| `pageListBlockSelector()` | Page List | `[data-type='core/page-list']` |\n| `rssBlockSelector()` | RSS feed | `[data-type='core/rss']` |\n| `searchBlockSelector()` | Search form | `[data-type='core/search']` |\n| `socialLinksBlockSelector()` | Social links | `[data-type='core/social-links']` |\n| `tagCloudBlockSelector()` | Tag cloud | `[data-type='core/tag-cloud']` |\n\n### Example: Dynamic Widget Blocks\n\n```php\nuse function PestWP\\Functions\\latestPostsBlockSelector;\nuse function PestWP\\Functions\\searchBlockSelector;\n\nit('adds widget blocks to sidebar', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/widgets.php')\n            ->waitFor('.block-editor');\n        \n        // Add Latest Posts\n        $browser->addBlock('Latest Posts')\n            ->waitFor(latestPostsBlockSelector())\n            ->assertVisible(latestPostsBlockSelector());\n        \n        // Configure via sidebar\n        $browser->click(latestPostsBlockSelector())\n            ->click('.edit-post-header__settings button[aria-label=\"Settings\"]')\n            ->type('input[aria-label=\"Number of items\"]', '5')\n            ->check('input[aria-label=\"Display post date\"]');\n        \n        // Add Search\n        $browser->addBlock('Search')\n            ->assertVisible(searchBlockSelector());\n        \n        $browser->click('.edit-widgets-header__actions button')\n            ->waitForText('Widgets saved');\n    });\n});\n```\n\n---\n\n## Theme & Site Editor Blocks\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `siteTitleBlockSelector()` | Site title | `[data-type='core/site-title']` |\n| `siteTaglineBlockSelector()` | Site tagline | `[data-type='core/site-tagline']` |\n| `siteLogoBlockSelector()` | Site logo | `[data-type='core/site-logo']` |\n| `navigationBlockSelector()` | Navigation menu | `[data-type='core/navigation']` |\n| `queryBlockSelector()` | Query Loop | `[data-type='core/query']` |\n| `postTemplateBlockSelector()` | Post Template | `[data-type='core/post-template']` |\n| `postTitleBlockSelector()` | Post Title | `[data-type='core/post-title']` |\n| `postContentBlockSelector()` | Post Content | `[data-type='core/post-content']` |\n| `postExcerptBlockSelector()` | Post Excerpt | `[data-type='core/post-excerpt']` |\n| `postFeaturedImageBlockSelector()` | Featured Image | `[data-type='core/post-featured-image']` |\n| `postDateBlockSelector()` | Post Date | `[data-type='core/post-date']` |\n| `postAuthorBlockSelector()` | Post Author | `[data-type='core/post-author']` |\n| `postCategoriesBlockSelector()` | Post Categories | `[data-type='core/post-terms']` |\n| `postTagsBlockSelector()` | Post Tags | `[data-type='core/post-terms']` |\n| `commentsBlockSelector()` | Comments | `[data-type='core/comments']` |\n| `commentFormBlockSelector()` | Comment Form | `[data-type='core/post-comments-form']` |\n| `templatePartBlockSelector($slug)` | Template Part | `[data-type='core/template-part']` |\n\n### Example: Site Editor\n\n```php\nuse function PestWP\\Functions\\siteTitleBlockSelector;\nuse function PestWP\\Functions\\navigationBlockSelector;\nuse function PestWP\\Functions\\templatePartBlockSelector;\n\nit('edits site header in FSE', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/site-editor.php?postType=wp_template_part&postId=theme//header')\n            ->waitFor('.block-editor');\n        \n        // Edit site title\n        $browser->click(siteTitleBlockSelector())\n            ->assertVisible('.block-editor-block-inspector')\n            ->check('[aria-label=\"Make title link to home\"]');\n        \n        // Edit navigation\n        $browser->click(navigationBlockSelector())\n            ->click('.wp-block-navigation__responsive-container-open')\n            ->assertVisible('.wp-block-navigation-link');\n        \n        // Verify header template part\n        $browser->assertVisible(templatePartBlockSelector('header'));\n        \n        $browser->click('.edit-site-save-button')\n            ->waitForText('Saved');\n    });\n});\n```\n\n### Example: Query Loop\n\n```php\nuse function PestWP\\Functions\\queryBlockSelector;\nuse function PestWP\\Functions\\postTemplateBlockSelector;\nuse function PestWP\\Functions\\postTitleBlockSelector;\nuse function PestWP\\Functions\\postExcerptBlockSelector;\n\nit('creates a custom blog layout', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php?post_type=page')\n            ->waitFor('.block-editor');\n        \n        // Add Query Loop\n        $browser->addBlock('Query Loop')\n            ->click('.block-editor-block-variation-picker__variation:first-child')\n            ->waitFor(queryBlockSelector());\n        \n        // Verify template blocks\n        $browser->assertVisible(postTemplateBlockSelector())\n            ->assertVisible(postTitleBlockSelector())\n            ->assertVisible(postExcerptBlockSelector());\n        \n        // Configure query\n        $browser->click(queryBlockSelector())\n            ->click('.edit-post-header__settings button[aria-label=\"Settings\"]')\n            ->select('[aria-label=\"Post Type\"]', 'post')\n            ->type('[aria-label=\"Items Per Page\"]', '6');\n    });\n});\n```\n\n---\n\n## Table Block\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `tableBlockSelector()` | Table block | `[data-type='core/table']` |\n| `tableHeaderSelector()` | Table header | `[data-type='core/table'] thead` |\n| `tableBodySelector()` | Table body | `[data-type='core/table'] tbody` |\n| `tableFooterSelector()` | Table footer | `[data-type='core/table'] tfoot` |\n\n### Example: Table Block\n\n```php\nuse function PestWP\\Functions\\tableBlockSelector;\nuse function PestWP\\Functions\\tableHeaderSelector;\nuse function PestWP\\Functions\\tableBodySelector;\n\nit('creates a pricing table', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php?post_type=page')\n            ->waitFor('.block-editor');\n        \n        $browser->addBlock('Table')\n            ->type('[aria-label=\"Column count\"]', '3')\n            ->type('[aria-label=\"Row count\"]', '4')\n            ->click('.blocks-table__placeholder-button')\n            ->waitFor(tableBlockSelector());\n        \n        // Enable header\n        $browser->click('.block-editor-block-inspector [aria-label=\"Header section\"]')\n            ->waitFor(tableHeaderSelector())\n            ->type(tableHeaderSelector() . ' th:first-child', 'Plan')\n            ->type(tableHeaderSelector() . ' th:nth-child(2)', 'Features')\n            ->type(tableHeaderSelector() . ' th:nth-child(3)', 'Price');\n        \n        // Fill body\n        $browser->type(tableBodySelector() . ' tr:first-child td:first-child', 'Basic')\n            ->type(tableBodySelector() . ' tr:first-child td:last-child', '$9/mo');\n    });\n});\n```\n\n---\n\n## Embed Blocks\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `embedBlockSelector($provider)` | Embed block | `[data-type='core/embed']` |\n| `youtubeBlockSelector()` | YouTube embed | `[data-type='core/embed'][data-provider-name='youtube']` |\n| `vimeoBlockSelector()` | Vimeo embed | `[data-type='core/embed'][data-provider-name='vimeo']` |\n| `twitterBlockSelector()` | Twitter/X embed | `[data-type='core/embed'][data-provider-name='twitter']` |\n\n### Example: Embed Content\n\n```php\nuse function PestWP\\Functions\\youtubeBlockSelector;\nuse function PestWP\\Functions\\embedBlockSelector;\n\nit('embeds a YouTube video', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        $browser->addBlock('YouTube')\n            ->type('.block-editor-media-placeholder__url-input-container input', \n                   'https://www.youtube.com/watch?v=dQw4w9WgXcQ')\n            ->click('.block-editor-media-placeholder__url-input-container button')\n            ->waitFor(youtubeBlockSelector())\n            ->assertVisible(embedBlockSelector('youtube'));\n    });\n});\n```\n\n---\n\n## Editor UI Helpers\n\n| Function | Description | Selector |\n|----------|-------------|----------|\n| `blockToolbarSelector()` | Block toolbar | `.block-editor-block-toolbar` |\n| `blockSettingsSidebarSelector()` | Settings sidebar | `.block-editor-block-inspector` |\n| `blockMoverSelector()` | Block mover arrows | `.block-editor-block-mover` |\n| `blockOptionsMenuSelector()` | Options menu (\u22ee) | `[aria-label='Options']` |\n| `blockTransformSelector()` | Transform option | `:has-text('Transform to')` |\n| `duplicateBlockSelector()` | Duplicate option | `:has-text('Duplicate')` |\n| `removeBlockSelector()` | Delete option | `:has-text('Delete')` |\n| `blockAlignmentSelector()` | Alignment control | `[aria-label*='Align']` |\n| `richTextToolbarSelector()` | Formatting toolbar | `.block-editor-format-toolbar` |\n| `boldButtonSelector()` | Bold button | `[aria-label='Bold']` |\n| `italicButtonSelector()` | Italic button | `[aria-label='Italic']` |\n| `linkButtonSelector()` | Link button | `[aria-label='Link']` |\n| `linkInputSelector()` | Link URL input | `.block-editor-link-control__search-input input` |\n| `documentSettingsToggleSelector()` | Settings toggle | `button[aria-label='Settings']` |\n| `visibilityControlSelector()` | Visibility setting | `.editor-post-visibility__toggle` |\n| `scheduleControlSelector()` | Schedule setting | `.editor-post-schedule__toggle` |\n| `featuredImageControlSelector()` | Featured image | `.editor-post-featured-image` |\n| `excerptPanelSelector()` | Excerpt panel | `.editor-post-excerpt` |\n| `discussionPanelSelector()` | Discussion panel | `.editor-post-discussion-panel` |\n\n### Example: Block Operations\n\n```php\nuse function PestWP\\Functions\\blockToolbarSelector;\nuse function PestWP\\Functions\\blockOptionsMenuSelector;\nuse function PestWP\\Functions\\duplicateBlockSelector;\nuse function PestWP\\Functions\\removeBlockSelector;\nuse function PestWP\\Functions\\blockMoverSelector;\n\nit('manipulates blocks with toolbar', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        // Create paragraph\n        $browser->type(paragraphBlockSelector(), 'Original content')\n            ->click(paragraphBlockSelector());\n        \n        // Verify toolbar\n        $browser->assertVisible(blockToolbarSelector())\n            ->assertVisible(blockMoverSelector());\n        \n        // Duplicate block\n        $browser->click(blockOptionsMenuSelector())\n            ->click(duplicateBlockSelector())\n            ->assertElementsCount(paragraphBlockSelector(), 2);\n        \n        // Delete one\n        $browser->click(paragraphBlockSelector() . ':last-child')\n            ->click(blockOptionsMenuSelector())\n            ->click(removeBlockSelector())\n            ->assertElementsCount(paragraphBlockSelector(), 1);\n    });\n});\n```\n\n### Example: Text Formatting\n\n```php\nuse function PestWP\\Functions\\boldButtonSelector;\nuse function PestWP\\Functions\\italicButtonSelector;\nuse function PestWP\\Functions\\linkButtonSelector;\nuse function PestWP\\Functions\\linkInputSelector;\n\nit('applies formatting to text', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        // Type and select text\n        $browser->type(paragraphBlockSelector(), 'Important text here')\n            ->keys(paragraphBlockSelector(), ['{ctrl}', 'a']); // Select all\n        \n        // Apply bold\n        $browser->click(boldButtonSelector())\n            ->assertAttribute(paragraphBlockSelector() . ' strong', 'textContent', 'Important text here');\n        \n        // Add link\n        $browser->click(linkButtonSelector())\n            ->waitFor(linkInputSelector())\n            ->type(linkInputSelector(), 'https://example.com')\n            ->press('Enter')\n            ->assertVisible(paragraphBlockSelector() . ' a[href=\"https://example.com\"]');\n    });\n});\n```\n\n### Example: Document Settings\n\n```php\nuse function PestWP\\Functions\\documentSettingsToggleSelector;\nuse function PestWP\\Functions\\visibilityControlSelector;\nuse function PestWP\\Functions\\featuredImageControlSelector;\nuse function PestWP\\Functions\\excerptPanelSelector;\n\nit('configures post settings', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        // Open settings sidebar\n        $browser->click(documentSettingsToggleSelector())\n            ->waitFor('.edit-post-sidebar');\n        \n        // Set visibility to private\n        $browser->click(visibilityControlSelector())\n            ->click('input[value=\"private\"]')\n            ->assertSee('Private');\n        \n        // Set featured image\n        $browser->click(featuredImageControlSelector())\n            ->waitFor('.media-modal')\n            ->click('.attachment:first-child')\n            ->click('.media-button-select')\n            ->assertVisible('.editor-post-featured-image__preview');\n        \n        // Add excerpt\n        $browser->click(excerptPanelSelector() . ' button')\n            ->type(excerptPanelSelector() . ' textarea', 'This is the post excerpt.');\n    });\n});\n```\n\n---\n\n## Complete Post Creation Example\n\n```php\nuse function PestWP\\Functions\\{\n    paragraphBlockSelector,\n    headingBlockSelector,\n    imageBlockSelector,\n    columnsBlockSelector,\n    columnBlockSelector,\n    buttonBlockSelector,\n    blockToolbarSelector,\n    documentSettingsToggleSelector,\n    featuredImageControlSelector\n};\n\nit('creates a complete landing page', function () {\n    $imageId = createAttachment('hero-image.jpg');\n    \n    $this->browse(function ($browser) use ($imageId) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php?post_type=page')\n            ->waitFor('.block-editor');\n        \n        // 1. Add title\n        $browser->type('.editor-post-title__input', 'Welcome to Our Site');\n        \n        // 2. Add hero heading\n        $browser->addBlock('Heading')\n            ->type(headingBlockSelector(), 'Build Something Amazing')\n            ->click(headingBlockSelector())\n            ->click('[aria-label=\"Align text center\"]');\n        \n        // 3. Add intro paragraph\n        $browser->press('Enter')\n            ->type(paragraphBlockSelector(), 'We help businesses grow with modern web solutions.')\n            ->click(paragraphBlockSelector())\n            ->click('[aria-label=\"Align text center\"]');\n        \n        // 4. Add two-column feature section\n        $browser->addBlock('Columns')\n            ->click('.block-editor-block-variation-picker__variation:first-child');\n        \n        // Left column\n        $browser->click(columnBlockSelector(0))\n            ->addBlock('Heading')\n            ->type(headingBlockSelector() . ':last-child', 'Our Services');\n        \n        // Right column  \n        $browser->click(columnBlockSelector(1))\n            ->addBlock('Heading')\n            ->type(headingBlockSelector() . ':last-child', 'Why Choose Us');\n        \n        // 5. Add CTA button\n        $browser->addBlock('Buttons')\n            ->type(buttonBlockSelector() . ' [contenteditable]', 'Get Started')\n            ->click(buttonBlockSelector())\n            ->click('[aria-label=\"Align text center\"]');\n        \n        // 6. Set featured image\n        $browser->click(documentSettingsToggleSelector())\n            ->click(featuredImageControlSelector())\n            ->waitFor('.media-modal')\n            ->click(\".attachment[data-id='{$imageId}']\")\n            ->click('.media-button-select');\n        \n        // 7. Publish\n        $browser->click('.editor-post-publish-button')\n            ->waitFor('.editor-post-publish-panel')\n            ->click('.editor-post-publish-panel__header-publish-button button')\n            ->waitForText('is now live');\n        \n        // 8. View page\n        $browser->click('.post-publish-panel__postpublish-buttons a')\n            ->assertSee('Build Something Amazing')\n            ->assertSee('Get Started');\n    });\n});\n```\n\n---\n\n## Testing Block Output on Frontend\n\n```php\nuse function PestWP\\Functions\\paragraphBlockSelector;\nuse function PestWP\\Functions\\headingBlockSelector;\nuse function PestWP\\Functions\\columnsBlockSelector;\n\nit('verifies block content renders correctly', function () {\n    $post = createPost([\n        'post_content' => '<!-- wp:heading -->\n            <h2 class=\"wp-block-heading\">Test Heading</h2>\n            <!-- /wp:heading -->\n            <!-- wp:paragraph -->\n            <p>Test paragraph content.</p>\n            <!-- /wp:paragraph -->\n            <!-- wp:columns -->\n            <div class=\"wp-block-columns\">\n                <div class=\"wp-block-column\"><p>Column 1</p></div>\n                <div class=\"wp-block-column\"><p>Column 2</p></div>\n            </div>\n            <!-- /wp:columns -->'\n    ]);\n    \n    $this->browse(function ($browser) use ($post) {\n        $browser->visit(get_permalink($post))\n            ->assertVisible('.wp-block-heading')\n            ->assertSeeIn('.wp-block-heading', 'Test Heading')\n            ->assertVisible('.wp-block-paragraph')\n            ->assertVisible('.wp-block-columns')\n            ->assertElementsCount('.wp-block-column', 2);\n    });\n});\n```\n\n---\n\n## Best Practices\n\n### 1. Use Block Helper Functions\n\nCreate reusable helpers for common block operations:\n\n```php\n// tests/Helpers/BlockHelpers.php\nfunction addBlock(Browser $browser, string $blockName): Browser\n{\n    return $browser\n        ->click('[aria-label=\"Add block\"]')\n        ->waitFor('.block-editor-inserter__panel-content')\n        ->type('[placeholder=\"Search\"]', $blockName)\n        ->click(\"[aria-label='{$blockName}']\")\n        ->waitUntilMissing('.block-editor-inserter__panel-content');\n}\n\nfunction selectBlock(Browser $browser, string $selector): Browser\n{\n    return $browser\n        ->click($selector)\n        ->waitFor('.block-editor-block-toolbar');\n}\n```\n\n### 2. Wait for Editor Ready\n\n```php\nit('waits for editor to be ready', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor')\n            ->waitUntilMissing('.block-editor-block-list__layout.is-loading')\n            ->assertVisible('.editor-post-title__input');\n    });\n});\n```\n\n### 3. Handle Block Selection States\n\n```php\nit('handles block focus states', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        // Click block to select\n        $browser->type(paragraphBlockSelector(), 'Content')\n            ->click(paragraphBlockSelector())\n            ->assertHasClass(paragraphBlockSelector(), 'is-selected')\n            ->assertVisible(blockToolbarSelector());\n        \n        // Click away to deselect\n        $browser->click('.editor-post-title__input')\n            ->assertMissing(paragraphBlockSelector() . '.is-selected');\n    });\n});\n```\n\n### 4. Test Block Transforms\n\n```php\nit('transforms paragraph to heading', function () {\n    $this->browse(function ($browser) {\n        $browser->loginAs(1)\n            ->visit('/wp-admin/post-new.php')\n            ->waitFor('.block-editor');\n        \n        $browser->type(paragraphBlockSelector(), 'This becomes a heading')\n            ->click(paragraphBlockSelector())\n            ->click(blockOptionsMenuSelector())\n            ->click(blockTransformSelector())\n            ->click('button:has-text(\"Heading\")')\n            ->assertMissing(paragraphBlockSelector())\n            ->assertVisible(headingBlockSelector());\n    });\n});\n```\n\n---\n\n## Next Steps\n\n- [Browser Testing](browser-testing.md) - Learn about Playwright integration\n- [WooCommerce Testing](woocommerce.md) - Test WooCommerce stores\n- [Visual Regression](visual-regression.md) - Screenshot comparison testing\n- [Accessibility Testing](accessibility-testing.md) - Test WCAG compliance\n",
    "ci-cd": "# CI/CD Integration\n\nConfigure PestWP to run in continuous integration environments.\n\n## GitHub Actions\n\n### Basic Setup\n\n```yaml\n# .github/workflows/test.yml\nname: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n          extensions: mbstring, dom, pdo_sqlite\n          coverage: xdebug\n          \n      - name: Install dependencies\n        run: composer install --prefer-dist --no-progress\n        \n      - name: Run tests\n        run: ./vendor/bin/pest\n```\n\n### With Browser Tests\n\n```yaml\nname: Tests\n\non: [push, pull_request]\n\njobs:\n  unit:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n          \n      - name: Install dependencies\n        run: composer install\n        \n      - name: Run unit tests\n        run: ./vendor/bin/pest tests/Unit\n\n  browser:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n          \n      - name: Setup Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          \n      - name: Install dependencies\n        run: composer install\n        \n      - name: Install Playwright\n        run: npx playwright install chromium --with-deps\n        \n      - name: Start WordPress server\n        run: |\n          ./vendor/bin/pest-wp-serve &\n          sleep 5\n          \n      - name: Run browser tests\n        run: ./vendor/bin/pest tests/Browser\n```\n\n### Matrix Testing\n\nTest across multiple PHP versions:\n\n```yaml\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        php: ['8.3', '8.4']\n        \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup PHP ${{ matrix.php }}\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          \n      - name: Install dependencies\n        run: composer install\n        \n      - name: Run tests\n        run: ./vendor/bin/pest\n```\n\n### With Coverage\n\n```yaml\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Setup PHP\n        uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n          coverage: xdebug\n          \n      - name: Install dependencies\n        run: composer install\n        \n      - name: Run tests with coverage\n        run: ./vendor/bin/pest --coverage --coverage-clover=coverage.xml\n        \n      - name: Upload coverage to Codecov\n        uses: codecov/codecov-action@v3\n        with:\n          files: coverage.xml\n```\n\n## GitLab CI\n\n### Basic Setup\n\n```yaml\n# .gitlab-ci.yml\nstages:\n  - test\n\ntest:\n  image: php:8.3\n  stage: test\n  before_script:\n    - apt-get update && apt-get install -y git unzip\n    - curl -sS https://getcomposer.org/installer | php\n    - php composer.phar install\n  script:\n    - ./vendor/bin/pest\n```\n\n### With Browser Tests\n\n```yaml\ntest:unit:\n  image: php:8.3\n  stage: test\n  script:\n    - composer install\n    - ./vendor/bin/pest tests/Unit\n\ntest:browser:\n  image: mcr.microsoft.com/playwright:v1.40.0-focal\n  stage: test\n  script:\n    - apt-get update && apt-get install -y php8.3 php8.3-cli\n    - composer install\n    - ./vendor/bin/pest-wp-serve &\n    - sleep 5\n    - ./vendor/bin/pest tests/Browser\n```\n\n### Matrix Testing\n\n```yaml\n.test_template: &test_template\n  stage: test\n  script:\n    - composer install\n    - ./vendor/bin/pest\n\ntest:php83:\n  <<: *test_template\n  image: php:8.3\n\ntest:php84:\n  <<: *test_template\n  image: php:8.4\n```\n\n## CircleCI\n\n```yaml\n# .circleci/config.yml\nversion: 2.1\n\njobs:\n  test:\n    docker:\n      - image: cimg/php:8.3\n    steps:\n      - checkout\n      - run: composer install\n      - run: ./vendor/bin/pest\n\nworkflows:\n  test:\n    jobs:\n      - test\n```\n\n## Bitbucket Pipelines\n\n```yaml\n# bitbucket-pipelines.yml\npipelines:\n  default:\n    - step:\n        name: Run Tests\n        image: php:8.3\n        caches:\n          - composer\n        script:\n          - apt-get update && apt-get install -y git unzip\n          - curl -sS https://getcomposer.org/installer | php\n          - php composer.phar install\n          - ./vendor/bin/pest\n```\n\n## Best Practices\n\n### 1. Separate Test Types\n\nRun different test types as separate jobs:\n\n```yaml\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: composer install\n      - run: ./vendor/bin/pint --test\n\n  analyse:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: composer install\n      - run: ./vendor/bin/phpstan analyse\n\n  test:unit:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: composer install\n      - run: ./vendor/bin/pest tests/Unit\n\n  test:integration:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: composer install\n      - run: ./vendor/bin/pest tests/Integration\n\n  test:browser:\n    runs-on: ubuntu-latest\n    needs: [test:unit, test:integration]\n    steps:\n      - uses: actions/checkout@v4\n      - run: composer install\n      - run: npx playwright install chromium --with-deps\n      - run: ./vendor/bin/pest tests/Browser\n```\n\n### 2. Cache Dependencies\n\n```yaml\n- name: Get Composer cache directory\n  id: composer-cache\n  run: echo \"dir=$(composer config cache-files-dir)\" >> $GITHUB_OUTPUT\n\n- uses: actions/cache@v3\n  with:\n    path: ${{ steps.composer-cache.outputs.dir }}\n    key: ${{ runner.os }}-composer-${{ hashFiles('**/composer.lock') }}\n    restore-keys: ${{ runner.os }}-composer-\n```\n\n### 3. Fail Fast\n\nStop on first failure to save time:\n\n```yaml\nstrategy:\n  fail-fast: true\n  matrix:\n    php: ['8.3', '8.4']\n```\n\n### 4. Upload Artifacts on Failure\n\nSave screenshots and logs when tests fail:\n\n```yaml\n- name: Upload screenshots on failure\n  if: failure()\n  uses: actions/upload-artifact@v3\n  with:\n    name: screenshots\n    path: tests/__screenshots__/\n    retention-days: 7\n\n- name: Upload logs on failure\n  if: failure()\n  uses: actions/upload-artifact@v3\n  with:\n    name: logs\n    path: storage/logs/\n```\n\n### 5. Run in Parallel\n\n```yaml\n- name: Run tests in parallel\n  run: ./vendor/bin/pest --parallel --processes=4\n```\n\n## Environment Variables\n\nSet environment variables for tests:\n\n```yaml\nenv:\n  WP_PATH: /var/www/wordpress\n  PEST_WP_SQLITE: true\n  PEST_BROWSER_HEADLESS: true\n```\n\n## Scheduled Runs\n\nRun tests on a schedule (e.g., nightly):\n\n```yaml\non:\n  schedule:\n    - cron: '0 0 * * *'  # Every day at midnight\n  push:\n    branches: [main]\n  pull_request:\n```\n\n## Status Badges\n\nAdd test status badges to your README:\n\n```markdown\n![Tests](https://github.com/user/repo/actions/workflows/test.yml/badge.svg)\n![Coverage](https://codecov.io/gh/user/repo/branch/main/graph/badge.svg)\n```\n\n## Complete Example\n\n```yaml\nname: CI\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n      - run: composer install\n      - run: ./vendor/bin/pint --test\n\n  analyse:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n      - run: composer install\n      - run: ./vendor/bin/phpstan analyse\n\n  test:\n    runs-on: ubuntu-latest\n    needs: [lint, analyse]\n    strategy:\n      matrix:\n        php: ['8.3', '8.4']\n    steps:\n      - uses: actions/checkout@v4\n      \n      - uses: shivammathur/setup-php@v2\n        with:\n          php-version: ${{ matrix.php }}\n          coverage: xdebug\n          \n      - name: Cache Composer\n        uses: actions/cache@v3\n        with:\n          path: vendor\n          key: ${{ runner.os }}-php${{ matrix.php }}-${{ hashFiles('composer.lock') }}\n          \n      - run: composer install\n      \n      - name: Run tests\n        run: ./vendor/bin/pest --coverage --coverage-clover=coverage.xml\n        \n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          files: coverage.xml\n\n  browser:\n    runs-on: ubuntu-latest\n    needs: test\n    steps:\n      - uses: actions/checkout@v4\n      \n      - uses: shivammathur/setup-php@v2\n        with:\n          php-version: '8.3'\n          \n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          \n      - run: composer install\n      - run: npx playwright install chromium --with-deps\n      \n      - name: Start server\n        run: ./vendor/bin/pest-wp-serve &\n        \n      - name: Wait for server\n        run: sleep 5\n        \n      - name: Run browser tests\n        run: ./vendor/bin/pest tests/Browser\n        \n      - name: Upload screenshots\n        if: failure()\n        uses: actions/upload-artifact@v3\n        with:\n          name: browser-screenshots\n          path: tests/__screenshots__/\n```\n\n## Next Steps\n\n- [Configuration](configuration.md) - Configure tests\n- [Architecture Testing](architecture-testing.md) - Code quality checks\n- [Migration](migration.md) - Migrate from other frameworks\n",
    "migration": "# Migration Guide\n\nMigrate from other WordPress testing frameworks to PestWP.\n\n## From WP_UnitTestCase\n\n### Before (WP_UnitTestCase)\n\n```php\n<?php\n\nclass Test_My_Plugin extends WP_UnitTestCase {\n    \n    public function setUp(): void {\n        parent::setUp();\n        $this->admin = $this->factory->user->create(['role' => 'administrator']);\n    }\n    \n    public function test_creates_post() {\n        wp_set_current_user($this->admin);\n        \n        $post_id = wp_insert_post([\n            'post_title' => 'Test Post',\n            'post_status' => 'publish',\n        ]);\n        \n        $this->assertIsInt($post_id);\n        $post = get_post($post_id);\n        $this->assertEquals('publish', $post->post_status);\n    }\n    \n    public function test_user_capabilities() {\n        $editor = $this->factory->user->create(['role' => 'editor']);\n        \n        $this->assertTrue(user_can($editor, 'edit_posts'));\n        $this->assertFalse(user_can($editor, 'manage_options'));\n    }\n}\n```\n\n### After (PestWP)\n\n```php\n<?php\n\nuse function PestWP\\createPost;\nuse function PestWP\\createUser;\nuse function PestWP\\loginAs;\n\nbeforeEach(function () {\n    $this->admin = createUser('administrator');\n});\n\nit('creates post', function () {\n    loginAs($this->admin);\n    \n    $post = createPost([\n        'post_title' => 'Test Post',\n        'post_status' => 'publish',\n    ]);\n    \n    expect($post->ID)->toBeInt();\n    expect($post)->toBePublished();\n});\n\nit('tests user capabilities', function () {\n    $editor = createUser('editor');\n    \n    expect($editor)->toHaveCapability('edit_posts');\n    expect($editor)->not->toHaveCapability('manage_options');\n});\n```\n\n## From wp-browser\n\n### Before (wp-browser with Codeception)\n\n```php\n<?php\n\nclass PostCest {\n    \n    public function _before(WpunitTester $I) {\n        $this->admin = $I->haveUserInDatabase('admin', 'administrator');\n    }\n    \n    public function createPostTest(WpunitTester $I) {\n        $I->loginAs($this->admin);\n        \n        $postId = $I->havePostInDatabase([\n            'post_title' => 'Test Post',\n            'post_status' => 'publish',\n        ]);\n        \n        $I->seePostInDatabase(['ID' => $postId]);\n        $I->seePostWithTermInDatabase($postId, 'uncategorized', 'category');\n    }\n    \n    public function restApiTest(WpunitTester $I) {\n        $response = $I->sendGET('/wp/v2/posts');\n        \n        $I->seeResponseCodeIs(200);\n        $I->seeResponseIsJson();\n    }\n}\n```\n\n### After (PestWP)\n\n```php\n<?php\n\nuse function PestWP\\createPost;\nuse function PestWP\\createUser;\nuse function PestWP\\loginAs;\nuse function PestWP\\Functions\\rest;\n\nbeforeEach(function () {\n    $this->admin = createUser('administrator');\n});\n\nit('creates post', function () {\n    loginAs($this->admin);\n    \n    $post = createPost([\n        'post_title' => 'Test Post',\n        'post_status' => 'publish',\n    ]);\n    \n    expect($post)->toBePublished();\n    expect($post)->toHaveTerm('Uncategorized', 'category');\n});\n\nit('tests REST API', function () {\n    $response = rest()->get('/wp/v2/posts');\n    \n    expect($response)->toHaveStatus(200);\n    expect($response)->toBeSuccessful();\n});\n```\n\n## From PHPUnit (Plain)\n\n### Before (PHPUnit)\n\n```php\n<?php\n\nnamespace Tests;\n\nuse PHPUnit\\Framework\\TestCase;\n\nclass PluginTest extends TestCase {\n    \n    protected function setUp(): void {\n        parent::setUp();\n        // Manual WordPress bootstrap\n        require_once '/path/to/wordpress/wp-load.php';\n    }\n    \n    public function testOptionsSave(): void {\n        update_option('my_option', 'test_value');\n        \n        $this->assertEquals('test_value', get_option('my_option'));\n    }\n    \n    public function testFilterRegistration(): void {\n        add_filter('the_title', 'my_filter', 10);\n        \n        $this->assertNotFalse(has_filter('the_title', 'my_filter'));\n    }\n}\n```\n\n### After (PestWP)\n\n```php\n<?php\n\nuse function PestWP\\setOption;\n\nit('saves options', function () {\n    setOption('my_option', 'test_value');\n    \n    expect('my_option')->toHaveOption('test_value');\n});\n\nit('registers filters', function () {\n    add_filter('the_title', 'my_filter', 10);\n    \n    expect('the_title')->toHaveFilter('my_filter', 10);\n});\n```\n\n## Common Migration Patterns\n\n### Factory Methods\n\n| WP_UnitTestCase | PestWP |\n|-----------------|--------|\n| `$this->factory->post->create()` | `createPost()` |\n| `$this->factory->user->create()` | `createUser()` |\n| `$this->factory->term->create()` | `createTerm()` |\n| `$this->factory->attachment->create()` | `createAttachment()` |\n| `$this->factory->comment->create()` | `wp_insert_comment()` |\n\n### Assertions\n\n| PHPUnit/WP_UnitTestCase | PestWP |\n|-------------------------|--------|\n| `$this->assertEquals('publish', $post->post_status)` | `expect($post)->toBePublished()` |\n| `$this->assertTrue(user_can($user, 'edit_posts'))` | `expect($user)->can('edit_posts')` |\n| `$this->assertInstanceOf(WP_Error::class, $result)` | `expect($result)->toBeWPError()` |\n| `$this->assertNotFalse(has_filter('hook', $callback))` | `expect('hook')->toHaveFilter($callback)` |\n\n### Authentication\n\n| WP_UnitTestCase | PestWP |\n|-----------------|--------|\n| `wp_set_current_user($user_id)` | `loginAs($user_id)` |\n| `wp_set_current_user(0)` | `logout()` |\n| `wp_get_current_user()` | `currentUser()` |\n| `is_user_logged_in()` | `isUserLoggedIn()` |\n\n## Step-by-Step Migration\n\n### 1. Install PestWP\n\n```bash\ncomposer require --dev alvarodelera/pest-wp-plugin\n```\n\n### 2. Initialize Pest\n\n```bash\n./vendor/bin/pest --init\n```\n\n### 3. Configure Pest.php\n\n```php\n<?php\n\n// tests/Pest.php\n\nuse PestWP\\Concerns\\InteractsWithDatabase;\n\nuses(InteractsWithDatabase::class)->in('Integration');\n```\n\n### 4. Create Directory Structure\n\n```\ntests/\n\u251c\u2500\u2500 Pest.php\n\u251c\u2500\u2500 Unit/           # Unit tests (no WordPress)\n\u251c\u2500\u2500 Integration/    # Integration tests (with WordPress)\n\u2514\u2500\u2500 Browser/        # Browser tests\n```\n\n### 5. Convert Tests\n\nConvert one test file at a time:\n\n```php\n// Before: tests/test-posts.php\nclass Test_Posts extends WP_UnitTestCase {\n    public function test_post_creation() { ... }\n}\n\n// After: tests/Integration/PostTest.php\nit('creates posts', function () { ... });\n```\n\n### 6. Run Tests\n\n```bash\n# Run all tests\n./vendor/bin/pest\n\n# Run specific directory\n./vendor/bin/pest tests/Integration\n```\n\n## Gradual Migration\n\nYou can run both test suites during migration:\n\n```xml\n<!-- phpunit.xml -->\n<testsuites>\n    <!-- Old tests -->\n    <testsuite name=\"Legacy\">\n        <directory>tests/legacy</directory>\n    </testsuite>\n    \n    <!-- New PestWP tests -->\n    <testsuite name=\"PestWP\">\n        <directory>tests/Unit</directory>\n        <directory>tests/Integration</directory>\n    </testsuite>\n</testsuites>\n```\n\n## Troubleshooting\n\n### \"Function not found\" Errors\n\nEnsure WordPress is loaded:\n\n```php\n// tests/Pest.php\nuses(PestWP\\databaseIsolation())->in('Integration');\n```\n\n### Database State Leaking\n\nEnable database isolation:\n\n```php\nuses(PestWP\\Concerns\\InteractsWithDatabase::class)->in('Integration');\n```\n\n### Slow Tests\n\nUse SQLite for faster tests:\n\n```xml\n<php>\n    <env name=\"PEST_WP_SQLITE\" value=\"true\"/>\n</php>\n```\n\n## Benefits of Migration\n\n1. **Cleaner Syntax**: More readable, expressive tests\n2. **Less Boilerplate**: No class declarations, less setup code\n3. **Better Assertions**: WordPress-specific expectations\n4. **Faster Tests**: SQLite and transaction-based isolation\n5. **Modern Tooling**: Parallel testing, coverage, architecture testing\n\n## Next Steps\n\n- [Getting Started](getting-started.md) - Write your first test\n- [Factories](factories.md) - Create test data\n- [Expectations](expectations.md) - Available assertions\n- [Configuration](configuration.md) - Configure PestWP\n"
};



        const config = {
            basePath: 'guide/', // Path to markdown files
            defaultPage: 'home',
            pages: {
                'home': 'README.md',
                'installation': 'installation.md',
                'getting-started': 'getting-started.md',
                'configuration': 'configuration.md',
                'factories': 'factories.md',
                'expectations': 'expectations.md',
                'authentication': 'authentication.md',
                'database-isolation': 'database-isolation.md',
                'browser-testing': 'browser-testing.md',
                'rest-api-testing': 'rest-api-testing.md',
                'ajax-testing': 'ajax-testing.md',
                'architecture-testing': 'architecture-testing.md',
                'mocking': 'mocking.md',
                'fixtures': 'fixtures.md',
                'snapshots': 'snapshots.md',
                'visual-regression': 'visual-regression.md',
                'accessibility-testing': 'accessibility-testing.md',
                'woocommerce': 'woocommerce.md',
                'gutenberg': 'gutenberg.md',
                'ci-cd': 'ci-cd.md',
                'migration': 'migration.md'
            }
        };

        // ========================================
        // DOM Elements
        // ========================================
        const elements = {
            articleContent: document.getElementById('articleContent'),
            searchInput: document.getElementById('searchInput'),
            searchResults: document.getElementById('searchResults'),
            themeToggle: document.getElementById('themeToggle'),
            menuToggle: document.getElementById('menuToggle'),
            sidebar: document.getElementById('sidebar'),
            sunIcon: document.querySelector('.sun-icon'),
            moonIcon: document.querySelector('.moon-icon'),
            hljsLight: document.getElementById('hljs-light'),
            hljsDark: document.getElementById('hljs-dark')
        };

        // ========================================
        // Theme Management
        // ========================================
        const theme = {
            init() {
                const saved = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const initial = saved || (prefersDark ? 'dark' : 'light');
                this.set(initial);
            },

            toggle() {
                const current = document.documentElement.getAttribute('data-theme');
                this.set(current === 'dark' ? 'light' : 'dark');
            },

            set(mode) {
                document.documentElement.setAttribute('data-theme', mode);
                localStorage.setItem('theme', mode);
                
                // Toggle icons
                elements.sunIcon.style.display = mode === 'dark' ? 'block' : 'none';
                elements.moonIcon.style.display = mode === 'dark' ? 'none' : 'block';
                
                // Toggle highlight.js themes
                elements.hljsLight.disabled = mode === 'dark';
                elements.hljsDark.disabled = mode === 'light';
            }
        };

        // ========================================
        // Markdown Renderer
        // ========================================
        const markdown = {
            init() {
                marked.setOptions({
                    highlight: (code, lang) => {
                        if (lang && hljs.getLanguage(lang)) {
                            return hljs.highlight(code, { language: lang }).value;
                        }
                        return hljs.highlightAuto(code).value;
                    },
                    gfm: true,
                    breaks: false,
                    headerIds: true
                });
            },

            render(content) {
                return marked.parse(content);
            }
        };

        // ========================================
        // Content Loader
        // ========================================
        const content = {
            cache: {},

            async load(page) {
                const file = config.pages[page];
                if (!file) {
                    this.showError('Page not found');
                    return;
                }

                if (typeof embeddedPages !== 'undefined' && embeddedPages[page]) {
                    this.display(embeddedPages[page], page);
                    return;
                }

                this.showError('Content not found in embedded data.');
            },

            display(text, page) {
                if (page === 'home') {
                    this.showHomePage();
                } else {
                    const html = markdown.render(text);
                    elements.articleContent.innerHTML = html;
                    this.addCopyButtons();
                    this.updateActiveLink(page);
                    window.scrollTo(0, 0);
                }
            },

            showHomePage() {
                elements.articleContent.innerHTML = `
                    <div class="hero">
                        <span class="hero-badge">Built for WordPress Developers</span>
                        <h1>Modern WordPress Testing</h1>
                        <p class="hero-description">
                            Elegant testing syntax, powerful assertions, and seamless WordPress integration. 
                            Write tests that are a joy to read and maintain.
                        </p>
                        <div class="hero-buttons">
                            <a href="#getting-started" class="btn btn-primary">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 12h14M12 5l7 7-7 7"/>
                                </svg>
                                Get Started
                            </a>
                            <a href="https://github.com/alvarodelera/pest-wp-plugin" class="btn btn-secondary" target="_blank">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                View on GitHub
                            </a>
                        </div>
                    </div>

                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">ðŸŽ¯</div>
                            <h3>Elegant Syntax</h3>
                            <p>Write expressive tests with Pest's beautiful, human-readable syntax. No more verbose PHPUnit boilerplate.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸ­</div>
                            <h3>Factory Helpers</h3>
                            <p>Create posts, users, terms, and more with simple factory functions. Test data creation made effortless.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">âœ…</div>
                            <h3>Custom Expectations</h3>
                            <p>25+ WordPress-specific expectations for hooks, filters, database queries, and more.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸ”’</div>
                            <h3>Database Isolation</h3>
                            <p>Automatic transaction rollback ensures each test runs in complete isolation.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸŒ</div>
                            <h3>Browser Testing</h3>
                            <p>Full Playwright integration for end-to-end testing with visual regression support.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸ›’</div>
                            <h3>WooCommerce Ready</h3>
                            <p>90+ selectors for testing WooCommerce shops, carts, checkouts, and admin screens.</p>
                        </div>
                    </div>

                    <h2>Quick Example</h2>
                    <pre><code class="language-php">use function PestWP\\Factories\\createPost;
use function PestWP\\Factories\\createUser;

it('allows admins to publish posts', function () {
    // Create test data
    $admin = createUser(['role' => 'administrator']);
    $post = createPost(['post_status' => 'draft']);
    
    // Login and act
    loginAs($admin);
    wp_publish_post($post->ID);
    
    // Assert
    expect(get_post($post->ID))
        ->post_status->toBe('publish')
        ->post_author->toBe($admin->ID);
});

it('registers REST API endpoints', function () {
    rest()
        ->get('/wp/v2/posts')
        ->assertOk()
        ->assertJsonCount(10, 'body');
});

it('fires hooks correctly', function () {
    expect('save_post')
        ->toBeAction()
        ->toHaveBeenFired();
});</code></pre>

                    <h2>Installation</h2>
                    <pre><code class="language-bash">composer require alvarodelera/pest-wp-plugin --dev</code></pre>
                    <p>
                        That's it! PestWP integrates seamlessly with your existing WordPress test setup. 
                        <a href="#installation">Read the full installation guide</a> for more details.
                    </p>

                    <h2>What's Included</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">ðŸ“</div>
                            <h3>REST API Testing</h3>
                            <p>Fluent API for testing WordPress REST endpoints with authentication support.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">âš¡</div>
                            <h3>AJAX Testing</h3>
                            <p>Test WordPress AJAX handlers with proper nonce handling and user context.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸŽ­</div>
                            <h3>Mocking System</h3>
                            <p>Mock functions, hooks, HTTP requests, and time for predictable tests.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸ“¸</div>
                            <h3>Visual Testing</h3>
                            <p>Snapshot and screenshot comparison testing for visual regression detection.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">â™¿</div>
                            <h3>Accessibility</h3>
                            <p>Built-in WCAG compliance testing with aXe integration.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ðŸ—ï¸</div>
                            <h3>Architecture Testing</h3>
                            <p>Enforce coding standards and architectural rules across your codebase.</p>
                        </div>
                    </div>
                `;
                
                // Highlight code blocks
                elements.articleContent.querySelectorAll('pre code').forEach(block => {
                    hljs.highlightElement(block);
                });
                
                this.addCopyButtons();
                this.updateActiveLink('home');
            },

            showError(message) {
                elements.articleContent.innerHTML = `
                    <div style="text-align: center; padding: 64px 0;">
                        <div style="font-size: 4rem; margin-bottom: 16px;">ðŸ˜•</div>
                        <h2 style="margin-bottom: 16px;">Oops!</h2>
                        <p style="color: var(--color-text-secondary);">${message}</p>
                        <a href="#home" class="btn btn-primary" style="margin-top: 24px;">Go Home</a>
                    </div>
                `;
            },

            addCopyButtons() {
                elements.articleContent.querySelectorAll('pre').forEach(pre => {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'code-block-wrapper';
                    pre.parentNode.insertBefore(wrapper, pre);
                    wrapper.appendChild(pre);

                    const button = document.createElement('button');
                    button.className = 'copy-button';
                    button.textContent = 'Copy';
                    button.onclick = () => {
                        const code = pre.querySelector('code').textContent;
                        navigator.clipboard.writeText(code).then(() => {
                            button.textContent = 'Copied!';
                            button.classList.add('copied');
                            setTimeout(() => {
                                button.textContent = 'Copy';
                                button.classList.remove('copied');
                            }, 2000);
                        });
                    };
                    wrapper.appendChild(button);
                });
            },

            updateActiveLink(page) {
                document.querySelectorAll('.sidebar-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.page === page) {
                        link.classList.add('active');
                    }
                });
            }
        };

        // ========================================
        // Search Functionality
        // ========================================
        const search = {
            data: [],

            async init() {
                // Build search index from page titles
                this.data = Object.keys(config.pages).map(key => ({
                    id: key,
                    title: key.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '),
                    file: config.pages[key]
                }));
            },

            query(term) {
                if (!term) return [];
                const lower = term.toLowerCase();
                return this.data.filter(item => 
                    item.title.toLowerCase().includes(lower)
                );
            },

            showResults(results) {
                if (results.length === 0) {
                    elements.searchResults.innerHTML = `
                        <div class="search-result-item">
                            <div class="search-result-title">No results found</div>
                        </div>
                    `;
                } else {
                    elements.searchResults.innerHTML = results.map(item => `
                        <div class="search-result-item" data-page="${item.id}">
                            <div class="search-result-title">${item.title}</div>
                            <div class="search-result-excerpt">${item.file}</div>
                        </div>
                    `).join('');
                }
                elements.searchResults.classList.add('active');
            },

            hideResults() {
                elements.searchResults.classList.remove('active');
            }
        };

        // ========================================
        // Router
        // ========================================
        const router = {
            init() {
                // Handle initial hash
                this.navigate(location.hash.slice(1) || 'home');

                // Handle hash changes
                window.addEventListener('hashchange', () => {
                    this.navigate(location.hash.slice(1) || 'home');
                });
            },

            navigate(page) {
                if (config.pages[page]) {
                    content.load(page);
                    // Close mobile menu
                    elements.sidebar.classList.remove('open');
                }
            }
        };

        // ========================================
        // Event Listeners
        // ========================================
        function initEventListeners() {
            // Theme toggle
            elements.themeToggle.addEventListener('click', () => theme.toggle());

            // Mobile menu toggle
            elements.menuToggle.addEventListener('click', () => {
                elements.sidebar.classList.toggle('open');
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', (e) => {
                if (window.innerWidth <= 1024) {
                    if (!elements.sidebar.contains(e.target) && 
                        !elements.menuToggle.contains(e.target)) {
                        elements.sidebar.classList.remove('open');
                    }
                }
            });

            // Search input
            elements.searchInput.addEventListener('input', (e) => {
                const term = e.target.value.trim();
                if (term.length >= 2) {
                    const results = search.query(term);
                    search.showResults(results);
                } else {
                    search.hideResults();
                }
            });

            elements.searchInput.addEventListener('focus', () => {
                const term = elements.searchInput.value.trim();
                if (term.length >= 2) {
                    const results = search.query(term);
                    search.showResults(results);
                }
            });

            // Search result clicks
            elements.searchResults.addEventListener('click', (e) => {
                const item = e.target.closest('.search-result-item');
                if (item && item.dataset.page) {
                    location.hash = item.dataset.page;
                    elements.searchInput.value = '';
                    search.hideResults();
                }
            });

            // Close search on outside click
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    search.hideResults();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                // Focus search on Cmd/Ctrl + K
                if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                    e.preventDefault();
                    elements.searchInput.focus();
                }
                // Close search on Escape
                if (e.key === 'Escape') {
                    search.hideResults();
                    elements.searchInput.blur();
                }
            });
        }

        // ========================================
        // Initialize
        // ========================================
        document.addEventListener('DOMContentLoaded', () => {
            theme.init();
            markdown.init();
            search.init();
            router.init();
            initEventListeners();
        });
    </script>
</body>
</html>
